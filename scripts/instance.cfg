from datetime import timedelta
import warnings
import os

from celery.schedules import crontab
from invenio_app.config import \
    APP_DEFAULT_SECURE_HEADERS as INVENIO_APP_APP_DEFAULT_SECURE_HEADERS
from flask_babelex import lazy_gettext as _
from weko_search_ui.config import SEARCH_UI_SEARCH_INDEX


# Flask
TEMPLATES_AUTO_RELOAD = True
PERMANENT_SESSION_LIFETIME = timedelta(days=1)
WEKO_ADMIN_IMPORT_PAGE_LIFETIME = 43200
""" Session time out setting in import page, default 43200 seconds (12 hours) """

WEKO_ADMIN_RESTRICTED_ACCESS_DISPLAY_FLAG = False
"""
Restricted access feature display flag.
True: display all feature
False: only display secret url download
"""

# Database
SQLALCHEMY_DATABASE_URI = 'postgresql+psycopg2://{{ environ('INVENIO_POSTGRESQL_DBUSER') }}:{{ environ('INVENIO_POSTGRESQL_DBPASS') }}@{{ environ('INVENIO_POSTGRESQL_HOST') }}:5432/{{ environ('INVENIO_POSTGRESQL_DBNAME') }}'
#: Track modifications to objects.
SQLALCHEMY_TRACK_MODIFICATIONS = True
SQLALCHEMY_ENGINE_OPTIONS = {"pool_pre_ping": True}
# Database connection pool
DB_POOL_CLASS = '{{ environ('INVENIO_DB_POOL_CLASS') or 'QueuePool'}}'
# Statis files
COLLECT_STORAGE = 'flask_collect.storage.file'

# Request timeout for bulk update
INDEXER_BULK_REQUEST_TIMEOUT = 600

# Redis
CACHE_TYPE = OAUTH2_CACHE_TYPE =  'redis' # redis or redissentinel
CACHE_REDIS_HOST = '{{ environ('INVENIO_REDIS_HOST') }}'
CACHE_REDIS_URL = 'redis://{{ environ('INVENIO_REDIS_HOST') }}:6379/0'
ACCOUNTS_SESSION_REDIS_URL = 'redis://{{ environ('INVENIO_REDIS_HOST') }}:6379/1'
REDIS_PORT = '6379'

#sentinel
CACHE_REDIS_SENTINEL_MASTER = 'mymaster'
CACHE_REDIS_DB = '{{ environ('CACHE_REDIS_DB') }}'
ACCOUNTS_SESSION_REDIS_DB_NO = '{{ environ('ACCOUNTS_SESSION_REDIS_DB_NO') }}'
CELERY_RESULT_BACKEND_DB_NO = '{{ environ('CELERY_RESULT_BACKEND_DB_NO') }}'
SENTINEL_PORT = '26379'
CACHE_REDIS_SENTINELS = [("weko-sentinel-service.weko3re","26379")]

CRAWLER_REDIS_DB = 3
CRAWLER_REDIS_PORT = 6379
CRAWLER_REDIS_TTL = 86400

GROUP_INFO_REDIS_DB = 4 

# Celery
CELERY_GET_STATUS_TIMEOUT = 3.0

if os.environ.get('INVENIO_RABBITMQ_VHOST').endswith('/'):
  # Celery 3
  BROKER_URL = 'amqp://{{ environ('INVENIO_RABBITMQ_USER') }}:{{ environ('INVENIO_RABBITMQ_PASS') }}@{{ environ('INVENIO_RABBITMQ_HOST') }}:5672/{{ environ('INVENIO_RABBITMQ_VHOST') }}'
  # Celery 4
  CELERY_BROKER_URL = 'amqp://{{ environ('INVENIO_RABBITMQ_USER') }}:{{ environ('INVENIO_RABBITMQ_PASS') }}@{{ environ('INVENIO_RABBITMQ_HOST') }}:5672/{{ environ('INVENIO_RABBITMQ_VHOST') }}'
else:
  # Celery 3
  BROKER_URL = 'amqp://{{ environ('INVENIO_RABBITMQ_USER') }}:{{ environ('INVENIO_RABBITMQ_PASS') }}@{{ environ('INVENIO_RABBITMQ_HOST') }}:5672/{{ environ('INVENIO_RABBITMQ_VHOST') }}/'
  # Celery 4
  CELERY_BROKER_URL = 'amqp://{{ environ('INVENIO_RABBITMQ_USER') }}:{{ environ('INVENIO_RABBITMQ_PASS') }}@{{ environ('INVENIO_RABBITMQ_HOST') }}:5672/{{ environ('INVENIO_RABBITMQ_VHOST') }}/'

from kombu import Exchange, Queue
INDEXER_MQ_EXCHANGE = Exchange("indexer", type="direct")
LINKAGE_MQ_EXCHANGE = Exchange('cris_researchmap_linkage', type='direct')
"""Default exchange for message queue."""
INDEXER_MQ_QUEUE = Queue("indexer", exchange=INDEXER_MQ_EXCHANGE, routing_key="indexer",queue_arguments={"x-queue-type":"quorum"})
LINKAGE_MQ_QUEUE = Queue("cris_researchmap_linkage", exchange=LINKAGE_MQ_EXCHANGE, routing_key="cris_researchmap_linkage",queue_arguments={"x-queue-type":"quorum"})

if CACHE_TYPE == 'redis':
  CELERY_RESULT_BACKEND = 'redis://{{ environ('INVENIO_REDIS_HOST') }}:6379/'+CELERY_RESULT_BACKEND_DB_NO
else:
  CELERY_RESULT_BACKEND = 'sentinel://weko-sentinel-service.weko3re:26379/'+CELERY_RESULT_BACKEND_DB_NO
  CELERY_RESULT_BACKEND_TRANSPORT_OPTIONS = { 'master_name': 'mymaster' }
CELERY_TASK_TRACK_STARTED=True

WEKO_ITEMS_UI_CRIS_LINKAGE_RESEARCHMAP_BASE_URL="https://api-trial.researchmap.jp"
WEKO_ITEMS_UI_CRIS_LINKAGE_RESEARCHMAP_HOST = "api-trial.researchmap.jp:443"
WEKO_ITEMS_UI_CRIS_LINKAGE_RESEARCHMAP_RETRY_MAX = 5
WEKO_ITEMS_UI_CRIS_LINKAGE_RESEARCHMAP_MERGE_MODE_DEFAULT = 'similar_merge_similar_data'
WEKO_ITEMS_UI_DEFAULT_LANG = "ja"
WEKO_ITEMS_UI_CRIS_LINKAGE_RESEARCHMAP_MAPPINGS = [
        { 'type' : 'lang' , "rm_name" : 'paper_title', "jpcoar_name" : 'dc:title' , "weko_name" :"title"}
        ,{ 'type' : 'lang' , "rm_name" : 'book_title', "jpcoar_name" : 'dc:title' , "weko_name" :"title"}
        ,{ 'type' : 'lang' , "rm_name" : 'presentation_title', "jpcoar_name" : 'dc:title' , "weko_name" :"title"}
        ,{ 'type' : 'lang' , "rm_name" : 'work_title', "jpcoar_name" : 'dc:title' , "weko_name" :"title"}
        ,{ 'type' : 'lang' , "rm_name" : 'other_title', "jpcoar_name" : 'dc:title' , "weko_name" :"title"}
        
        ,{'type' : 'lang' , "rm_name" : 'description', "jpcoar_name" : 'datacite:description' , "weko_name" :"description"}
        ,{'type' : 'lang' , "rm_name" : 'publisher',   "jpcoar_name" : 'dc:publisher' , "weko_name" :"publisher"}
        ,{'type' : 'lang' , "rm_name" : 'publication_name',   "jpcoar_name" : 'jpcoar:sourceTitle' , "weko_name" :"sourceTitle"}

        ,{'type' : 'lang' , "rm_name" : 'event',   "jpcoar_name" : 'jpcoar:conference' , "weko_name" :"conference" , "child_node" : "conferenceName"}
        ,{'type' : 'lang' , "rm_name" : 'promoter',   "jpcoar_name" : 'jpcoar:conference' , "weko_name" :"conference", "child_node" : "conferenceSponsor"}
        ,{'type' : 'lang' , "rm_name" : 'location',   "jpcoar_name" : 'jpcoar:conference' , "weko_name" :"conference", "child_node" : "conferencePlace"}
        ,{'type' : 'simple' , "rm_name" : 'address_country',   "jpcoar_name" : 'jpcoar:conference' , "weko_name" :"conference", "child_node" : "conferenceCountry"}

        ,{'type' : 'authors'    ,  "rm_name" : 'authors'     , "jpcoar_name" : 'jpcoar:creator'  ,"weko_name": 'creator'}
        ,{'type' : 'authors'    ,  "rm_name" : 'creators'     , "jpcoar_name" : 'jpcoar:creator'  ,"weko_name": 'creator'}
        ,{'type' : 'authors'    ,  "rm_name" : 'originators'     , "jpcoar_name" : 'jpcoar:creator'  ,"weko_name": 'creator'}
        ,{'type' : 'authors'    ,  "rm_name" : 'presenters'     , "jpcoar_name" : 'jpcoar:creator'  ,"weko_name": 'creator'}
        ,{'type' : 'identifiers',  "rm_name" : "identifiers" , "jpcoar_name" : 'jpcoar:relation' ,"weko_name": 'relation'}
        ,{'type' : 'simple_value', "rm_name" : 'publication_date',  "jpcoar_name" :  'datacite:date' , "weko_name" : "date"}
        ,{'type' : 'simple' ,"rm_name" : 'total_page',   "jpcoar_name" : 'jpcoar:numPages', "weko_name" : "numPages"}
        ,{'type' : 'simple', "rm_name" : 'volume', "jpcoar_name" :  'jpcoar:volume' , "weko_name" : "volume"}
        ,{'type' : 'simple', "rm_name" : 'number', "jpcoar_name" :  'jpcoar:issue' , "weko_name" : "issue"}
        ,{'type' : 'simple', "rm_name" : 'starting_page', "jpcoar_name" : 'jpcoar:pageStart' , "weko_name" : "pageStart"}
        ,{'type' : 'simple', "rm_name" : 'ending_page', "jpcoar_name" :   'jpcoar:pageEnd' ,   "weko_name" : "pageEnd"}
        ,{'type' : 'simple', "rm_name" : 'languages', "jpcoar_name" :  'dc:language' , "weko_name" : "language"}
        ,{'type' :  'type', "rm_name" : 'published_paper_type'     , "jpcoar_name" :  'dc:type'     , "weko_name" : "type" ,'achievement_type' : 'published_papers'}
        ,{'type' :  'type', "rm_name" : 'misc_type'     , "jpcoar_name" :  'dc:type'     , "weko_name" : "type" , 'achievement_type' : 'misc'}
        ,{'type' :  'type', "rm_name" : 'book_type'     , "jpcoar_name" :  'dc:type'     , "weko_name" : "type" , 'achievement_type' : 'books_etc'}
        ,{'type' :  'type', "rm_name" : 'presentation_type'     , "jpcoar_name" :  'dc:type'     , "weko_name" : "type",'achievement_type' : 'presentations'}
        ,{'type' :  'type', "rm_name" : 'work_type'     , "jpcoar_name" :  'dc:type'     , "weko_name" : "type", 'achievement_type' : 'works'}
        ,{'type' :  'type', "rm_name" : 'dataset_type'     , "jpcoar_name" :  'dc:type'     , "weko_name" : "type" ,'achievement_type' : 'others'}

    ]
WEKO_ITEMS_UI_CRIS_LINKAGE_RESEARCHMAP_TYPE_MAPPINGS=\
    [{'achievement_type' : 'published_papers','detail_type_name':'','JPCOAR_resource_type':'article'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'scientific_journal','JPCOAR_resource_type':'journal article'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'international_conference_proceedings','JPCOAR_resource_type':'conference paper'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'research_institution','JPCOAR_resource_type':'departmental bulletin paper'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'symposium','JPCOAR_resource_type':'conference paper'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'research_society','JPCOAR_resource_type':'article'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'in_book','JPCOAR_resource_type':'article'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'master_thesis','JPCOAR_resource_type':'master thesis'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'others','JPCOAR_resource_type':'article'}
    ,{'achievement_type' : 'published_papers','detail_type_name':'doctoral_thesis','JPCOAR_resource_type':'doctoral thesis'}
    ,{'achievement_type' : 'misc','detail_type_name':'','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'report_scientific_journal','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'report_research_institution','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'summary_international_conference','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'summary_national_conference','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'technical_report','JPCOAR_resource_type':'technical report'}
    ,{'achievement_type' : 'misc','detail_type_name':'introduction_scientific_journal','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'introduction_international_proceedings','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'introduction_research_institution','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'introduction_commerce_magazine','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'introduction_other','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'lecture_materials','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'book_review','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'meeting_report','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'misc','detail_type_name':'others','JPCOAR_resource_type':'learning object'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'','JPCOAR_resource_type':'book'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'scholarly_book','JPCOAR_resource_type':'book'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'dictionary_or_encycropedia','JPCOAR_resource_type':'book'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'textbook','JPCOAR_resource_type':'book'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'report','JPCOAR_resource_type':'report'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'general_book','JPCOAR_resource_type':'book'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'musical_material','JPCOAR_resource_type':'musical notation'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'film_or_video','JPCOAR_resource_type':'video'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'image_material','JPCOAR_resource_type':'image'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'phonetic_material','JPCOAR_resource_type':'sound'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'map','JPCOAR_resource_type':'map'}
    ,{'achievement_type' : 'books_etc','detail_type_name':'others','JPCOAR_resource_type':'book'}
    ,{'achievement_type' : 'presentations','detail_type_name':'','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'oral_presentation','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'invited_oral_presentation','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'keynote_oral_presentation','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'poster_presentation','JPCOAR_resource_type':'conference poster'}
    ,{'achievement_type' : 'presentations','detail_type_name':'public_symposium','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'nominated_symposium','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'public_discourse','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'media_report','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'presentations','detail_type_name':'others','JPCOAR_resource_type':'conference presentation'}
    ,{'achievement_type' : 'works','detail_type_name':'','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'works','detail_type_name':'artistic_activity','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'works','detail_type_name':'architectural_works','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'works','detail_type_name':'software','JPCOAR_resource_type':'software'}
    ,{'achievement_type' : 'works','detail_type_name':'database','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'works','detail_type_name':'web_service','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'works','detail_type_name':'educational_materials','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'works','detail_type_name':'others','JPCOAR_resource_type':'interactive resource'}
    ,{'achievement_type' : 'others','detail_type_name':'','JPCOAR_resource_type':'other'}
    ,{'achievement_type' : 'others','detail_type_name':'preprint','JPCOAR_resource_type':'other'}
    ,{'achievement_type' : 'others','detail_type_name':'published','JPCOAR_resource_type':'other'}
    ,{'achievement_type' : 'others','detail_type_name':'experimental','JPCOAR_resource_type':'other'}
    ,{'achievement_type' : 'others','detail_type_name':'summary','JPCOAR_resource_type':'other'}
    ,{'achievement_type' : 'others','detail_type_name':'others','JPCOAR_resource_type':'other'}
    ]


#: Beat schedule
CELERY_BEAT_SCHEDULE = {
    # Stats
    'stats-process-events': {
        'task': 'invenio_stats.tasks.process_events',
        'schedule': timedelta(minutes=1),
        'args': [('celery-task', 'item-create', 'top-view', 'record-view', 'file-download', 'file-preview', 'search')],
    },
    'stats-aggregate-events': {
        'task': 'invenio_stats.tasks.aggregate_events',
        'schedule': crontab(hour={{ environ('WEKO_AGGREGATE_EVENT_HOUR') }}, minute={{ environ('WEKO_AGGREGATE_EVENT_MINUTE') }}),
        'args': [('celery-task-agg', 'file-download-agg', 'file-preview-agg', 'item-create-agg', 'record-view-agg', 'search-agg', 'top-view-agg')],
    },
    # WEKO-indextree-journal-export
    'indextree-journal-export-journal': {
        'task': 'weko_indextree_journal.tasks.export_journal_task',
        'schedule': timedelta(days=1),
        'args': [('p_path')],
    },
    'admin-send-report-emails': {
        'task': 'weko_admin.tasks.check_send_all_reports',
        'schedule': timedelta(days=1, minutes=0, hours=0),
        'args': [],
    },
    'harvest-check-schedules': {
        'task': 'invenio_oaiharvester.tasks.check_schedules_and_run',
        'schedule': crontab(hour=0, minute=0, day_of_week='*'),
        'args': [],
    },
    'send-feedback-mail-schedules': {
        'task': 'weko_admin.tasks.send_feedback_mail',
        'schedule': crontab(day_of_month='1', hour=0, minute=0),
        'args': [],
    },
    'send_storage_alert_mail': {
        'task': 'invenio_files_rest.tasks.check_send_alert_mail',
        'schedule': timedelta(days=1, minutes=0, hours=0),
        'args': [],
    },
    'send_site_access_mail': {
        'task': 'weko_admin.tasks.check_send_site_access_report',
        'schedule': timedelta(days=1, minutes=0, hours=0),
        'args': [],
    },
    'remove_preview_pdf': {
        'task': 'invenio_files_rest.tasks.check_file_storage_time',
        'schedule': timedelta(days=0, minutes=0, hours=1),
        'args': [],
    },
    'remove_author_tmp_file': {
        'task': 'weko_authors.tasks.check_tmp_file_time_for_author',
        'schedule': timedelta(days=0, minutes=0, hours=1),
        'args': [],
    },
    'update_sitemap': {
        'task': 'weko_sitemap.tasks.update_sitemap',
        'schedule': timedelta(days=3, minutes=0, hours=0),
        'args': [],
    },
    'resync': {
        'task': 'invenio_resourcesyncclient.tasks.run_sync_auto',
        'schedule': crontab(hour=0, minute=0),
    },
    # Execute cancel_usage_report_activities daily at midnight
    'cancel_usage_report_activities': {
        'task': 'weko_workflow.tasks.cancel_expired_usage_report_activities',
        'schedule': crontab(minute=0, hour=0),
    },
    'clean_temp_info': {
        'task': 'weko_admin.tasks.clean_temp_info',
        'schedule': timedelta(hours=1),
        'args': [],
    },
    'delete_log': {
        'task': 'weko_logging.tasks.delete_log',
        'schedule': crontab(hour=0, minute=0),
        'args': [],
    },
    'bulk_post_item_to_researchmap': {
        'task': 'weko_items_ui.tasks.bulk_post_item_to_researchmap',
        # 'schedule': crontab(minute='*/1'),
        'schedule': crontab(hour=0, minute=0),
        'args': [],
    },
}

# Elasticsearch
SEARCH_ELASTIC_HOSTS = '{{ environ('INVENIO_ELASTICSEARCH_HOST') }}'
SEARCH_INDEX_PREFIX = '{{ environ('SEARCH_INDEX_PREFIX') }}-'
SEARCH_CLIENT_CONFIG = dict(timeout=60, max_retries=5)

#JSON
JSON_AS_ASCII = False

# JSON Schema
JSONSCHEMAS_ENDPOINT = '/schema'
JSONSCHEMAS_HOST = '{{ environ('INVENIO_WEB_HOST') }}'

# OAI server
OAISERVER_REPOSITORY_NAME = 'WEKO'
OAISERVER_RECORD_INDEX = SEARCH_UI_SEARCH_INDEX
OAISERVER_ID_PREFIX = 'oai:{{ environ('INVENIO_WEB_HOST_NAME') }}:'

# Default Secure Headers
APP_DEFAULT_SECURE_HEADERS = INVENIO_APP_APP_DEFAULT_SECURE_HEADERS
# Disable Content Security Policy headers.
APP_DEFAULT_SECURE_HEADERS['content_security_policy'] = {}
APP_DEFAULT_SECURE_HEADERS['content_security_policy'] = {
    "default-src": ["'self'"],
    "script-src": "'self' 'unsafe-inline' 'unsafe-eval' *",
    "img-src": "'self' * data: blob:",
    "object-src": "'self' *",
    "style-src": "'self' 'unsafe-inline' 'unsafe-eval' *",
    "media-src": "'self' *",
    "child-src": "'self' *",
    "font-src": "'self' * data:",
    "connect-src": "'self' *"
}
APP_DEFAULT_SECURE_HEADERS['force_https'] = False
APP_DEFAULT_SECURE_HEADERS['session_cookie_secure'] = False

# fix same session (#14164)
SESSION_COOKIE_DOMAIN = ''
SESSION_COOKIE_SAMESITE = 'None'
SESSION_COOKIE_SECURE = True

# I18N
BABEL_DEFAULT_LOCALE = 'en'
BABEL_DEFAULT_LANGUAGE = 'en'
BABEL_DEFAULT_TIMEZONE='Asia/Tokyo'
#BABEL_DEFAULT_TIMEZONE = 'Europe/Zurich'
I18N_LANGUAGES = [('ja', 'Japanese'), ('zh', 'Chinese'), ('id', 'Indonesian'), ('vi', 'Vietnamese'),
                  ('ms', 'Malay'), ('fil', 'Filipino (Pilipinas)'), ('th', 'Thai'), ('hi', 'Hindi'), ('ar', 'Arabic')]
I18N_TRANSLATIONS_PATHS = [
    '/code/invenio/translations/invenio_access/translations',
    '/code/invenio/translations/invenio_accounts/translations',
    '/code/invenio/translations/invenio_i18n/translations',
    '/code/invenio/translations/invenio_pidstore/translations',
    '/code/invenio/translations/invenio_records/translations',
    '/code/invenio/translations/invenio_records_rest/translations',
    '/code/invenio/translations/invenio_theme/translations'
]

# TODO: Remove me once the problem with email is solved in flask-security:
# https://github.com/mattupstate/flask-security/issues/685
SECURITY_EMAIL_SENDER = 'no-reply@localhost'
# Disable password change func in user profile view
SECURITY_CHANGEABLE=False

# DEBUG Option
#MAIL_SUPPRESS_SEND=True
#MAIL_DEBUG=True
#DEBUG = True
#FLASK_DEBUG = True

# Flask Debug ToolBar Profiler
DEBUG_TB_PROFILER_ENABLED=False
DEBUG_TB_INTERCEPT_REDIRECTS=False

# For invenio-communities module
THEME_MATHJAX_CDN = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML'

# Storage Setting for Amazon S3
FILES_REST_STORAGE_FACTORY = 'invenio_s3.s3fs_storage_factory'
S3_ACCCESS_KEY_ID = None
S3_SECRET_ACCESS_KEY = None
S3_SEND_FILE_DIRECTLY = True
S3_ENDPOINT_URL = None

# Location type list
FILES_REST_LOCATION_TYPE_LIST = [('s3', 'S3 Path'), ('s3_vh', 'S3 Virtural Host')]


# Jupyterhub Config
WEKO_JUPYTERHUB_ENABLE = False
WEKO_JUPYTERHUB_URL = 'https://service.jupyterhub.rdm.nii.ac.jp/user-redirect/weko3nb/import/weko3sbd.ir.rcos.nii.ac.jp'
WEKO_RECORDS_UI_DISPLAY_ONLINE_ANALYSIS_FLG = False

# Theme
# =====
#: Default site name.
THEME_SITENAME = 'WEKO3'
#: Default site URL (used only when not in a context - e.g. like celery tasks).
THEME_SITEURL = '{{ environ('INVENIO_WEB_PROTOCOL') }}://{{ environ('INVENIO_WEB_HOST_NAME') }}'

# Location of list license's icons.
WEKO_RECORDS_UI_LICENSE_ICON_LOCATION = "/static/images/default/"

# Location of list license's icons for PDF.
WEKO_RECORDS_UI_LICENSE_ICON_PDF_LOCATION = "/static/images/creative_commons/"

# FLAG For Delete Activity log
DELETE_ACTIVITY_LOG_ENABLE = True

# List licenses
WEKO_RECORDS_UI_LICENSE_DICT = [
    {
        'name': _('write your own license'),
        'value': 'license_free',
    },
    # version 0
    {
        'name': _('Creative Commons CC0 1.0 Universal Public Domain Designation'),
        'code' : 'CC0',
        'href_ja': 'https://creativecommons.org/publicdomain/zero/1.0/deed.ja',
        'href_default': 'https://creativecommons.org/publicdomain/zero/1.0/',
        'value': 'license_12',
        'src': '88x31(0).png',
        'src_pdf': 'cc-0.png',
        'href_pdf': 'https://creativecommons.org/publicdomain/zero/1.0/'
                    'deed.ja',
        'txt': 'This work is licensed under a Public Domain Dedication '
               'International License.'
    },
    # version 3.0
    {
        'name': _('Creative Commons Attribution 3.0 Unported (CC BY 3.0)'),
        'code' : 'CC BY 3.0',
        'href_ja': 'https://creativecommons.org/licenses/by/3.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by/3.0/',
        'value': 'license_6',
        'src': '88x31(1).png',
        'src_pdf': 'by.png',
        'href_pdf': 'http://creativecommons.org/licenses/by/3.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               ' 3.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)'),
        'code' : 'CC BY-SA 3.0',
        'href_ja': 'https://creativecommons.org/licenses/by-sa/3.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-sa/3.0/',
        'value': 'license_7',
        'src': '88x31(2).png',
        'src_pdf': 'by-sa.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-sa/3.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-ShareAlike 3.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NoDerivs 3.0 Unported (CC BY-ND 3.0)'),
        'code' : 'CC BY-ND 3.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nd/3.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nd/3.0/',
        'value': 'license_8',
        'src': '88x31(3).png',
        'src_pdf': 'by-nd.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nd/3.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NoDerivatives 3.0 International License.'

    },
    {
        'name': _('Creative Commons Attribution-NonCommercial 3.0 Unported (CC BY-NC 3.0)'),
        'code' : 'CC BY-NC 3.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nc/3.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nc/3.0/',
        'value': 'license_9',
        'src': '88x31(4).png',
        'src_pdf': 'by-nc.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nc/3.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NonCommercial 3.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported (CC BY-NC-SA 3.0)'),
        'code' : 'CC BY-NC-SA 3.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nc-sa/3.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nc-sa/3.0/',
        'value': 'license_10',
        'src': '88x31(5).png',
        'src_pdf': 'by-nc-sa.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nc-sa/3.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NonCommercial-ShareAlike 3.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported (CC BY-NC-ND 3.0)'),
        'code' : 'CC BY-NC-ND 3.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nc-nd/3.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nc-nd/3.0/',
        'value': 'license_11',
        'src': '88x31(6).png',
        'src_pdf': 'by-nc-nd.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nc-nd/3.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NonCommercial-ShareAlike 3.0 International License.'
    },
    # version 4.0
    {
        'name': _('Creative Commons Attribution 4.0 International (CC BY 4.0)'),
        'code' : 'CC BY 4.0',
        'href_ja': 'https://creativecommons.org/licenses/by/4.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by/4.0/',
        'value': 'license_0',
        'src': '88x31(1).png',
        'src_pdf': 'by.png',
        'href_pdf': 'http://creativecommons.org/licenses/by/4.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               ' 4.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)'),
        'code' : 'CC BY-SA 4.0',
        'href_ja': 'https://creativecommons.org/licenses/by-sa/4.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-sa/4.0/',
        'value': 'license_1',
        'src': '88x31(2).png',
        'src_pdf': 'by-sa.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-sa/4.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-ShareAlike 4.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NoDerivatives 4.0 International (CC BY-ND 4.0)'),
        'code' : 'CC BY-ND 4.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nd/4.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nd/4.0/',
        'value': 'license_2',
        'src': '88x31(3).png',
        'src_pdf': 'by-nd.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nd/4.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NoDerivatives 4.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)'),
        'code' : 'CC BY-NC 4.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nc/4.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nc/4.0/',
        'value': 'license_3',
        'src': '88x31(4).png',
        'src_pdf': 'by-nc.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nc/4.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NonCommercial 4.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)'),
        'code' : 'CC BY-NC-SA 4.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nc-sa/4.0/',
        'value': 'license_4',
        'src': '88x31(5).png',
        'src_pdf': 'by-nc-sa.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nc-sa/4.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NonCommercial-ShareAlike 4.0 International License.'
    },
    {
        'name': _('Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)'),
        'code' : 'CC BY-NC-ND 4.0',
        'href_ja': 'https://creativecommons.org/licenses/by-nc-nd/4.0/deed.ja',
        'href_default': 'https://creativecommons.org/licenses/by-nc-nd/4.0/',
        'value': 'license_5',
        'src': '88x31(6).png',
        'src_pdf': 'by-nc-nd.png',
        'href_pdf': 'http://creativecommons.org/licenses/by-nc-nd/4.0/',
        'txt': 'This work is licensed under a Creative Commons Attribution'
               '-NonCommercial-ShareAlike 4.0 International License.'
    },
]

# Shibboleth
# =====
# 1. WEKO login only[default]:
#  WEKO_ACCOUNTS_SHIB_LOGIN_ENABLED = False
# 2. WEKO login + Shibbolth(Idp):
#  WEKO_ACCOUNTS_SHIB_LOGIN_ENABLED = True
#  WEKO_ACCOUNTS_SHIB_IDP_LOGIN_ENABLED = True
# 3. WEKO login + Shibbolth(DS):
#  WEKO_ACCOUNTS_SHIB_LOGIN_ENABLED = True
#  WEKO_ACCOUNTS_SHIB_IDP_LOGIN_ENABLED = False
# 4. Shibbolth(Idp):
#  WEKO_ACCOUNTS_SHIB_LOGIN_ENABLED = True
#  WEKO_ACCOUNTS_SHIB_IDP_LOGIN_ENABLED = True
#  WEKO_ACCOUNTS_SHIB_INST_LOGIN_DIRECTLY_ENABLED = True
# 5. Shibbolth(DS)
#  WEKO_ACCOUNTS_SHIB_LOGIN_ENABLED = True
#  WEKO_ACCOUNTS_SHIB_IDP_LOGIN_ENABLED = False
#  WEKO_ACCOUNTS_SHIB_DP_LOGIN_DIRECTLY_ENABLED= True

# Enable Shibboleth user login system
WEKO_ACCOUNTS_SHIB_LOGIN_ENABLED = False

# Login proxy URL
WEKO_ACCOUNTS_SHIB_IDP_LOGIN_URL = '{}secure/login.py'

# IdP attribute map
WEKO_ACCOUNTS_SSO_ATTRIBUTE_MAP = {
    'SHIB_ATTR_EPPN': (False, 'shib_eppn'),
    'SHIB_ATTR_ROLE_AUTHORITY_NAME': (False, 'shib_role_authority_name'),
    'SHIB_ATTR_SITE_USER_WITHIN_IP_RANGE_FLAG': (False, 'shib_ip_range_flag'),
    'SHIB_ATTR_MAIL': (False, 'shib_mail'),
    'SHIB_ATTR_USER_NAME': (False, 'shib_user_name'),
}

# Shibboleth login pattern. (True: Shibboleth IdP(JairoCloud), False: Embedded DS-Pattern 1)
WEKO_ACCOUNTS_SHIB_IDP_LOGIN_ENABLED = False

# Enable Shibboleth login system using DP selection only.
WEKO_ACCOUNTS_SHIB_DP_LOGIN_DIRECTLY_ENABLED = False

# Enable Shibboleth login system using IdP selection only
WEKO_ACCOUNTS_SHIB_INST_LOGIN_DIRECTLY_ENABLED = False

# List of APIs for ammendment metadata.
# This list should be ordered by priority.
WEKO_ITEMS_AUTOFILL_TO_BE_USED = ['JaLC API', '医中誌 Web API', 'CrossRef', 'DataCite', 'CiNii Research', 'Original']
# Choose from the following:
#     - JaLC API
#     - 医中誌 Web API
#     - CrossRef
#     - DataCite
#     - CiNii Research
#     - Original  -->  Original metadata, not from API.

# Enable upgrade version
WEKO_ITEMTYPES_UI_UPGRADE_VERSION_ENABLED = False

# Enable CNRI handle integration
WEKO_HANDLE_ALLOW_REGISTER_CNRI = {{ environ('WEKO_HANDLE_ALLOW_REGISTER_CRNI') }}

# Enable Notification
WEKO_NOTIFICATIONS = True

# Notification Inbox Address
WEKO_NOTIFICATIONS_INBOX_ADDRESS = 'http://inbox:8080'

# Notification Inbox Endpoint
WEKO_NOTIFICATIONS_INBOX_ENDPOINT = '/inbox'

# Push Notification Template
WEKO_NOTIFICATIONS_PUSH_TEMPLATE_PATH = '/code/modules/weko-notifications/weko_notifications/templates/weko_notifications/push.json'

# Required Digest header in SWORD API
WEKO_SWORDSERVER_DIGEST_VERIFICATION = False

# Disable self sign up function
SECURITY_REGISTERABLE = False

# Google traking code
THEME_TRACKINGCODE_TEMPLATE = 'weko_theme/trackingcode.html'
GOOGLE_TRACKING_ID_SYSTEM = '{{ environ('GOOGLE_TRACKING_ID_SYSTEM') }}'
GOOGLE_TRACKING_ID_USER = '{{ environ('GOOGLE_TRACKING_ID_USER') }}'

ADDTHIS_USER_ID = '{{ environ('ADDTHIS_USER_ID') }}'

STATS_EXCLUDED_ADDRS = []
# ==== Email template configurations
#: Path of folder contains mail templates
WEKO_WORKFLOW_MAIL_TEMPLATE_FOLDER_PATH = '/code/modules/weko-workflow/weko_workflow/templates/weko_workflow/email_templates'
#: Template access the URL
WEKO_WORKFLOW_ACCESS_ACTIVITY_URL = "1"
#: Template access the URL
WEKO_WORKFLOW_USAGE_REPORT_ACTIVITY_URL = "6"
# Mail template for Done Approval
WEKO_WORKFLOW_APPROVE_DONE = 'email_pattern_approval_done.tpl'
# Mail template for Rejected Approval
WEKO_WORKFLOW_APPROVE_REJECTED = 'email_pattern_approval_rejected.tpl'
# Mail template for Requested Approval
WEKO_WORKFLOW_REQUEST_APPROVAL = 'email_pattern_request_approval.tpl'
# Mail template for Request for register Data Usage Report
WEKO_WORKFLOW_REQUEST_FOR_REGISTER_USAGE_REPORT = '7'

# Default Language for Notification emails.
WEKO_WORKFLOW_MAIL_DEFAULT_LANGUAGE = 'en'

# Usage report WF name
WEKO_WORKFLOW_USAGE_REPORT_WORKFLOW_NAME = '利用報告/Data Usage Report'

# WEKO-RecordsUI
# =============
# Secret key
WEKO_RECORDS_UI_SECRET_KEY = '{{ environ('WEKO_RECORDS_UI_SECRET_KEY') }}'
SECRET_KEY = '{{ environ('SECRET_KEY') }}'
WTF_CSRF_SECRET_KEY = '{{ environ('WTF_CSRF_SECRET_KEY') }}'



# supperess warrning
if os.environ.get('FLASK_ENV') == 'production':
  warnings.simplefilter('ignore', DeprecationWarning)
  warnings.simplefilter('ignore', UserWarning)
  # supperess urllib3 warrning
  import urllib3
  urllib3.disable_warnings(
      urllib3.exceptions.InsecureRequestWarning
  )

#from invenio_logging.sentry6 import Sentry6
LOGGING_SENTRY_CELERY=False
#LOGGING_SENTRY_CLASS=Sentry6
#SENTRY_DSN="https://8f653ea905204d8f8e86439671e4b460@o244231.ingest.sentry.io/5765981"

DEBUG_TB_ENABLED = False

INVENIO_RESYNC_SAVE_PATH='{{ environ('TMPDIR') }}/resync'

WEKO_AUTHORS_EXPORT_TMP_DIR='authors_export'
WEKO_AUTHORS_IMPORT_TMP_DIR='authors_import'


# Robot txt
WEKO_SITEMAP__ROBOT_TXT = """
User-agent: Bingbot
Crawl-delay: 30

User-agent: *
Disallow: /admin/
Disallow: /api/
Disallow: /oai
Disallow: /search
Disallow: /items/ranking
Disallow: /items/export
Disallow: /login/
Disallow: /shibauthorizer
Disallow: /Shibboleth.sso
Disallow: /shibboleth-sp
Disallow: /secure/
Disallow: /weko/shib
Disallow: /ping
Disallow: /static
Disallow: /data
Disallow: /records/*/export/json
Disallow: /records/*/export/bibtex
"""

ENABLE_COOKIE_CONSENT = True
""" Enable klaro cookie consent function """

# FLAG For Delete Activity log
DELETE_ACTIVITY_LOG_ENABLE = True

# Optional settings for JDCat
# The following settings should be used in JDCat.
# 1.WEKO_SEARCH_UI_FACET_LANG_DISP_FLG = True
# 2.DISPLAY_LOGIN = False
# 3.WEKO_RECORDS_UI_LANG_DISP_FLG = False (Identical to default setting)
# 4.WEKO_THEME_FETCH_SEARCH_FLG = True (Identical to default setting)

# Enable the Facet Search specified language display feature.
WEKO_SEARCH_UI_FACET_LANG_DISP_FLG = False
# Enable the login item display function.
DISPLAY_LOGIN = True
# Enable the specified language display function on the item detail screen.
WEKO_RECORDS_UI_LANG_DISP_FLG = False
# Enable DOM differential update functionality when searching.
WEKO_THEME_FETCH_SEARCH_FLG = True

# The API URL to obtain a token for OA. example: "<OA URL>/oauth/token"
WEKO_RECORDS_UI_OA_GET_TOKEN_URL = ""
# The API URL to update the status of an OA article. example: "<OA URL>/api/articles/{}/status"
WEKO_RECORDS_UI_OA_UPDATE_STATUS_URL = ""
# The API URL to get OA policies. example: "<OA URL>/api/archive_policies"
WEKO_RECORDS_UI_OA_GET_OA_POLICIES_URL = ""

# For JGSS

# 1. User-Profile
#---Default form column
WEKO_USERPROFILES_FORM_COLUMN = ["username", "fullname", "timezone", "language", "email","email_repeat", "university", "department","position", "otherPosition", "phoneNumber","instituteName", "institutePosition","instituteName2", "institutePosition2","instituteName3", "institutePosition3","instituteName4", "institutePosition4","instituteName5", "institutePosition5" ]
#---Role mapping
WEKO_USERPROFILES_ROLE_MAPPING_ENABLED = True
WEKO_USERPROFILES_ROLE_MAPPING = {"WEKO_USERPROFILES_POSITION_LIST_GENERAL": "WEKO_USERPROFILES_GENERAL_ROLE","WEKO_USERPROFILES_POSITION_LIST_GRADUATED_STUDENT": "WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE","WEKO_USERPROFILES_POSITION_LIST_STUDENT": "WEKO_USERPROFILES_STUDENT_ROLE" }

#3. WEKO-WorkFlow
#--- Work flow activity columns
WEKO_WORKFLOW_COLUMNS = ['updated','application_date','approved_date','activity_id','title','flows_name','action_name','StatusDesc','email']
#--- Enable auto send mail action
WEKO_WORKFLOW_ENABLE_AUTO_SEND_EMAIL = True
#--- Enable showing index selection for item type
WEKO_WORKFLOW_ENABLE_AUTO_SET_INDEX_FOR_ITEM_TYPE = True
#--- Enable showing term of use
WEKO_WORKFLOW_ENABLE_SHOWING_TERM_OF_USE = True

from weko_user_profiles.config import WEKO_USERPROFILES_GENERAL_ROLE, WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE, WEKO_USERPROFILES_STUDENT_ROLE 

#4. WEKO-ItemUI
#: Item type Usage Application
WEKO_ITEMS_UI_USAGE_APPLICATION = "利用申請"
#: Item type Two stages Usage Application (Educational Purpose)
WEKO_ITEMS_UI_USAGE_APPLICATION_EDUCATIONAL_PURPOSE = "利用申請（授業利用可）"
#: Item type Two stages Usage Application (Two stages, Educational Purpose)
WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_EDUCATIONAL_PURPOSE = "二段階利用申請（授業利用可）"
#: Item type Two stages Usage Application
WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES = "二段階利用申請"
#: Item type Two stages Usage Application (Guarantor)
WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_GUARANTOR = "二段階利用申請（保証人）"
#: Item type Two stages Usage Application (Advisor)
WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_ADVISOR = "二段階利用申請（指導教員）"
#: Item type Three stages Usage Application
WEKO_ITEMS_UI_USAGE_APPLICATION_THREE_STAGES = "三段階利用申請"
#--- Item type Data Registration
WEKO_ITEMS_UI_DATA_REGISTRATION = "JGSSデータ登録"
#--- Item type Application For Life
WEKO_ITEMS_UI_APPLICATION_FOR_LIFE = "ライフ利用申請"
#--- Item type Application For Accumulation
WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION = "累積利用申請"
#--- Item type Application For Combinational Analysis
WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS = "組合せ分析利用申請"
#--- Item type Application For Perfectures
WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES = "都道府県利用申請"
#--- Item type Application For Location Information
WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION = "地点情報利用申請"
#--- Item type Output Report
WEKO_ITEMS_UI_OUTPUT_REPORT = "成果物登録"
#--- Item type Usage Report
WEKO_ITEMS_UI_USAGE_REPORT = "利用報告-Data Usage Report"
#--- List of Application item types
WEKO_ITEMS_UI_APPLICATION_ITEM_TYPES_LIST = [WEKO_ITEMS_UI_USAGE_APPLICATION_EDUCATIONAL_PURPOSE,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_EDUCATIONAL_PURPOSE,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_GUARANTOR,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_ADVISOR,WEKO_ITEMS_UI_USAGE_APPLICATION_THREE_STAGES,WEKO_ITEMS_UI_USAGE_APPLICATION,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES,WEKO_ITEMS_UI_APPLICATION_FOR_LIFE,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION,WEKO_ITEMS_UI_USAGE_REPORT,WEKO_ITEMS_UI_OUTPUT_REPORT]
#--- List of Usage Application item types
WEKO_ITEMS_UI_USAGE_APPLICATION_ITEM_TYPES_LIST = [WEKO_ITEMS_UI_USAGE_APPLICATION_EDUCATIONAL_PURPOSE,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_EDUCATIONAL_PURPOSE,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_GUARANTOR,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES_ADVISOR,WEKO_ITEMS_UI_USAGE_APPLICATION_THREE_STAGES,WEKO_ITEMS_UI_USAGE_APPLICATION,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES,WEKO_ITEMS_UI_APPLICATION_FOR_LIFE,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION]
#--- List of item types to show term and condition
WEKO_ITEMS_UI_SHOW_TERM_AND_CONDITION = [WEKO_ITEMS_UI_APPLICATION_FOR_LIFE,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION]
#--- Action endpoint keys
WEKO_ITEMS_UI_ACTION_ENDPOINT_KEY = {"approval1": "approval_advisor","approval2": "approval_guarantor",}
#--- Approval mail subitem keys
WEKO_ITEMS_UI_APPROVAL_MAIL_SUBITEM_KEY = {"approval1": "subitem_advisor_mail_address","approval2": "subitem_guarantor_mail_address" }
#--- Group of Approval1 keys
WEKO_ITEMS_UI_GROUP_APPROVAL_1 = {'title_advisor','subitem_advisor_fullname','subitem_advisor_university/institution','subitem_advisor_position','subitem_advisor_mail_address','subitem_advisor_phone_number'}
#--- Group of Approval2 keys
WEKO_ITEMS_UI_GROUP_APPROVAL_2 = {'title_guarantor','subitem_guarantor_fullname','subitem_guarantor_university/institution','subitem_guarantor_position','subitem_guarantor_mail_address','subitem_guarantor_phone_number'}
#--- Group of terms keys
WEKO_ITEMS_UI_GROUP_TERMS = {'subitem_terms_and_conditions','subitem_agreement_to_terms_and_conditions'}
#--- Group of research keys
WEKO_ITEMS_UI_GROUP_RESEARCH = {'subitem_research_title','subitem_research_plan'}
#--- Group of other keys
WEKO_ITEMS_UI_GROUP_OTHER = {'subitem_user_name','subitem_mail_address','subitem_university/institution','subitem_affiliated_division/department','subitem_position','subitem_phone_number','subitem_affiliated_institution_name','subitem_affiliated_institution_position'}
#--- Group of location keys
WEKO_ITEMS_UI_GROUP_LOCATION = {'subitem_usage_location'}
#--- Group of all keys
WEKO_ITEMS_UI_GROUP_ALL = set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_1) +list(WEKO_ITEMS_UI_GROUP_APPROVAL_2) + list(WEKO_ITEMS_UI_GROUP_RESEARCH) +list(WEKO_ITEMS_UI_GROUP_OTHER) + list(WEKO_ITEMS_UI_GROUP_RESEARCH) +list(WEKO_ITEMS_UI_GROUP_LOCATION))
#--- Roles for Application For Life item type
WEKO_ITEMS_UI_APPLICATION_FOR_LIFE_ROLES = {WEKO_USERPROFILES_GENERAL_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_1) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2)),WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2)),WEKO_USERPROFILES_STUDENT_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2))}
#--- Roles for Application For Accumulation item type
WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION_ROLES = {WEKO_USERPROFILES_GENERAL_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_1) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2)),WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2)),WEKO_USERPROFILES_STUDENT_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2))}
#--- Roles for Application For Combinational Analysis item type
WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS_ROLES = {WEKO_USERPROFILES_GENERAL_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_1) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2)),WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2)),WEKO_USERPROFILES_STUDENT_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_2))}
#--- Roles for Application For Perfectures item type
WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES_ROLES = {WEKO_USERPROFILES_GENERAL_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_1)),WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE: WEKO_ITEMS_UI_GROUP_TERMS,WEKO_USERPROFILES_STUDENT_ROLE: WEKO_ITEMS_UI_GROUP_ALL}
#--- Roles for Application For Location item type
WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION_ROLES = {WEKO_USERPROFILES_GENERAL_ROLE: set(list(WEKO_ITEMS_UI_GROUP_TERMS) + list(WEKO_ITEMS_UI_GROUP_APPROVAL_1)),WEKO_USERPROFILES_GRADUATED_STUDENT_ROLE: WEKO_ITEMS_UI_GROUP_TERMS,WEKO_USERPROFILES_STUDENT_ROLE: WEKO_ITEMS_UI_GROUP_ALL}
#--- List of Usage Application item types and its roles
WEKO_ITEMS_UI_USAGE_APPLICATION_ITEM_TYPE = {WEKO_ITEMS_UI_APPLICATION_FOR_LIFE:WEKO_ITEMS_UI_APPLICATION_FOR_LIFE_ROLES,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION:WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION_ROLES,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS:WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS_ROLES,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES:WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES_ROLES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION:WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION_ROLES,}
#--- List of item types don't need to show agreement page
WEKO_ITEMS_UI_LIST_ITEM_TYPE_NOT_NEED_AGREE = []
#--- Perfecture and Location Information item types
WEKO_ITEMS_UI_PERFECTURE_LOCATION_ITEM_TYPES = [WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION]
#--- List of item types to hide autofill metadata
WEKO_ITEMS_UI_HIDE_AUTO_FILL_METADATA = [WEKO_ITEMS_UI_APPLICATION_FOR_LIFE,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION,WEKO_ITEMS_UI_USAGE_APPLICATION,WEKO_ITEMS_UI_USAGE_APPLICATION_TWO_STAGES,WEKO_ITEMS_UI_USAGE_REPORT]
#--- List of item types to hide publication date
WEKO_ITEMS_UI_HIDE_PUBLICATION_DATE = ["デフォルトアイテムタイプ（フル）",WEKO_ITEMS_UI_DATA_REGISTRATION,WEKO_ITEMS_UI_APPLICATION_FOR_LIFE,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION,WEKO_ITEMS_UI_USAGE_REPORT,WEKO_ITEMS_UI_OUTPUT_REPORT]
#--- Title for Usage Application item type
WEKO_ITEMS_UI_USAGE_APPLICATION_TITLE = {"en": "Usage Application","ja": "利用申請",}
#--- Title for Usage Report item type
WEKO_ITEMS_UI_USAGE_REPORT_TITLE = {"en": "Usage Report","ja": "利用報告",}
# --- Title for Output Registration item type
WEKO_ITEMS_UI_OUTPUT_REGISTRATION_TITLE = {"en": "Output Registration","ja": "成果物",}
# --- Title key for Usage Application item type
WEKO_ITEMS_UI_USAGE_APPLICATION_TITLE_KEY = "UsageApplication"
# --- Title key for Usage Report item type
WEKO_ITEMS_UI_USAGE_REPORT_TITLE_KEY = "UsageReport"
# --- Title key for Output Registration item type
WEKO_ITEMS_UI_OUTPUT_REGISTRATION_TITLE_KEY = "OutputRegistration"
# --- Auto fill title's setting
WEKO_ITEMS_UI_AUTO_FILL_TITLE_SETTING = {WEKO_ITEMS_UI_USAGE_APPLICATION_TITLE_KEY: [WEKO_ITEMS_UI_APPLICATION_FOR_LIFE,WEKO_ITEMS_UI_APPLICATION_FOR_ACCUMULATION,WEKO_ITEMS_UI_APPLICATION_FOR_COMBINATIONAL_ANALYSIS,WEKO_ITEMS_UI_APPLICATION_FOR_PERFECTURES,WEKO_ITEMS_UI_APPLICATION_FOR_LOCATION_INFORMATION,],WEKO_ITEMS_UI_USAGE_REPORT_TITLE_KEY: [WEKO_ITEMS_UI_USAGE_REPORT],WEKO_ITEMS_UI_OUTPUT_REGISTRATION_TITLE_KEY: [WEKO_ITEMS_UI_OUTPUT_REPORT]}
# --- Auto fill title's keys and values
WEKO_ITEMS_UI_AUTO_FILL_TITLE = {WEKO_ITEMS_UI_USAGE_APPLICATION_TITLE_KEY: WEKO_ITEMS_UI_USAGE_APPLICATION_TITLE,WEKO_ITEMS_UI_USAGE_REPORT_TITLE_KEY: WEKO_ITEMS_UI_USAGE_REPORT_TITLE,WEKO_ITEMS_UI_OUTPUT_REGISTRATION_TITLE_KEY: WEKO_ITEMS_UI_OUTPUT_REGISTRATION_TITLE,}
# --- shared user can be setted by [role_id] list
WEKO_ITEMS_UI_SHARED_USER_ROLE_ID_LIST = [1,2,3]
