import json

from flask import url_for
from invenio_accounts.testutils import login_user_via_session as login

# class ItemTypeMetaDataView(BaseView):
#     def index(self, item_type_id=0):
#     def render_itemtype(self, item_type_id=0):
#     def delete_itemtype(self, item_type_id=0):
#     def register(self, item_type_id=0):
#     def restore_itemtype(self, item_type_id=0):
#     def get_property_list(self, property_id=0):
#     def export(self,item_type_id):
#     def item_type_import(self):
# class ItemTypeSchema(SQLAlchemyAutoSchema):
#     class Meta:
# class ItemTypeNameSchema(SQLAlchemyAutoSchema):
#     class Meta:
# class ItemTypeMappingSchema(SQLAlchemyAutoSchema):
#     class Meta:
# class ItemTypePropertySchema(SQLAlchemyAutoSchema):
#     class Meta:
# class ItemTypePropertiesView(BaseView):
#     def index(self, property_id=0):
#     def get_property(self, property_id=0):
#     def custom_property_new(self, property_id=0):
# class ItemTypeMappingView(BaseView):
#     def index(self, ItemTypeID=0):
 # current_app.logger.error("lists:{}".format(lists))
            # # lists:[<ItemTypeName 1>, <ItemTypeName 2>, <ItemTypeName 3>, <ItemTypeName 4>, <ItemTypeName 5>, <ItemTypeName 6>, <ItemTypeName 7>, <ItemTypeName 8>, <ItemTypeName 9>, <ItemTypeName 10>, <ItemTypeName 11>, <ItemTypeName 12>, <ItemTypeName 13>, <ItemTypeName 14>, <ItemTypeName 15>, <ItemTypeName 16>, <ItemTypeName 22>, <ItemTypeName 32>, <ItemTypeName 33>, <ItemTypeName 34>, <ItemTypeName 35>, <ItemTypeName 36>, <ItemTypeName 37>, <ItemTypeName 38>, <ItemTypeName 39>, <ItemTypeName 40>, <ItemTypeName 41>, <ItemTypeName 31001>, <ItemTypeName 31002>, <ItemTypeName 31003>, <ItemTypeName 40001>]

            # current_app.logger.error("item_type_mapping:{}".format(item_type_mapping['item_1663165432106']))
            # # current_app.logger.error("mapping_name:{}".format(mapping_name))
            # # current_app.logger.error("itemtype_prop:{}".format(itemtype_prop))
            # # item_type_mapping:{'pubdate': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'date': ''}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'date': ''}}, 'system_file': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'system_file': {'URI': {'@value': 'subitem_systemfile_filename_uri', '@attributes': {'label': 'subitem_systemfile_filename_label', 'objectType': 'subitem_systemfile_filename_type'}}, 'date': {'@value': 'subitem_systemfile_datetime_date', '@attributes': {'dateType': 'subitem_systemfile_datetime_type'}}, 'extent': {'@value': 'subitem_systemfile_size'}, 'version': {'@value': 'subitem_systemfile_version'}, 'mimeType': {'@value': 'subitem_systemfile_mimetype'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'system_file': {'URI': {'@value': 'subitem_systemfile_filename_uri', '@attributes': {'label': 'subitem_systemfile_filename_label', 'objectType': 'subitem_systemfile_filename_type'}}, 'date': {'@value': 'subitem_systemfile_datetime_date', '@attributes': {'dateType': 'subitem_systemfile_datetime_type'}}, 'extent': {'@value': 'subitem_systemfile_size'}, 'version': {'@value': 'subitem_systemfile_version'}, 'mimeType': {'@value': 'subitem_systemfile_mimetype'}}}}, 'item_1551264308487': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'title': {'@value': 'subitem_1551255647225', '@attributes': {'xml:lang': 'subitem_1551255648112'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'title': {'@value': 'subitem_1551255647225', '@attributes': {'xml:lang': 'subitem_1551255648112'}}}}, 'item_1551264326373': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'alternative': {'@value': 'subitem_1551255720400', '@attributes': {'xml:lang': 'subitem_1551255721061'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'alternative': {'@value': 'subitem_1551255720400', '@attributes': {'xml:lang': 'subitem_1551255721061'}}}}, 'item_1551264340087': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'creator': {'givenName': {'@value': 'subitem_1551255991424.subitem_1551256006332', '@attributes': {'xml:lang': 'subitem_1551255991424.subitem_1551256007414'}}, 'familyName': {'@value': 'subitem_1551255929209.subitem_1551255938498', '@attributes': {'xml:lang': 'subitem_1551255929209.subitem_1551255964991'}}, 'affiliation': {'nameIdentifier': {'@value': 'subitem_1551256087090.subitem_1551256089084.subitem_1551256097891', '@attributes': {'nameIdentifierURI': 'subitem_1551256087090.subitem_1551256089084.subitem_1551256147368', 'nameIdentifierScheme': 'subitem_1551256087090.subitem_1551256089084.subitem_1551256145018'}}, 'affiliationName': {'@value': 'subitem_1551256087090.subitem_1551256229037.subitem_1551256259183', '@attributes': {'xml:lang': 'subitem_1551256087090.subitem_1551256229037.subitem_1551256259899'}}}, 'creatorName': {'@value': 'subitem_1551255898956.subitem_1551255905565', '@attributes': {'xml:lang': 'subitem_1551255898956.subitem_1551255907416'}}, 'nameIdentifier': {'@value': 'subitem_1551255789000.subitem_1551255793478', '@attributes': {'nameIdentifierURI': 'subitem_1551255789000.subitem_1551255795486', 'nameIdentifierScheme': 'subitem_1551255789000.subitem_1551255794292'}}, 'creatorAlternative': {'@value': 'subitem_1551256025394.subitem_1551256035730', '@attributes': {'xml:lang': 'subitem_1551256025394.subitem_1551256055588'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'creator': {'givenName': {'@value': 'subitem_1551255991424.subitem_1551256006332', '@attributes': {'xml:lang': 'subitem_1551255991424.subitem_1551256007414'}}, 'familyName': {'@value': 'subitem_1551255929209.subitem_1551255938498', '@attributes': {'xml:lang': 'subitem_1551255929209.subitem_1551255964991'}}, 'affiliation': {'nameIdentifier': {'@value': 'subitem_1551256087090.subitem_1551256089084.subitem_1551256097891', '@attributes': {'nameIdentifierURI': 'subitem_1551256087090.subitem_1551256089084.subitem_1551256147368', 'nameIdentifierScheme': 'subitem_1551256087090.subitem_1551256089084.subitem_1551256145018'}}, 'affiliationName': {'@value': 'subitem_1551256087090.subitem_1551256229037.subitem_1551256259183', '@attributes': {'xml:lang': 'subitem_1551256087090.subitem_1551256229037.subitem_1551256259899'}}}, 'creatorName': {'@value': 'subitem_1551255898956.subitem_1551255905565', '@attributes': {'xml:lang': 'subitem_1551255898956.subitem_1551255907416'}}, 'nameIdentifier': {'@value': 'subitem_1551255789000.subitem_1551255793478', '@attributes': {'nameIdentifierURI': 'subitem_1551255789000.subitem_1551255795486', 'nameIdentifierScheme': 'subitem_1551255789000.subitem_1551255794292'}}, 'creatorAlternative': {'@value': 'subitem_1551256025394.subitem_1551256035730', '@attributes': {'xml:lang': 'subitem_1551256025394.subitem_1551256055588'}}}}}, 'item_1551264418667': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'contributor': {'givenName': {'@value': 'subitem_1551257339190.subitem_1551257342360', '@attributes': {'xml:lang': 'subitem_1551257339190.subitem_1551257343979'}}, 'familyName': {'@value': 'subitem_1551257272214.subitem_1551257314588', '@attributes': {'xml:lang': 'subitem_1551257272214.subitem_1551257316910'}}, '@attributes': {'contributorType': 'subitem_1551257036415'}, 'affiliation': {'nameIdentifier': {'@value': 'subitem_1551257419251.subitem_1551257421633.subitem_1551261472867', '@attributes': {'nameIdentifierURI': 'subitem_1551257419251.subitem_1551257421633.subitem_1551261493409', 'nameIdentifierScheme': 'subitem_1551257419251.subitem_1551257421633.subitem_1551261485670'}}, 'affiliationName': {'@value': 'subitem_1551257419251.subitem_1551261534334.subitem_1551261542403', '@attributes': {'xml:lang': 'subitem_1551257419251.subitem_1551261534334.subitem_1551261546333'}}}, 'nameIdentifier': {'@value': 'subitem_1551257150927.subitem_1551257152742', '@attributes': {'nameIdentifierURI': 'subitem_1551257150927.subitem_1551257228080', 'nameIdentifierScheme': 'subitem_1551257150927.subitem_1551257172531'}}, 'contributorName': {'@value': 'subitem_1551257245638.subitem_1551257276108', '@attributes': {'xml:lang': 'subitem_1551257245638.subitem_1551257279831'}}, 'contributorAlternative': {'@value': 'subitem_1551257372442.subitem_1551257374288', '@attributes': {'xml:lang': 'subitem_1551257372442.subitem_1551257375939'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'contributor': {'givenName': {'@value': 'subitem_1551257339190.subitem_1551257342360', '@attributes': {'xml:lang': 'subitem_1551257339190.subitem_1551257343979'}}, 'familyName': {'@value': 'subitem_1551257272214.subitem_1551257314588', '@attributes': {'xml:lang': 'subitem_1551257272214.subitem_1551257316910'}}, '@attributes': {'contributorType': 'subitem_1551257036415'}, 'affiliation': {'nameIdentifier': {'@value': 'subitem_1551257419251.subitem_1551257421633.subitem_1551261472867', '@attributes': {'nameIdentifierURI': 'subitem_1551257419251.subitem_1551257421633.subitem_1551261493409', 'nameIdentifierScheme': 'subitem_1551257419251.subitem_1551257421633.subitem_1551261485670'}}, 'affiliationName': {'@value': 'subitem_1551257419251.subitem_1551261534334.subitem_1551261542403', '@attributes': {'xml:lang': 'subitem_1551257419251.subitem_1551261534334.subitem_1551261546333'}}}, 'nameIdentifier': {'@value': 'subitem_1551257150927.subitem_1551257152742', '@attributes': {'nameIdentifierURI': 'subitem_1551257150927.subitem_1551257228080', 'nameIdentifierScheme': 'subitem_1551257150927.subitem_1551257172531'}}, 'contributorName': {'@value': 'subitem_1551257245638.subitem_1551257276108', '@attributes': {'xml:lang': 'subitem_1551257245638.subitem_1551257279831'}}, 'contributorAlternative': {'@value': 'subitem_1551257372442.subitem_1551257374288', '@attributes': {'xml:lang': 'subitem_1551257372442.subitem_1551257375939'}}}}}, 'item_1551264447183': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'accessRights': {'@value': 'subitem_1551257553743', '@attributes': {'rdf:resource': 'subitem_1551257578398'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'accessRights': {'@value': 'subitem_1551257553743', '@attributes': {'rdf:resource': 'subitem_1551257578398'}}}}, 'item_1551264605515': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'apc': {'@value': 'subitem_1551257776901'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'apc': {'@value': 'subitem_1551257776901'}}}, 'item_1551264629907': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'rights': {'@value': 'subitem_1551257025236.subitem_1551257043769', '@attributes': {'xml:lang': 'subitem_1551257025236.subitem_1551257047388', 'rdf:resource': 'subitem_1551257030435'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'rights': {'@value': 'subitem_1551257025236.subitem_1551257043769', '@attributes': {'xml:lang': 'subitem_1551257025236.subitem_1551257047388', 'rdf:resource': 'subitem_1551257030435'}}}}, 'item_1551264767789': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'rightsHolder': {'nameIdentifier': {'@value': 'subitem_1551257143244.subitem_1551257145912', '@attributes': {'nameIdentifierURI': 'subitem_1551257143244.subitem_1551257232980', 'nameIdentifierScheme': 'subitem_1551257143244.subitem_1551257156244'}}, 'rightsHolderName': {'@value': 'subitem_1551257249371.subitem_1551257255641', '@attributes': {'xml:lang': 'subitem_1551257249371.subitem_1551257257683'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'rightsHolder': {'nameIdentifier': {'@value': 'subitem_1551257143244.subitem_1551257145912', '@attributes': {'nameIdentifierURI': 'subitem_1551257143244.subitem_1551257232980', 'nameIdentifierScheme': 'subitem_1551257143244.subitem_1551257156244'}}, 'rightsHolderName': {'@value': 'subitem_1551257249371.subitem_1551257255641', '@attributes': {'xml:lang': 'subitem_1551257249371.subitem_1551257257683'}}}}}, 'item_1551264822581': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'subject': {'@value': 'subitem_1551257315453', '@attributes': {'xml:lang': 'subitem_1551257323812', 'subjectURI': 'subitem_1551257343002', 'subjectScheme': 'subitem_1551257329877'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'subject': {'@value': 'subitem_1551257315453', '@attributes': {'xml:lang': 'subitem_1551257323812', 'subjectURI': 'subitem_1551257343002', 'subjectScheme': 'subitem_1551257329877'}}}}, 'item_1551264846237': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'description': {'@value': 'subitem_1551255577890', '@attributes': {'xml:lang': 'subitem_1551255592625', 'descriptionType': 'subitem_1551255637472'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'description': {'@value': 'subitem_1551255577890', '@attributes': {'xml:lang': 'subitem_1551255592625', 'descriptionType': 'subitem_1551255637472'}}}}, 'item_1551264917614': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'publisher': {'@value': 'subitem_1551255702686', '@attributes': {'xml:lang': 'subitem_1551255710277'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'publisher': {'@value': 'subitem_1551255702686', '@attributes': {'xml:lang': 'subitem_1551255710277'}}}}, 'item_1551264974654': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'date': {'@value': 'subitem_1551255753471', '@attributes': {'dateType': 'subitem_1551255775519'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'date': {'@value': 'subitem_1551255753471', '@attributes': {'dateType': 'subitem_1551255775519'}}}}, 'item_1551265002099': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'language': {'@value': 'subitem_1551255818386'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'language': {'@value': 'subitem_1551255818386'}}}, 'item_1551265032053': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'type': {'@value': 'resourcetype', '@attributes': {'rdf:resource': 'resourceuri'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'type': {'@value': 'resourcetype', '@attributes': {'rdf:resource': 'resourceuri'}}}}, 'item_1551265118680': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'versionType': {'@value': 'subitem_1551256025676'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'versionType': {'@value': 'subitem_1551256025676'}}}, 'item_1551265227803': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'relation': {'@attributes': {'relationType': 'subitem_1551256388439'}, 'relatedTitle': {'@value': 'subitem_1551256480278.subitem_1551256498531', '@attributes': {'xml:lang': 'subitem_1551256480278.subitem_1551256513476'}}, 'relatedIdentifier': {'@value': 'subitem_1551256465077.subitem_1551256478339', '@attributes': {'identifierType': 'subitem_1551256465077.subitem_1551256629524'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'relation': {'@attributes': {'relationType': 'subitem_1551256388439'}, 'relatedTitle': {'@value': 'subitem_1551256480278.subitem_1551256498531', '@attributes': {'xml:lang': 'subitem_1551256480278.subitem_1551256513476'}}, 'relatedIdentifier': {'@value': 'subitem_1551256465077.subitem_1551256478339', '@attributes': {'identifierType': 'subitem_1551256465077.subitem_1551256629524'}}}}}, 'item_1551265302120': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'temporal': {'@value': 'subitem_1551256918211', '@attributes': {'xml:lang': 'subitem_1551256920086'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'temporal': {'@value': 'subitem_1551256918211', '@attributes': {'xml:lang': 'subitem_1551256920086'}}}}, 'item_1551265326081': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'geoLocation': {'geoLocationBox': {'eastBoundLongitude': {'@value': 'subitem_1551256822219.subitem_1551256831892'}, 'northBoundLatitude': {'@value': 'subitem_1551256822219.subitem_1551256840435'}, 'southBoundLatitude': {'@value': 'subitem_1551256822219.subitem_1551256834732'}, 'westBoundLongitude': {'@value': 'subitem_1551256822219.subitem_1551256824945'}}, 'geoLocationPlace': {'@value': 'subitem_1551256842196.subitem_1570008213846'}, 'geoLocationPoint': {'pointLatitude': {'@value': 'subitem_1551256778926.subitem_1551256814806'}, 'pointLongitude': {'@value': 'subitem_1551256778926.subitem_1551256783928'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'geoLocation': {'geoLocationBox': {'eastBoundLongitude': {'@value': 'subitem_1551256822219.subitem_1551256831892'}, 'northBoundLatitude': {'@value': 'subitem_1551256822219.subitem_1551256840435'}, 'southBoundLatitude': {'@value': 'subitem_1551256822219.subitem_1551256834732'}, 'westBoundLongitude': {'@value': 'subitem_1551256822219.subitem_1551256824945'}}, 'geoLocationPlace': {'@value': 'subitem_1551256842196.subitem_1570008213846'}, 'geoLocationPoint': {'pointLatitude': {'@value': 'subitem_1551256778926.subitem_1551256814806'}, 'pointLongitude': {'@value': 'subitem_1551256778926.subitem_1551256783928'}}}}}, 'item_1551265385290': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'fundingReference': {'awardTitle': {'@value': 'subitem_1551256688098.subitem_1551256691232', '@attributes': {'xml:lang': 'subitem_1551256688098.subitem_1551256694883'}}, 'funderName': {'@value': 'subitem_1551256462220.subitem_1551256653656', '@attributes': {'xml:lang': 'subitem_1551256462220.subitem_1551256657859'}}, 'awardNumber': {'@value': 'subitem_1551256665850.subitem_1551256671920', '@attributes': {'awardURI': 'subitem_1551256665850.subitem_1551256679403'}}, 'funderIdentifier': {'@value': 'subitem_1551256454316.subitem_1551256614960', '@attributes': {'funderIdentifierType': 'subitem_1551256454316.subitem_1551256619706'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'fundingReference': {'awardTitle': {'@value': 'subitem_1551256688098.subitem_1551256691232', '@attributes': {'xml:lang': 'subitem_1551256688098.subitem_1551256694883'}}, 'funderName': {'@value': 'subitem_1551256462220.subitem_1551256653656', '@attributes': {'xml:lang': 'subitem_1551256462220.subitem_1551256657859'}}, 'awardNumber': {'@value': 'subitem_1551256665850.subitem_1551256671920', '@attributes': {'awardURI': 'subitem_1551256665850.subitem_1551256679403'}}, 'funderIdentifier': {'@value': 'subitem_1551256454316.subitem_1551256614960', '@attributes': {'funderIdentifierType': 'subitem_1551256454316.subitem_1551256619706'}}}}}, 'item_1551265409089': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'sourceIdentifier': {'@value': 'subitem_1551256405981', '@attributes': {'identifierType': 'subitem_1551256409644'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'sourceIdentifier': {'@value': 'subitem_1551256405981', '@attributes': {'identifierType': 'subitem_1551256409644'}}}}, 'item_1551265438256': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'sourceTitle': {'@value': 'subitem_1551256349044', '@attributes': {'xml:lang': 'subitem_1551256350188'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'sourceTitle': {'@value': 'subitem_1551256349044', '@attributes': {'xml:lang': 'subitem_1551256350188'}}}}, 'item_1551265463411': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'volume': {'@value': 'subitem_1551256328147'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'volume': {'@value': 'subitem_1551256328147'}}}, 'item_1551265520160': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'issue': {'@value': 'subitem_1551256294723'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'issue': {'@value': 'subitem_1551256294723'}}}, 'item_1551265553273': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'numPages': {'@value': 'subitem_1551256248092'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'numPages': {'@value': 'subitem_1551256248092'}}}, 'item_1551265569218': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'pageStart': {'@value': 'subitem_1551256198917'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'pageStart': {'@value': 'subitem_1551256198917'}}}, 'item_1551265603279': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'pageEnd': {'@value': 'subitem_1551256185532'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'pageEnd': {'@value': 'subitem_1551256185532'}}}, 'item_1551265738931': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'dissertationNumber': {'@value': 'subitem_1551256171004'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'dissertationNumber': {'@value': 'subitem_1551256171004'}}}, 'item_1551265790591': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'degreeName': {'@value': 'subitem_1551256126428', '@attributes': {'xml:lang': 'subitem_1551256129013'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'degreeName': {'@value': 'subitem_1551256126428', '@attributes': {'xml:lang': 'subitem_1551256129013'}}}}, 'item_1551265811989': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'dateGranted': {'@value': 'subitem_1551256096004'}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'dateGranted': {'@value': 'subitem_1551256096004'}}}, 'item_1551265903092': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'degreeGrantor': {'nameIdentifier': {'@value': 'subitem_1551256015892.subitem_1551256027296', '@attributes': {'nameIdentifierScheme': 'subitem_1551256015892.subitem_1551256029891'}}, 'degreeGrantorName': {'@value': 'subitem_1551256037922.subitem_1551256042287', '@attributes': {'xml:lang': 'subitem_1551256037922.subitem_1551256047619'}}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'degreeGrantor': {'nameIdentifier': {'@value': 'subitem_1551256015892.subitem_1551256027296', '@attributes': {'nameIdentifierScheme': 'subitem_1551256015892.subitem_1551256029891'}}, 'degreeGrantorName': {'@value': 'subitem_1551256037922.subitem_1551256042287', '@attributes': {'xml:lang': 'subitem_1551256037922.subitem_1551256047619'}}}}}, 'item_1570703628633': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'file': {'URI': {'@value': 'subitem_1551259623304.subitem_1551259665538', '@attributes': {'label': 'subitem_1551259623304.subitem_1551259762549', 'objectType': 'subitem_1551259623304.subitem_1551259670908'}}, 'date': {'@value': 'subitem_1551259970148.subitem_1551259972522', '@attributes': {'dateType': 'subitem_1551259970148.subitem_1551259979542'}}, 'extent': {'@value': 'subitem_1551259960284.subitem_1570697598267'}, 'mimeType': {'@value': 'subitem_1551259906932'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'file': {'URI': {'@value': 'subitem_1551259623304.subitem_1551259665538', '@attributes': {'label': 'subitem_1551259623304.subitem_1551259762549', 'objectType': 'subitem_1551259623304.subitem_1551259670908'}}, 'date': {'@value': 'subitem_1551259970148.subitem_1551259972522', '@attributes': {'dateType': 'subitem_1551259970148.subitem_1551259979542'}}, 'extent': {'@value': 'subitem_1551259960284.subitem_1570697598267'}, 'mimeType': {'@value': 'subitem_1551259906932'}}}}, 'item_1581495656289': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'identifierRegistration': {'@value': 'subitem_1551256250276', '@attributes': {'identifierType': 'subitem_1551256259586'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'identifierRegistration': {'@value': 'subitem_1551256250276', '@attributes': {'identifierType': 'subitem_1551256259586'}}}}, 'system_identifier_doi': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'identifier': {'@value': 'subitem_systemidt_identifier', '@attributes': {'identifierType': 'subitem_systemidt_identifier_type'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'identifier': {'@value': 'subitem_systemidt_identifier', '@attributes': {'identifierType': 'subitem_systemidt_identifier_type'}}}}, 'system_identifier_hdl': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'identifier': {'@value': 'subitem_systemidt_identifier', '@attributes': {'identifierType': 'subitem_systemidt_identifier_type'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'identifier': {'@value': 'subitem_systemidt_identifier', '@attributes': {'identifierType': 'subitem_systemidt_identifier_type'}}}}, 'system_identifier_uri': {'lom_mapping': '', 'lido_mapping': '', 'spase_mapping': '', 'jpcoar_mapping': {'identifier': {'@value': 'subitem_systemidt_identifier', '@attributes': {'identifierType': 'subitem_systemidt_identifier_type'}}}, 'junii2_mapping': '', 'oai_dc_mapping': '', 'display_lang_type': '', 'jpcoar_v1_mapping': {'identifier': {'@value': 'subitem_systemidt_identifier', '@attributes': {'identifierType': 'subitem_systemidt_identifier_type'}}}}}
            # # web_1            | [2022-09-15 02:50:30,987] ERROR in admin: mapping_name:jpcoar_mapping
            # # web_1            | [2022-09-15 02:50:30,988] ERROR in admin: itemtype_prop:{'pubdate': {'type': 'string', 'title': 'PubDate', 'format': 'datetime'}, 'system_file': {'type': 'object', 'title': 'File Information', 'format': 'object', 'properties': {'subitem_systemfile_size': {'type': 'string', 'title': 'SYSTEMFILE Size', 'format': 'text'}, 'subitem_systemfile_version': {'type': 'string', 'title': 'SYSTEMFILE Version', 'format': 'text'}, 'subitem_systemfile_datetime': {'type': 'array', 'items': {'type': 'object', 'format': 'object', 'properties': {'subitem_systemfile_datetime_date': {'type': 'string', 'title': 'SYSTEMFILE DateTime Date', 'format': 'datetime'}, 'subitem_systemfile_datetime_type': {'enum': ['Accepted', 'Available', 'Collected', 'Copyrighted', 'Created', 'Issued', 'Submitted', 'Updated', 'Valid'], 'type': 'string', 'title': 'SYSTEMFILE DateTime Type', 'format': 'select'}}}, 'title': 'SYSTEMFILE DateTime', 'format': 'array'}, 'subitem_systemfile_filename': {'type': 'array', 'items': {'type': 'object', 'format': 'object', 'properties': {'subitem_systemfile_filename_uri': {'type': 'string', 'title': 'SYSTEMFILE Filename URI', 'format': 'text'}, 'subitem_systemfile_filename_type': {'enum': ['Abstract', 'Fulltext', 'Summary', 'Thumbnail', 'Other'], 'type': 'string', 'title': 'SYSTEMFILE Filename Type', 'format': 'select'}, 'subitem_systemfile_filename_label': {'type': 'string', 'title': 'SYSTEMFILE Filename Label', 'format': 'text'}}}, 'title': 'SYSTEMFILE Filename', 'format': 'array'}, 'subitem_systemfile_mimetype': {'type': 'string', 'title': 'SYSTEMFILE MimeType', 'format': 'text'}}, 'system_prop': True}, 'item_1663165432106': {'type': 'string', 'title': 'タイトル（日）', 'format': 'text'}, 'item_1663165460557': {'type': 'string', 'title': 'タイトル（ヨミ）', 'format': 'text'}, 'item_1663165461658': {'type': 'string', 'title': 'タイトル（他言語）', 'format': 'text'}, 'item_1663165498545': {'type': 'array', 'items': {'type': 'object', 'properties': {'interim': {'type': 'string'}}}, 'title': '著者（日）', 'maxItems': 9999, 'minItems': 1}, 'item_1663165499456': {'type': 'array', 'items': {'type': 'object', 'properties': {'interim': {'type': 'string'}}}, 'title': '著者（ヨミ）', 'maxItems': 9999, 'minItems': 1}, 'item_1663165500691': {'type': 'array', 'items': {'type': 'object', 'properties': {'interim': {'type': 'string'}}}, 'title': '著者（日）', 'maxItems': 9999, 'minItems': 1}, 'item_1663165613606': {'type': 'array', 'items': {'type': 'object', 'properties': {'interim': {'type': 'string'}}}, 'title': '権利情報', 'maxItems': 9999, 'minItems': 1}, 'item_1663165620772': {'type': 'array', 'items': {'type': 'object', 'properties': {'interim': {'type': 'string'}}}, 'title': '主題', 'maxItems': 9999, 'minItems': 1}, 'item_1663165621987': {'type': 'array', 'items': {'type': 'object', 'properties': {'interim': {'type': 'string'}}}, 'title': '出版者', 'maxItems': 9999, 'minItems': 1}, 'item_1663165623557': {'type': 'array', 'items': {'type': 'object', 'required': ['subitem_1551255818386'], 'properties': {'subitem_1551255818386': {'enum': [None, 'jpn', 'eng', 'fra', 'ita', 'spa', 'zho', 'rus', 'lat', 'msa', 'epo', 'ara', 'ell', 'kor'], 'type': ['null', 'string'], 'title': 'Language', 'format': 'select', 'currentEnum': ['jpn', 'eng', 'fra', 'ita', 'spa', 'zho', 'rus', 'lat', 'msa', 'epo', 'ara', 'ell', 'kor']}}}, 'title': '言語', 'maxItems': 9999, 'minItems': 1}, 'item_1663165658689': {'type': 'object', 'title': '資源タイプ', 'required': ['resourcetype', 'resourceuri'], 'properties': {'resourceuri': {'type': 'string', 'title': '資源タイプ識別子', 'format': 'text', 'title_i18n': {'en': 'Resource Type Identifier', 'ja': '資源タイプ識別子'}, 'title_i18n_temp': {'en': 'Resource Type Identifier', 'ja': '資源タイプ識別子'}}, 'resourcetype': {'enum': [None, 'conference paper', 'data paper', 'departmental bulletin paper', 'editorial', 'journal article', 'newspaper', 'periodical', 'review article', 'software paper', 'article', 'book', 'book part', 'cartographic material', 'map', 'conference object', 'conference proceedings', 'conference poster', 'dataset', 'interview', 'image', 'still image', 'moving image', 'video', 'lecture', 'patent', 'internal report', 'report', 'research report', 'technical report', 'policy report', 'report part', 'working paper', 'data management plan', 'sound', 'thesis', 'bachelor thesis', 'master thesis', 'doctoral thesis', 'interactive resource', 'learning object', 'manuscript', 'musical notation', 'research proposal', 'software', 'technical documentation', 'workflow', 'other'], 'type': ['null', 'string'], 'title': '資源タイプ', 'format': 'select', 'currentEnum': ['conference paper', 'data paper', 'departmental bulletin paper', 'editorial', 'journal article', 'newspaper', 'periodical', 'review article', 'software paper', 'article', 'book', 'book part', 'cartographic material', 'map', 'conference object', 'conference proceedings', 'conference poster', 'dataset', 'interview', 'image', 'still image', 'moving image', 'video', 'lecture', 'patent', 'internal report', 'report', 'research report', 'technical report', 'policy report', 'report part', 'working paper', 'data management plan', 'sound', 'thesis', 'bachelor thesis', 'master thesis', 'doctoral thesis', 'interactive resource', 'learning object', 'manuscript', 'musical notation', 'research proposal', 'software', 'technical documentation', 'workflow', 'other']}}}, 'system_identifier_doi': {'type': 'object', 'title': 'Persistent Identifier(DOI)', 'format': 'object', 'properties': {'subitem_systemidt_identifier': {'type': 'string', 'title': 'SYSTEMIDT Identifier', 'format': 'text'}, 'subitem_systemidt_identifier_type': {'enum': ['DOI', 'HDL', 'URI'], 'type': 'string', 'title': 'SYSTEMIDT Identifier Type', 'format': 'select'}}, 'system_prop': True}, 'system_identifier_hdl': {'type': 'object', 'title': 'Persistent Identifier(HDL)', 'format': 'object', 'properties': {'subitem_systemidt_identifier': {'type': 'string', 'title': 'SYSTEMIDT Identifier', 'format': 'text'}, 'subitem_systemidt_identifier_type': {'enum': ['DOI', 'HDL', 'URI'], 'type': 'string', 'title': 'SYSTEMIDT Identifier Type', 'format': 'select'}}, 'system_prop': True}, 'system_identifier_uri': {'type': 'object', 'title': 'Persistent Identifier(URI)', 'format': 'object', 'properties': {'subitem_systemidt_identifier': {'type': 'string', 'title': 'SYSTEMIDT Identifier', 'format': 'text'}, 'subitem_systemidt_identifier_type': {'enum': ['DOI', 'HDL', 'URI'], 'type': 'string', 'title': 'SYSTEMIDT Identifier Type', 'format': 'select'}}, 'system_prop': True}}
            # # current_app.logger.error("remove_xsd_prefix(jpcoar_lists),:{}".format(remove_xsd_prefix(jpcoar_lists)))
            # # current_app.logger.error("jpcoar_lists:{}".format(jpcoar_lists))
            # # current_app.logger.error("meta_system:{}".format(meta_system))
            # # current_app.logger.error("itemtype_list:{}".format(itemtype_list))
            # # current_app.logger.error("ItemTypeID:{}".format(ItemTypeID))
            # # current_app.logger.error("is_admin:{}".format(is_admin))
            # # current_app.logger.error("session.get('selected_language', 'en'):{}".format(session.get('selected_language', 'en')))
            # # meta_system:{'system_file': {'title': 'File Information', 'option': {'crtf': False, 'hidden': True, 'oneline': False, 'multiple': False, 'required': False, 'showlist': False}, 'input_type': 'cus_131', 'title_i18n': {'en': 'File Information', 'ja': 'ファイル情報'}, 'input_value': ''}, 'system_identifier_doi': {'title': 'Persistent Identifier(DOI)', 'option': {'crtf': False, 'hidden': True, 'oneline': False, 'multiple': False, 'required': False, 'showlist': False}, 'input_type': 'cus_130', 'title_i18n': {'en': 'Persistent Identifier(DOI)', 'ja': '永続識別子（DOI）'}, 'input_value': ''}, 'system_identifier_hdl': {'title': 'Persistent Identifier(HDL)', 'option': {'crtf': False, 'hidden': True, 'oneline': False, 'multiple': False, 'required': False, 'showlist': False}, 'input_type': 'cus_130', 'title_i18n': {'en': 'Persistent Identifier(HDL)', 'ja': '永続識別子（HDL）'}, 'input_value': ''}, 'system_identifier_uri': {'title': 'Persistent Identifier(URI)', 'option': {'crtf': False, 'hidden': True, 'oneline': False, 'multiple': False, 'required': False, 'showlist': False}, 'input_type': 'cus_130', 'title_i18n': {'en': 'Persistent Identifier(URI)', 'ja': '永続識別子（URI）'}, 'input_value': ''}}
            # # ERROR in admin: itemtype_list:[('pubdate', 'PubDate'), ('item_1663165432106', 'Title (ja)'), ('item_1663165460557', 'Title (Yomi)'), ('item_1663165461658', 'Title (Other)'), ('item_1663165498545', 'Author (ja)'), ('item_1663165499456', 'Author (Yomi)'), ('item_1663165500691', 'Author (other)'), ('item_1663165613606', 'Rights'), ('item_1663165620772', 'Subject'), ('item_1663165621987', 'Publisher'), ('item_1663165623557', 'Language'), ('item_1663165658689', 'Resource Type')]
            # # web_1            | [2022-09-15 02:45:23,832] ERROR in admin: ItemTypeID:40001
            # # web_1            | [2022-09-15 02:45:23,832] ERROR in admin: is_admin:True
            # # web_1            | [2022-09-15 02:45:23,833] ERROR in admin: session.get('selected_language', 'en'):en
#     def mapping_register(self):
#     def schema_list(self, SchemaName=None):


# def register(self, item_type_id=0):
# .tox/c1/bin/pytest --cov=weko_itemtypes_ui tests/test_admin.py::test_register -vv -s --cov-branch --cov-report=term --basetemp=.tox/c1/tmp
def test_register(client, users):
    login(client=client, email=users[2]['email'])

    url = url_for('itemtypesregister.register')
    headers = [('Content-Type', 'application/json'), ('Accept', 'application/json')]
    data = dict()
    with open("tests/data/page_global.json", "r") as f:
        data = json.load(f)
        data = json.dumps(data)

    res = client.post(url, headers=headers, data=data)

    res_json = json.loads(res.data.decode('utf-8'))
    res_msg = res_json['msg']
    assert res.status_code == 400
    assert res_msg == 'Failed to register Item type. Can\'t register multiple files for the billing file.'
