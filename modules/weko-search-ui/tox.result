GLOB sdist-make: /code/modules/weko-search-ui/setup.py
c1 inst-nodeps: /code/modules/weko-search-ui/.tox/.tmp/package/1/weko-search-ui-0.1.0.dev20170000.zip
c1 installed: alabaster==0.7.13,alembic==0.9.6,amqp==2.6.1,angular-gettext-babel==0.3,aniso8601==8.0.0,arrow==0.12.1,asn1crypto==0.23.0,attrs==17.4.0,b2handle==1.1.2,Babel==2.5.1,bagit==1.7.0,beautifulsoup4==4.9.3,bibtexparser==1.0.1,billiard==3.6.3.0,binaryornot==0.4.4,bleach==3.1.0,blinker==1.4,boto3==1.7.84,botocore==1.10.84,cachelib==0.1,cachetools==4.2.4,cchardet==2.1.1,celery==4.4.7,certifi==2017.11.5,cffi==1.11.2,chardet==3.0.4,citeproc-py==0.5.1,citeproc-py-styles==0.1.2,click==8.0.4,cookiecutter==1.6.0,counter-robots==2018.6,coverage==6.2,cryptography==2.1.4,datacite==1.0.1,DateTime==5.0,decorator==4.1.2,defusedxml==0.5.0,dictdiffer==0.7.0,dnspython==2.2.1,docutils==0.18.1,dojson==1.3.2,elasticsearch==6.1.1,elasticsearch-dsl==6.4.0,elementpath==1.0.6,email-validator==1.0.5,entrypoints==0.2.3,feedgen==0.7.0,Flask==1.0.4,Flask-Admin==1.5.3,Flask-Alembic==2.0.1,Flask-Assets==0.12,Flask-BabelEx==0.9.4,Flask-Breadcrumbs==0.5.0,Flask-Caching==1.3.3,Flask-CeleryExt==0.3.4,Flask-Collect==1.2.2,Flask-Cors==3.0.3,Flask-DebugToolbar==0.11.0,Flask-IIIF==0.6.1,Flask-KVSession==0.6.2,Flask-Limiter==1.1.0,Flask-Login==0.4.1,Flask-Mail==0.9.1,flask-marshmallow==0.14.0,Flask-Menu==0.6.0,Flask-OAuthlib==0.9.5,Flask-Plugins==1.6.1,Flask-Principal==0.4.0,Flask-RESTful==0.3.8,Flask-Security==3.0.0,flask-shell-ipython==0.4.1,Flask-Sitemap==0.1.0,Flask-SQLAlchemy==2.3.2,flask-talisman==0.4.1,Flask-WTF==0.14.3,-e git+https://github.com/RCOSDP/pyfpdf.git@f9b032148283d535cabc7789858081c80de36fef#egg=fpdf,frozendict==2.3.5,fs==0.5.4,ftfy==4.4.3,future==0.16.0,github3.py==1.1.0,html5lib==1.0.1,idna==2.6,iiif-prezi==0.3.0,imagesize==1.4.1,importlib-metadata==4.8.3,importlib-resources==5.4.0,infinity==1.4,iniconfig==1.1.1,intervals==0.8.0,invenio-access==1.1.0,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_accounts&subdirectory=modules/invenio-accounts,invenio-admin==1.1.2,invenio-app==1.1.0,invenio-assets==1.0.0,invenio-base==1.0.2,invenio-cache==1.0.0,invenio-celery==1.1.3,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_communities&subdirectory=modules/invenio-communities,invenio-config==1.0.0,invenio-csl-rest==1.0.0a1,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_db&subdirectory=modules/invenio-db,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_deposit&subdirectory=modules/invenio-deposit,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_files_rest&subdirectory=modules/invenio-files-rest,invenio-formatter==1.0.0b3,invenio-i18n==1.0.0,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_iiif&subdirectory=modules/invenio-iiif,invenio-indexer==1.0.2,invenio-jsonschemas==1.0.0,invenio-logging==1.0.0b3,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_mail&subdirectory=modules/invenio-mail,invenio-marc21==1.0.0a8,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_oaiharvester&subdirectory=modules/invenio-oaiharvester,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_oaiserver&subdirectory=modules/invenio-oaiserver,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_oauth2server&subdirectory=modules/invenio-oauth2server,invenio-oauthclient==1.0.0,invenio-pidrelations==1.0.0a4,invenio-pidstore==1.0.0,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_previewer&subdirectory=modules/invenio-previewer,invenio-query-parser==0.6.0,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_queues&subdirectory=modules/invenio-queues,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_records&subdirectory=modules/invenio-records,invenio-records-files==1.0.0a10,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_records_rest&subdirectory=modules/invenio-records-rest,invenio-records-ui==1.0.0,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_resourcesyncclient&subdirectory=modules/invenio-resourcesyncclient,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_resourcesyncserver&subdirectory=modules/invenio-resourcesyncserver,invenio-rest==1.1.2,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_s3&subdirectory=modules/invenio-s3,invenio-search==1.1.0,invenio-search-ui==1.0.0a9,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=invenio_stats&subdirectory=modules/invenio-stats,invenio-theme==1.0.0b4,ipaddress==1.0.19,ipython==6.2.1,ipython-genutils==0.2.0,itsdangerous==0.24,jedi==0.11.0,Jinja2==2.10,jinja2-cli==0.6.0,jinja2-time==0.2.0,jmespath==0.10.0,jsmin==2.2.2,jsonpatch==1.21,jsonpath-ng==1.5.2,jsonpointer==1.14,jsonref==0.1,jsonresolver==0.2.1,jsonschema==2.6.0,jupyter-client==5.2.2,jupyter-core==4.4.0,kombu==4.6.10,limits==1.2.1,lxml==4.1.1,Mako==1.0.7,MarkupSafe==1.1.1,marshmallow==2.20.1,marshmallow-sqlalchemy==0.23.1,maxminddb==1.5.2,maxminddb-geolite2==2017.803,mistune==0.8.3,mock==3.0.5,more-itertools==8.10.0,msgpack==0.6.2,nbconvert==5.3.1,nbformat==4.4.0,netaddr==0.8.0,node-semver==0.1.1,numpy==1.16.1,oauthlib==2.1.0,ordereddict==1.1,packaging==21.3,pandocfilters==1.4.2,parso==0.1.0,passlib==1.7.1,pexpect==4.3.0,pickleshare==0.7.4,Pillow==5.4.1,pluggy==0.13.1,ply==3.11,poyo==0.4.1,prompt-toolkit==1.0.15,psycopg2==2.7.3.2,ptyprocess==0.5.2,py==1.11.0,pycparser==2.18,Pygments==2.2.0,PyJWT==1.5.3,PyLD==2.0.3,pyparsing==3.0.9,-e git+https://github.com/RCOSDP/PyPDF2.git@fefc684a3a74aff6f99e5dff24f9b4dd1c95169d#egg=PyPDF2,pyPEG2==2.15.2,pytest==6.1.2,pytest-cov==4.0.0,pytest-mock==3.6.1,python-dateutil==2.6.1,python-editor==1.0.3,python-geoip==1.2,pytz==2017.3,pyzmq==17.0.0,redis==2.10.6,requests==2.18.4,requests-oauthlib==1.1.0,resync==1.0.9,s3fs==0.1.6,s3transfer==0.1.13,Sickle==0.6.4,simplegeneric==0.8.1,simplejson==3.12.0,simplekv==0.11.2,six==1.12.0,snowballstemmer==2.2.0,soupsieve==2.3.2.post1,speaklater==1.3,Sphinx==1.8.4,sphinxcontrib-serializinghtml==1.1.5,sphinxcontrib-websupport==1.2.4,SQLAlchemy==1.2.19,SQLAlchemy-Continuum==1.3.6,SQLAlchemy-Utils==0.35.0,testpath==0.3.1,toml==0.10.2,tomli==1.2.3,tornado==4.5.3,traitlets==4.3.2,typing_extensions==4.1.1,ua-parser==0.7.3,uritemplate==4.1.1,uritools==2.1.0,urllib3==1.22,validators==0.12.0,vine==1.3.0,Wand==0.6.1,wcwidth==0.1.7,webargs==5.5.2,webassets==0.12.1,webencodings==0.5.1,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_accounts&subdirectory=modules/weko-accounts,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_admin&subdirectory=modules/weko-admin,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_authors&subdirectory=modules/weko-authors,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_bulkupdate&subdirectory=modules/weko-bulkupdate,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_deposit&subdirectory=modules/weko-deposit,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_gridlayout&subdirectory=modules/weko-gridlayout,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_groups&subdirectory=modules/weko-groups,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_handle&subdirectory=modules/weko-handle,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_index_tree&subdirectory=modules/weko-index-tree,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_indextree_journal&subdirectory=modules/weko-indextree-journal,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_items_autofill&subdirectory=modules/weko-items-autofill,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_items_ui&subdirectory=modules/weko-items-ui,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_itemtypes_ui&subdirectory=modules/weko-itemtypes-ui,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_logging&subdirectory=modules/weko-logging,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_records&subdirectory=modules/weko-records,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_records_ui&subdirectory=modules/weko-records-ui,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_redis&subdirectory=modules/weko-redis,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_schema_ui&subdirectory=modules/weko-schema-ui,weko-search-ui @ file:///code/modules/weko-search-ui/.tox/.tmp/package/1/weko-search-ui-0.1.0.dev20170000.zip,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_sitemap&subdirectory=modules/weko-sitemap,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_theme&subdirectory=modules/weko-theme,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_user_profiles&subdirectory=modules/weko-user-profiles,-e git+https://github.com/RCOSDP/weko.git@76430b4c7fb0c43f0e7c651235e280a7adbcc333#egg=weko_workflow&subdirectory=modules/weko-workflow,Werkzeug==0.15.2,whichcraft==0.4.1,WTForms==2.1,WTForms-Alchemy==0.16.5,WTForms-Components==0.10.3,xmlschema==0.9.30,xmltodict==0.12.0,zipp==3.6.0,zope.interface==5.5.2
c1 run-test-pre: PYTHONHASHSEED='2384791163'
c1 run-test: commands[0] | pytest --cov=weko_search_ui tests -v -s -vv --cov-branch --cov-report=term --cov-report=xml --cov-config=tox.ini --basetemp=/code/modules/weko-search-ui/.tox/c1/tmp
============================= test session starts ==============================
platform linux -- Python 3.6.15, pytest-6.1.2, py-1.11.0, pluggy-0.13.1 -- /code/modules/weko-search-ui/.tox/c1/bin/python
cachedir: .tox/c1/.pytest_cache
rootdir: /code/modules/weko-search-ui
plugins: cov-4.0.0, celery-4.4.7, mock-3.6.1
collecting ... collected 368 items

tests/test_admin.py::test_ItemManagementBulkDelete_index /admin/items/bulk/delete/
PASSED
tests/test_admin.py::test_ItemManagementBulkDelete_check /admin/items/bulk/delete/check
PASSED
tests/test_admin.py::TestItemManagementCustomSort::test_index_acl /admin/items/custom_sort/
PASSED
tests/test_admin.py::test_ItemManagementCustomSort_save_sort PASSED
tests/test_admin.py::TestItemManagementBulkSearch::test_index_acl /admin/items/search/
FAILED
tests/test_admin.py::test_ItemManagementBulkSearch_is_visible PASSED
tests/test_admin.py::TestItemImportView::test_index_acl /admin/items/import/
PASSED
tests/test_admin.py::test_ItemImportView_check /
FAILED
tests/test_admin.py::test_ItemImportView_get_check_status /
PASSED
tests/test_admin.py::test_ItemImportView_download_check /
PASSED
tests/test_admin.py::test_ItemImportView_import_items /
PASSED
tests/test_admin.py::test_ItemImportView_get_status /
PASSED
tests/test_admin.py::test_ItemImportView_download_import /
PASSED
tests/test_admin.py::test_ItemImportView_get_disclaimer_text /
PASSED
tests/test_admin.py::test_ItemImportView_export_template /admin/items/import/export_template
PASSED
tests/test_admin.py::test_ItemBulkExport_index /
PASSED
tests/test_admin.py::test_export_template /admin/items/import/export_template
PASSED
tests/test_api.py::test_get_results_setting PASSED
tests/test_api.py::test_get_default_sort PASSED
tests/test_api.py::test_get_sort_key PASSED
tests/test_api.py::test_get_custom_sort PASSED
tests/test_api.py::test_get_nested_sorting PASSED
tests/test_api.py::test_get_search_detail_keyword PASSED
tests/test_api.py::test_get_childinfo PASSED
tests/test_api.py::test_escape_str PASSED
tests/test_bundles.py::test_catalog PASSED
tests/test_ext.py::test_WekoSearchUI PASSED
tests/test_ext.py::test_WekoSearchUI_2 PASSED
tests/test_ext.py::test_WekoSearchREST PASSED
tests/test_links.py::test_default_links_factory PASSED
tests/test_query.py::test_get_item_type_aggs /
PASSED
tests/test_query.py::test_get_permission_filter /
FAILED
tests/test_query.py::test_default_search_factory PASSED
tests/test_query.py::test_item_path_search_factory PASSED
tests/test_query.py::test_check_permission_user PASSED
tests/test_query.py::test_opensearch_factory PASSED
tests/test_query.py::test_item_search_factory PASSED
tests/test_query.py::test_feedback_email_search_factory PASSED
tests/test_query.py::test_function_issue35902 FAILED
tests/test_rest.py::test_IndexSearchResource_get_Exception /index/
FAILED
tests/test_rest.py::test_IndexSearchResource_get_MaxResultWindowRESTError /index/
PASSED
tests/test_rest.py::test_create_blueprint PASSED
tests/test_rest.py::test_IndexSearchResource_get /
PASSED
tests/test_rest.py::test_get_heading_info PASSED
tests/test_tasks.py::test_check_import_items_task Traceback (most recent call last):
  File "/code/modules/weko-search-ui/weko_search_ui/utils.py", line 531, in check_import_items
    with zipfile.ZipFile(file) as z:
  File "/usr/local/lib/python3.6/zipfile.py", line 1113, in __init__
    self.fp = io.open(file, filemode)
FileNotFoundError: [Errno 2] No such file or directory: '/test/test/test.txt'
PASSED
tests/test_tasks.py::test_import_item PASSED
tests/test_tasks.py::test_remove_temp_dir_task PASSED
tests/test_tasks.py::test_export_all_task PASSED
tests/test_tasks.py::test_delete_exported_task PASSED
tests/test_tasks.py::test_is_import_running PASSED
tests/test_tasks.py::test_check_celery_is_run PASSED
tests/test_utils.py::test_DefaultOrderDict_deepcopy PASSED
tests/test_utils.py::test_get_tree_items PASSED
tests/test_utils.py::test_delete_records FAILED
tests/test_utils.py::test_get_journal_info /
PASSED
tests/test_utils.py::test_get_feedback_mail_list FAILED
tests/test_utils.py::test_check_permission PASSED
tests/test_utils.py::test_get_content_workflow PASSED
tests/test_utils.py::test_set_nested_item PASSED
tests/test_utils.py::test_define_default_dict PASSED
tests/test_utils.py::test_defaultify PASSED
tests/test_utils.py::test_handle_generate_key_path PASSED
tests/test_utils.py::test_parse_to_json_form PASSED
tests/test_utils.py::test_check_import_items Traceback (most recent call last):
  File "/code/modules/weko-search-ui/weko_search_ui/utils.py", line 545, in check_import_items
    list_csv = list(filter(lambda x: x.endswith(".csv"), os.listdir(data_path)))
FileNotFoundError: [Errno 2] No such file or directory: '/tmp/weko_import_20230325051947/data'
PASSED
tests/test_utils.py::test_unpackage_import_file FAILED
tests/test_utils.py::test_getEncode /code/modules/weko-search-ui/tests/data/csv/eucjp_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/iso2022jp_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/sjis_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/utf8_cr_items.csv
/code/modules/weko-search-ui/tests/data/csv/utf8_crlf_items.csv
/code/modules/weko-search-ui/tests/data/csv/utf8_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/utf8bom_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/utf16be_bom_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/utf16le_bom_lf_items.csv
/code/modules/weko-search-ui/tests/data/csv/big5.txt
PASSED
tests/test_utils.py::test_read_stats_file PASSED
tests/test_utils.py::test_handle_convert_validate_msg_to_jp PASSED
tests/test_utils.py::test_handle_validate_item_import PASSED
tests/test_utils.py::test_represents_int PASSED
tests/test_utils.py::test_get_item_type PASSED
tests/test_utils.py::test_handle_check_exist_record PASSED
tests/test_utils.py::test_make_file_by_line PASSED
tests/test_utils.py::test_make_stats_file PASSED
tests/test_utils.py::test_create_deposit PASSED
tests/test_utils.py::test_clean_thumbnail_file PASSED
tests/test_utils.py::test_up_load_file PASSED
tests/test_utils.py::test_get_file_name PASSED
tests/test_utils.py::test_register_item_metadata FAILED
tests/test_utils.py::test_update_publish_status PASSED
tests/test_utils.py::test_handle_workflow PASSED
tests/test_utils.py::test_create_work_flow PASSED
tests/test_utils.py::test_create_flow_define PASSED
tests/test_utils.py::test_send_item_created_event_to_es /
FAILED
tests/test_utils.py::test_import_items_to_system FAILED
tests/test_utils.py::test_handle_item_title PASSED
tests/test_utils.py::test_handle_check_and_prepare_publish_status PASSED
tests/test_utils.py::test_handle_check_and_prepare_index_tree FAILED
tests/test_utils.py::test_handle_check_and_prepare_feedback_mail FAILED
tests/test_utils.py::test_handle_set_change_identifier_flag PASSED
tests/test_utils.py::test_handle_check_cnri FAILED
tests/test_utils.py::test_handle_check_cnri_2 PASSED
tests/test_utils.py::test_handle_check_doi_indexes PASSED
tests/test_utils.py::test_handle_check_doi_ra PASSED
tests/test_utils.py::test_handle_check_doi FAILED
tests/test_utils.py::test_register_item_handle PASSED
tests/test_utils.py::test_prepare_doi_setting PASSED
tests/test_utils.py::test_get_doi_prefix[JaLC] PASSED
tests/test_utils.py::test_get_doi_prefix[Crossref] PASSED
tests/test_utils.py::test_get_doi_prefix[DataCite] PASSED
tests/test_utils.py::test_get_doi_prefix[NDL JaLC] PASSED
tests/test_utils.py::test_get_doi_link PASSED
tests/test_utils.py::test_prepare_doi_link PASSED
tests/test_utils.py::test_register_item_doi PASSED
tests/test_utils.py::test_register_item_update_publish_status PASSED
tests/test_utils.py::test_handle_doi_required_check PASSED
tests/test_utils.py::test_handle_check_date PASSED
tests/test_utils.py::test_handle_check_id PASSED
tests/test_utils.py::test_get_data_in_deep_dict PASSED
tests/test_utils.py::test_validation_file_open_date PASSED
tests/test_utils.py::test_validation_date_property PASSED
tests/test_utils.py::test_get_list_key_of_iso_date PASSED
tests/test_utils.py::test_get_current_language PASSED
tests/test_utils.py::test_get_change_identifier_mode_content PASSED
tests/test_utils.py::test_get_root_item_option PASSED
tests/test_utils.py::test_get_sub_item_option PASSED
tests/test_utils.py::test_check_sub_item_is_system PASSED
tests/test_utils.py::test_get_lifetime PASSED
tests/test_utils.py::test_get_system_data_uri PASSED
tests/test_utils.py::test_handle_fill_system_item FAILED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi0-after_doi0-warnings0-errors0-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi1-after_doi1-warnings1-errors1-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi2-after_doi2-warnings2-errors2-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi3-after_doi3-warnings3-errors3-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi4-after_doi4-warnings4-errors4-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi5-after_doi5-warnings5-errors5-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi6-after_doi6-warnings6-errors6-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi7-after_doi7-warnings7-errors7-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi8-after_doi8-warnings8-errors8-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi9-after_doi9-warnings9-errors9-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi10-after_doi10-warnings10-errors10-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi11-after_doi11-warnings11-errors11-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi12-after_doi12-warnings12-errors12-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi13-after_doi13-warnings13-errors13-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi14-after_doi14-warnings14-errors14-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi15-after_doi15-warnings15-errors15-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi16-after_doi16-warnings16-errors16-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi17-after_doi17-warnings17-errors17-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi18-after_doi18-warnings18-errors18-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi19-after_doi19-warnings19-errors19-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi20-after_doi20-warnings20-errors20-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi21-after_doi21-warnings21-errors21-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi22-after_doi22-warnings22-errors22-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi23-after_doi23-warnings23-errors23-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi24-after_doi24-warnings24-errors24-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi25-after_doi25-warnings25-errors25-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi26-after_doi26-warnings26-errors26-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi27-after_doi27-warnings27-errors27-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi28-after_doi28-warnings28-errors28-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi29-after_doi29-warnings29-errors29-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi30-after_doi30-warnings30-errors30-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi31-after_doi31-warnings31-errors31-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi32-after_doi32-warnings32-errors32-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[1-before_doi33-after_doi33-warnings33-errors33-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi34-after_doi34-warnings34-errors34-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi35-after_doi35-warnings35-errors35-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi36-after_doi36-warnings36-errors36-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi37-after_doi37-warnings37-errors37-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi38-after_doi38-warnings38-errors38-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi39-after_doi39-warnings39-errors39-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi40-after_doi40-warnings40-errors40-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi41-after_doi41-warnings41-errors41-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi42-after_doi42-warnings42-errors42-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi43-after_doi43-warnings43-errors43-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi44-after_doi44-warnings44-errors44-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi45-after_doi45-warnings45-errors45-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi46-after_doi46-warnings46-errors46-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi47-after_doi47-warnings47-errors47-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi48-after_doi48-warnings48-errors48-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi49-after_doi49-warnings49-errors49-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi50-after_doi50-warnings50-errors50-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi51-after_doi51-warnings51-errors51-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi52-after_doi52-warnings52-errors52-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi53-after_doi53-warnings53-errors53-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi54-after_doi54-warnings54-errors54-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi55-after_doi55-warnings55-errors55-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi56-after_doi56-warnings56-errors56-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi57-after_doi57-warnings57-errors57-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi58-after_doi58-warnings58-errors58-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi59-after_doi59-warnings59-errors59-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi60-after_doi60-warnings60-errors60-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi61-after_doi61-warnings61-errors61-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi62-after_doi62-warnings62-errors62-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi63-after_doi63-warnings63-errors63-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi64-after_doi64-warnings64-errors64-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi65-after_doi65-warnings65-errors65-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi66-after_doi66-warnings66-errors66-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[2-before_doi67-after_doi67-warnings67-errors67-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi68-after_doi68-warnings68-errors68-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi69-after_doi69-warnings69-errors69-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi70-after_doi70-warnings70-errors70-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi71-after_doi71-warnings71-errors71-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi72-after_doi72-warnings72-errors72-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi73-after_doi73-warnings73-errors73-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi74-after_doi74-warnings74-errors74-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi75-after_doi75-warnings75-errors75-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi76-after_doi76-warnings76-errors76-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi77-after_doi77-warnings77-errors77-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi78-after_doi78-warnings78-errors78-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi79-after_doi79-warnings79-errors79-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi80-after_doi80-warnings80-errors80-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi81-after_doi81-warnings81-errors81-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi82-after_doi82-warnings82-errors82-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi83-after_doi83-warnings83-errors83-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi84-after_doi84-warnings84-errors84-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi85-after_doi85-warnings85-errors85-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi86-after_doi86-warnings86-errors86-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi87-after_doi87-warnings87-errors87-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi88-after_doi88-warnings88-errors88-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi89-after_doi89-warnings89-errors89-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi90-after_doi90-warnings90-errors90-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi91-after_doi91-warnings91-errors91-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi92-after_doi92-warnings92-errors92-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi93-after_doi93-warnings93-errors93-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi94-after_doi94-warnings94-errors94-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi95-after_doi95-warnings95-errors95-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi96-after_doi96-warnings96-errors96-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi97-after_doi97-warnings97-errors97-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi98-after_doi98-warnings98-errors98-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi99-after_doi99-warnings99-errors99-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi100-after_doi100-warnings100-errors100-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[3-before_doi101-after_doi101-warnings101-errors101-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi102-after_doi102-warnings102-errors102-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi103-after_doi103-warnings103-errors103-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi104-after_doi104-warnings104-errors104-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi105-after_doi105-warnings105-errors105-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi106-after_doi106-warnings106-errors106-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi107-after_doi107-warnings107-errors107-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi108-after_doi108-warnings108-errors108-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi109-after_doi109-warnings109-errors109-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi110-after_doi110-warnings110-errors110-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi111-after_doi111-warnings111-errors111-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi112-after_doi112-warnings112-errors112-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi113-after_doi113-warnings113-errors113-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi114-after_doi114-warnings114-errors114-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi115-after_doi115-warnings115-errors115-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi116-after_doi116-warnings116-errors116-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi117-after_doi117-warnings117-errors117-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi118-after_doi118-warnings118-errors118-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi119-after_doi119-warnings119-errors119-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi120-after_doi120-warnings120-errors120-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi121-after_doi121-warnings121-errors121-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi122-after_doi122-warnings122-errors122-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi123-after_doi123-warnings123-errors123-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi124-after_doi124-warnings124-errors124-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi125-after_doi125-warnings125-errors125-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi126-after_doi126-warnings126-errors126-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi127-after_doi127-warnings127-errors127-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi128-after_doi128-warnings128-errors128-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi129-after_doi129-warnings129-errors129-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi130-after_doi130-warnings130-errors130-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi131-after_doi131-warnings131-errors131-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi132-after_doi132-warnings132-errors132-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi133-after_doi133-warnings133-errors133-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi134-after_doi134-warnings134-errors134-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[4-before_doi135-after_doi135-warnings135-errors135-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi136-after_doi136-warnings136-errors136-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi137-after_doi137-warnings137-errors137-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi138-after_doi138-warnings138-errors138-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi139-after_doi139-warnings139-errors139-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi140-after_doi140-warnings140-errors140-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi141-after_doi141-warnings141-errors141-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi142-after_doi142-warnings142-errors142-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi143-after_doi143-warnings143-errors143-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi144-after_doi144-warnings144-errors144-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi145-after_doi145-warnings145-errors145-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi146-after_doi146-warnings146-errors146-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi147-after_doi147-warnings147-errors147-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi148-after_doi148-warnings148-errors148-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi149-after_doi149-warnings149-errors149-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi150-after_doi150-warnings150-errors150-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi151-after_doi151-warnings151-errors151-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi152-after_doi152-warnings152-errors152-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi153-after_doi153-warnings153-errors153-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi154-after_doi154-warnings154-errors154-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi155-after_doi155-warnings155-errors155-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi156-after_doi156-warnings156-errors156-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi157-after_doi157-warnings157-errors157-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi158-after_doi158-warnings158-errors158-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi159-after_doi159-warnings159-errors159-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi160-after_doi160-warnings160-errors160-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi161-after_doi161-warnings161-errors161-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi162-after_doi162-warnings162-errors162-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi163-after_doi163-warnings163-errors163-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi164-after_doi164-warnings164-errors164-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi165-after_doi165-warnings165-errors165-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi166-after_doi166-warnings166-errors166-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi167-after_doi167-warnings167-errors167-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi168-after_doi168-warnings168-errors168-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi169-after_doi169-warnings169-errors169-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi170-after_doi170-warnings170-errors170-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi171-after_doi171-warnings171-errors171-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi172-after_doi172-warnings172-errors172-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi173-after_doi173-warnings173-errors173-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi174-after_doi174-warnings174-errors174-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi175-after_doi175-warnings175-errors175-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi176-after_doi176-warnings176-errors176-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi177-after_doi177-warnings177-errors177-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi178-after_doi178-warnings178-errors178-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi179-after_doi179-warnings179-errors179-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi180-after_doi180-warnings180-errors180-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi181-after_doi181-warnings181-errors181-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[5-before_doi182-after_doi182-warnings182-errors182-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi183-after_doi183-warnings183-errors183-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi184-after_doi184-warnings184-errors184-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi185-after_doi185-warnings185-errors185-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi186-after_doi186-warnings186-errors186-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi187-after_doi187-warnings187-errors187-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi188-after_doi188-warnings188-errors188-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi189-after_doi189-warnings189-errors189-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi190-after_doi190-warnings190-errors190-False] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi191-after_doi191-warnings191-errors191-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi192-after_doi192-warnings192-errors192-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi193-after_doi193-warnings193-errors193-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi194-after_doi194-warnings194-errors194-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi195-after_doi195-warnings195-errors195-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi196-after_doi196-warnings196-errors196-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi197-after_doi197-warnings197-errors197-True] PASSED
tests/test_utils.py::test_handle_fill_system_item3[None-before_doi198-after_doi198-warnings198-errors198-True] PASSED
tests/test_utils.py::test_get_thumbnail_key PASSED
tests/test_utils.py::test_handle_check_thumbnail_file_type PASSED
tests/test_utils.py::test_handle_check_metadata_not_existed PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items0-.metadata.item_1657196790737[0]-text[0]-form0-ids0-names0] PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items1-.metadata.item_1657204077414[0]-list[0]-form1-ids1-names1] PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items2-.metadata.item_1657204070640-list-form2-ids2-names2] PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items3-.metadata.item_1657204026946-check-form3-ids3-names3] PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items4-.metadata.item_1657204036771[0]-check[0]-form4-ids4-names4] PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items5-.metadata.item_1657204043063-rad-form5-ids5-names5] PASSED
tests/test_utils.py::test_handle_get_all_sub_id_and_name[items6-.metadata.item_1657204049138[0]-rd[0]-form6-ids6-names6] PASSED
tests/test_utils.py::test_handle_get_all_id_in_item_type PASSED
tests/test_utils.py::test_handle_check_consistence_with_mapping PASSED
tests/test_utils.py::test_handle_check_duplication_item_id PASSED
tests/test_utils.py::test_export_all FAILED
tests/test_utils.py::test_delete_exported PASSED
tests/test_utils.py::test_get_export_status PASSED
tests/test_utils.py::test_handle_check_item_is_locked PASSED
tests/test_utils.py::test_handle_remove_es_metadata PASSED
tests/test_utils.py::test_check_index_access_permissions /
PASSED
tests/test_utils.py::test_handle_check_file_metadata PASSED
tests/test_utils.py::test_handle_check_file_path PASSED
tests/test_utils.py::test_handle_check_file_content PASSED
tests/test_utils.py::test_handle_check_thumbnail PASSED
tests/test_utils.py::test_get_key_by_property PASSED
tests/test_utils.py::test_get_data_by_property PASSED
tests/test_utils.py::test_get_filenames_from_metadata PASSED
tests/test_utils.py::test_handle_check_filename_consistence PASSED
tests/test_utils.py::test_function_issue34520[1-before_doi0-after_doi0-warnings0-errors0-True] PASSED
tests/test_utils.py::test_function_issue34535 FAILED
tests/test_utils.py::test_function_issue34958 PASSED
tests/test_utils.py::test_handle_fill_system_item_issue34520[1-before_doi0-after_doi0-warnings0-errors0-True] PASSED
tests/test_utils.py::test_handle_fill_system_item_issue34520[1000-before_doi1-after_doi1-warnings1-errors1-True] PASSED
tests/test_utils.py::test_handle_check_exist_record_issue35315[1-http://TEST_SERVER/records/1-warnings0-errors0-keep] PASSED
tests/test_utils.py::test_handle_check_exist_record_issue35315[1000-http://TEST_SERVER/records/1-warnings1-errors1-None] PASSED
tests/test_utils.py::test_handle_check_exist_record_issue35315[1000-http://TEST_SERVER/records/1000-warnings2-errors2-None] PASSED
tests/test_utils.py::test_handle_check_exist_record_issue35315[None-None-warnings3-errors3-new] PASSED
tests/test_views.py::test_search PASSED
tests/test_views.py::test_search_acl_guest /search/index
PASSED
tests/test_views.py::test_search_acl[3-200] /search/index
FAILED
tests/test_views.py::test_opensearch_description PASSED
tests/test_views.py::test_opensearch_description_acl_guest /opensearch/description.xml
PASSED
tests/test_views.py::test_journal_detail PASSED
tests/test_views.py::test_search_feedback_mail_list FAILED
tests/test_views.py::test_get_child_list PASSED
tests/test_views.py::test_get_path_name_dict PASSED
tests/test_views.py::test_gettitlefacet /facet-search/get-title-and-order
PASSED
tests/test_views.py::test_get_last_item_id PASSED
tests/test_weko_search_ui.py::test_version PASSED
tests/test_weko_search_ui.py::test_init PASSED

=================================== FAILURES ===================================
_________________ TestItemManagementBulkSearch.test_index_acl __________________

self = <tests.test_admin.TestItemManagementBulkSearch object at 0x7fde843611d0>
client = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
db_records2 = [(<PersistentIdentifier depid:1 / rec:10ac9154-924c-4df7-9104-ebf81cb7dd20 (R)>, <PersistentIdentifier recid:1 / rec:1...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]

    def test_index_acl(self,client, users, db_records2):
        user = users[3]['obj']
        assert user.roles[0].name=='System Administrator'
    
        url = url_for("items/search.index", _external=True)
        with patch("flask.templating._render", return_value=""):
            res = client.get(url)
            assert res.status == '302 FOUND'
    
        with patch("flask_login.utils._get_user", return_value=user):
            with patch("flask.templating._render", return_value=""):
                res = client.get(url)
>               assert res.status == '200 OK'
E               AssertionError: assert '500 INTERNAL SERVER ERROR' == '200 OK'
E                 - 200 OK
E                 + 500 INTERNAL SERVER ERROR

tests/test_admin.py:113: AssertionError
__________________________ test_ItemImportView_check ___________________________

request = <Request 'http://TEST_SERVER/' [POST]>, csrf_header = 'X-CSRFToken'

    def validate_csrf_header(request,csrf_header="X-CSRFToken"):
        """Validate CSRF header
    
        Args:
            csrf_header (str, optional): CSRF Token Header. Defaults to "X-CSRFToken".
    
        Raises:
            CSRFError: _description_
            CSRFError: _description_
            CSRFError: _description_
        """
        try:
            csrf_token = request.headers.get(csrf_header)
>           validate_csrf(csrf_token)

../weko-admin/weko_admin/api.py:229: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

data = None, secret_key = 'SECRET_KEY', time_limit = 3600, token_key = None

    def validate_csrf(data, secret_key=None, time_limit=None, token_key=None):
        """Check if the given data is a valid CSRF token. This compares the given
        signed token to the one stored in the session.
    
        :param data: The signed CSRF token to be checked.
        :param secret_key: Used to securely sign the token. Default is
            ``WTF_CSRF_SECRET_KEY`` or ``SECRET_KEY``.
        :param time_limit: Number of seconds that the token is valid. Default is
            ``WTF_CSRF_TIME_LIMIT`` or 3600 seconds (60 minutes).
        :param token_key: Key where token is stored in session for comparision.
            Default is ``WTF_CSRF_FIELD_NAME`` or ``'csrf_token'``.
    
        :raises ValidationError: Contains the reason that validation failed.
    
        .. versionchanged:: 0.14
            Raises ``ValidationError`` with a specific error message rather than
            returning ``True`` or ``False``.
        """
    
        secret_key = _get_config(
            secret_key, 'WTF_CSRF_SECRET_KEY', current_app.secret_key,
            message='A secret key is required to use CSRF.'
        )
        field_name = _get_config(
            token_key, 'WTF_CSRF_FIELD_NAME', 'csrf_token',
            message='A field name is required to use CSRF.'
        )
        time_limit = _get_config(
            time_limit, 'WTF_CSRF_TIME_LIMIT', 3600, required=False
        )
    
        if not data:
>           raise ValidationError('The CSRF token is missing.')
E           wtforms.validators.ValidationError: The CSRF token is missing.

.tox/c1/lib/python3.6/site-packages/flask_wtf/csrf.py:91: ValidationError

During handling of the above exception, another exception occurred:

i18n_app = <Flask 'testapp'>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
client = <FlaskClient <Flask 'testapp'>>
client_request_args = <Response streamed [200 OK]>

    def test_ItemImportView_check(i18n_app, users, client,client_request_args):
        file_path = os.path.join(
            os.path.dirname(os.path.abspath(__file__)),
            'data',
            'sample_file',
            'sample_csv.csv'
        )
    
        csv_data = open(file_path, "rb")
        data = {"file": (csv_data, "sample_csv.csv")}
    
        client.post(
            "/",
            data=data,
            buffered=True,
            content_type="multipart/form-data",
        )
    
        rf = request.form.to_dict()
        rf['username'] = "test_user"
    
        # mimetype = 'application/json'
        # headers = {
        #     'Content-Type': mimetype,
        #     'Accept': mimetype
        # }
        # data = {
        #     'Data': [20.0, 30.0, 401.0, 50.0],
        #     'Date': ['2017-08-11', '2017-08-12', '2017-08-13', '2017-08-14'],
        #     'Day': 4
        # }
    
        # client.post(
        #     '/',
        #     data=json.dumps(data),
        #     headers=headers
        # )
    
        with patch("flask_login.utils._get_user", return_value=users[3]['obj']):
            test = ItemImportView()
            task = MagicMock()
            task.task_id = 1
            with patch("weko_search_ui.tasks.check_import_items_task.apply_async",return_Value=task):
>               assert test.check()

tests/test_admin.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/flask_admin/base.py:69: in inner
    return self._run_view(f, *args, **kwargs)
.tox/c1/lib/python3.6/site-packages/flask_admin/base.py:368: in _run_view
    return fn(self, *args, **kwargs)
weko_search_ui/admin.py:338: in check
    validate_csrf_header(request)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

request = <Request 'http://TEST_SERVER/' [POST]>, csrf_header = 'X-CSRFToken'

    def validate_csrf_header(request,csrf_header="X-CSRFToken"):
        """Validate CSRF header
    
        Args:
            csrf_header (str, optional): CSRF Token Header. Defaults to "X-CSRFToken".
    
        Raises:
            CSRFError: _description_
            CSRFError: _description_
            CSRFError: _description_
        """
        try:
            csrf_token = request.headers.get(csrf_header)
            validate_csrf(csrf_token)
        except ValidationError as e:
>           raise CSRFError(e.args[0])
E           flask_wtf.csrf.CSRFError: 400 Bad Request: The CSRF token is missing.

../weko-admin/weko_admin/api.py:231: CSRFError
------------------------------ Captured log setup ------------------------------
ERROR    flask.app:receivers.py:39 Error building event
Traceback (most recent call last):
  File "/code/modules/invenio-stats/invenio_stats/receivers.py", line 31, in __call__
    if self.name in current_stats.events:
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/local.py", line 348, in __getattr__
    return getattr(self._get_current_object(), name)
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/utils.py", line 91, in __get__
    value = self.func(obj)
  File "/code/modules/invenio-stats/invenio_stats/ext.py", line 79, in events
    queue = current_queues.queues[
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/local.py", line 348, in __getattr__
    return getattr(self._get_current_object(), name)
AttributeError: 'int' object has no attribute 'queues'
__________________________ test_get_permission_filter __________________________

i18n_app = <Flask 'testapp'>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
client_request_args = <Response streamed [200 OK]>
indices = {'index_dict': {'biblio_flag': False, 'browsing_group': '', 'browsing_role': 'Contributor', 'comment': '', ...}, 'index_non_dict': <Index 33>, 'index_non_dict_child': <Index 44>}

    def test_get_permission_filter(i18n_app, users, client_request_args, indices):
        with patch("flask_login.utils._get_user", return_value=users[3]['obj']):
            res = get_permission_filter(33)
>           assert res==([Match(publish_status='0'), Range(publish_date={'lte': 'now/d','time_zone':'UTC'}), Terms(path=['33']), Bool(must=[Match(publish_status='0'), Match(relation_version_is_last='true')])], ['33','33/44'])
E           AssertionError: assert ([Terms(publish_status=['0', '1']),\n  Range(publish_date={'lte': 'now/d', 'time_zone': 'UTC'}),\n  Terms(path=['33']),\n  Bool(must=[Terms(publish_status=['0', '1']), Match(relation_version_is_last='true')])],\n ['33', '33/44']) == ([Match(publish_status='0'),\n  Range(publish_date={'lte': 'now/d', 'time_zone': 'UTC'}),\n  Terms(path=['33']),\n  Bool(must=[Match(publish_status='0'), Match(relation_version_is_last='true')])],\n ['33', '33/44'])
E             At index 0 diff: [Terms(publish_status=['0', '1']), Range(publish_date={'lte': 'now/d', 'time_zone': 'UTC'}), Terms(path=['33']), Bool(must=[Terms(publish_status=['0', '1']), Match(relation_version_is_last='true')])] != [Match(publish_status='0'), Range(publish_date={'lte': 'now/d', 'time_zone': 'UTC'}), Terms(path=['33']), Bool(must=[Match(publish_status='0'), Match(relation_version_is_last='true')])]
E             Full diff:
E               (
E             -  [Match(publish_status='0'),
E             +  [Terms(publish_status=['0', '1']),
E                 Range(publish_date={'lte': 'now/d', 'time_zone': 'UTC'}),
E                 Terms(path=['33']),
E             -   Bool(must=[Match(publish_status='0'), Match(relation_version_is_last='true')])],
E             ?              ^^^^^
E             +   Bool(must=[Terms(publish_status=['0', '1']), Match(relation_version_is_last='true')])],
E             ?              ^^^^^                +   ++++++
E                ['33', '33/44'],
E               )

tests/test_query.py:46: AssertionError
------------------------------ Captured log setup ------------------------------
ERROR    flask.app:receivers.py:39 Error building event
Traceback (most recent call last):
  File "/code/modules/invenio-stats/invenio_stats/receivers.py", line 31, in __call__
    if self.name in current_stats.events:
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/local.py", line 348, in __getattr__
    return getattr(self._get_current_object(), name)
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/utils.py", line 91, in __get__
    value = self.func(obj)
  File "/code/modules/invenio-stats/invenio_stats/ext.py", line 79, in events
    queue = current_queues.queues[
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/local.py", line 348, in __getattr__
    return getattr(self._get_current_object(), name)
AttributeError: 'int' object has no attribute 'queues'
___________________________ test_function_issue35902 ___________________________

app = <Flask 'testapp'>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
communities = <Community, ID: comm1>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7fde7eac8978>

    def test_function_issue35902(app, users, communities, mocker):
        with app.test_client() as client:
            login_user_via_session(client, email=users[3]["email"])
            search = RecordsSearch()
            app.config['WEKO_SEARCH_KEYWORDS_DICT'] = WEKO_SEARCH_KEYWORDS_DICT
            app.config['WEKO_ADMIN_MANAGEMENT_OPTIONS'] = WEKO_ADMIN_MANAGEMENT_OPTIONS
            mocker.patch("weko_search_ui.query.search_permission",side_effect=MockSearchPerm)
            mocker.patch("weko_search_ui.permissions.search_permission",side_effect=MockSearchPerm)
            test = [
                {"bool":{"should":[{"match":{"weko_creator_id":None}},{"match":{"weko_shared_id":None}},{"bool":{"must":[{"match":{"publish_status":"0"}},{"range":{"publish_date":{"lte":"now/d","time_zone":"UTC"}}}]}}],"must":[{"terms":{"path":[]}}]}},
                {"bool":{"must":[{"match":{"relation_version_is_last":"true"}}]}},
            ]
            # not exist community
            # full text, detail search
            data = {
                "page":"1","size":"20","sort":"-createdate","creator":"","subject":"","sbjscheme":"","id":"","id_attr":"","type":"","itemtype":"","lang":"",
                "search_type":"0",
                "q":"test_data",
                "title":"aaa",
            }
            with app.test_request_context(headers=[("Accept-Language","en")],data=data):
                app.extensions['invenio-oauth2server'] = 1
                app.extensions['invenio-queues'] = 1
                test1 = copy.deepcopy(test)
                test1.append(
                    {"multi_match":{"query":"aaa","type":"most_fields","minimum_should_match":"75%","operator":"and","fields":["search_title","search_title.ja"]}}
                )
                test1.append(
                    {"bool":{"should":[
                        {"nested":{"query":{"multi_match":{"query":"test_data","operator":"and","fields":["content.attachment.content"]}},"path":"content"}},
                        {"query_string":{"query":"test_data","default_operator":"and","fields":["search_*","search_*.ja"]}}
                    ]}}
                )
                res,urlkwargs = default_search_factory(self=None, search=search)
                result = (res.query()).to_dict()
                result = result["query"]["bool"]["filter"][0]["bool"]["must"]
>               assert result == test1
E               AssertionError: assert [{'bool': {'must': [{'terms': {'path': []}}],\n           'should': [{'bool': {'must': [{'terms': {'publish_status': ['0',\n                                                                       '1']}},\n                                         {'match': {'weko_creator_id': None}}]}},\n                      {'bool': {'must': [{'terms': {'publish_status': ['0',\n                                                                       '1']}},\n                                         {'match': {'weko_shared_id': None}}]}},\n                      {'bool': {'must': [{'terms': {'publish_status': ['0']}},\n                                         {'range': {'publish_date': {'lte': 'now/d',\n                                                                     'time_zone': 'UTC'}}}]}}]}},\n {'bool': {'must': [{'match': {'relation_version_is_last': 'true'}}]}},\n {'multi_match': {'fields': ['search_title', 'search_title.ja'],\n                  'minimum_should_match': '75%',\n                  'operator': 'and',\n                  'query': 'aaa',\n                  'type': 'most_fields'}},\n {'bool': {'should': [{'nested': {'path': 'content',\n                                  'query': {'multi_match': {'fields': ['content.attachment.content'],\n                                                            'operator': 'and',\n                                                            'query': 'test_data'}}}},\n                      {'query_string': {'default_operator': 'and',\n                                        'fields': ['search_*', 'search_*.ja'],\n                                        'query': 'test_data'}}]}}] == [{'bool': {'must': [{'terms': {'path': []}}],\n           'should': [{'match': {'weko_creator_id': None}},\n                      {'match': {'weko_shared_id': None}},\n                      {'bool': {'must': [{'match': {'publish_status': '0'}},\n                                         {'range': {'publish_date': {'lte': 'now/d',\n                                                                     'time_zone': 'UTC'}}}]}}]}},\n {'bool': {'must': [{'match': {'relation_version_is_last': 'true'}}]}},\n {'multi_match': {'fields': ['search_title', 'search_title.ja'],\n                  'minimum_should_match': '75%',\n                  'operator': 'and',\n                  'query': 'aaa',\n                  'type': 'most_fields'}},\n {'bool': {'should': [{'nested': {'path': 'content',\n                                  'query': {'multi_match': {'fields': ['content.attachment.content'],\n                                                            'operator': 'and',\n                                                            'query': 'test_data'}}}},\n                      {'query_string': {'default_operator': 'and',\n                                        'fields': ['search_*', 'search_*.ja'],\n                                        'query': 'test_data'}}]}}]
E                 At index 0 diff: {'bool': {'should': [{'bool': {'must': [{'terms': {'publish_status': ['0', '1']}}, {'match': {'weko_creator_id': None}}]}}, {'bool': {'must': [{'terms': {'publish_status': ['0', '1']}}, {'match': {'weko_shared_id': None}}]}}, {'bool': {'must': [{'terms': {'publish_status': ['0']}}, {'range': {'publish_date': {'lte': 'now/d', 'time_zone': 'UTC'}}}]}}], 'must': [{'terms': {'path': []}}]}} != {'bool': {'should': [{'match': {'weko_creator_id': None}}, {'match': {'weko_shared_id': None}}, {'bool': {'must': [{'match': {'publish_status': '0'}}, {'range': {'publish_date': {'lte': 'now/d', 'time_zone': 'UTC'}}}]}}], 'must': [{'terms': {'path': []}}]}}
E                 Full diff:
E                   [
E                    {'bool': {'must': [{'terms': {'path': []}}],
E                 -            'should': [{'match': {'weko_creator_id': None}},
E                 +            'should': [{'bool': {'must': [{'terms': {'publish_status': ['0',
E                 +                                                                        '1']}},
E                 +                                          {'match': {'weko_creator_id': None}}]}},
E                 +                       {'bool': {'must': [{'terms': {'publish_status': ['0',
E                 +                                                                        '1']}},
E                 -                       {'match': {'weko_shared_id': None}},
E                 +                                          {'match': {'weko_shared_id': None}}]}},
E                 ? +++++++++++++++++++                                                         +++
E                 -                       {'bool': {'must': [{'match': {'publish_status': '0'}},
E                 ?                                             ^^^^
E                 +                       {'bool': {'must': [{'terms': {'publish_status': ['0']}},
E                 ?                                            +++ ^                      +   +
E                                                            {'range': {'publish_date': {'lte': 'now/d',
E                                                                                        'time_zone': 'UTC'}}}]}}]}},
E                    {'bool': {'must': [{'match': {'relation_version_is_last': 'true'}}]}},
E                    {'multi_match': {'fields': ['search_title',
E                                                'search_title.ja'],
E                                     'minimum_should_match': '75%',
E                                     'operator': 'and',
E                                     'query': 'aaa',
E                                     'type': 'most_fields'}},
E                    {'bool': {'should': [{'nested': {'path': 'content',
E                                                     'query': {'multi_match': {'fields': ['content.attachment.content'],
E                                                                               'operator': 'and',
E                                                                               'query': 'test_data'}}}},
E                                         {'query_string': {'default_operator': 'and',
E                                                           'fields': ['search_*',
E                                                                      'search_*.ja'],
E                                                           'query': 'test_data'}}]}},
E                   ]

tests/test_query.py:213: AssertionError
____________________ test_IndexSearchResource_get_Exception ____________________

client_rest = <FlaskClient <Flask 'testapp'>>
db = <SQLAlchemy engine=sqlite:////code/modules/weko-search-ui/test.db>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
item_type = [{'type': 'object', '$schema': 'http://json-schema.org/draft-04/schema#', 'required': ['pubdate', 'item_1617186331708'...type': 'string', 'title': 'SYSTEMIDT Identifier Type', 'format': 'select'}}, 'system_prop': True}}, 'description': ''}]
db_records = [(<PersistentIdentifier depid:1 / rec:4e7fa977-bafa-4605-9ff6-dbaa02843f96 (R)>, <PersistentIdentifier recid:1 / rec:4...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
facet_search_setting = None

    def test_IndexSearchResource_get_Exception(client_rest, db, users, item_type, db_records, facet_search_setting):
        sname = current_app.config["SERVER_NAME"]
        #from weko_index_tree.models import Index
        #datas = json_data("data/index.json")
        #indexes = list()
        #for index in datas:
        #    indexes.append(Index(**datas[index]))
        #with db.session.begin_nested():
        #    db.session.add_all(indexes)
        #db.session.commit()
    
        def dummy_response(data):
            if isinstance(data, str):
                data = json_data(data)
            dummy=response.Response(Search(), data)
            return dummy
        facet = json_data("data/search/facet.json")
        links = {"self":"?page=1&size=20"}
        for l in links:
            links[l]="http://"+sname+"/index/"+links[l]
        with patch("weko_admin.utils.get_facet_search_query", return_value=facet):
            with patch("weko_search_ui.rest.Indexes.get_self_list",side_effect=mock_path(**path1)):
                with patch("invenio_search.api.RecordsSearch.execute", return_value=dummy_response("data/search/execute_result01_02_03.json")):
                    with patch("weko_search_ui.rest.get_heading_info", side_effect=Exception):
>                       res = client_rest.get(url("/index/",{"self":"?page=1&size=20"}))

tests/test_rest.py:132: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1029: in get
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:196: in open
    follow_redirects=follow_redirects
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2334: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2320: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1766: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:36: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2317: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1840: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1743: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:36: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1838: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1824: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask/views.py:88: in view
    return self.dispatch_request(*args, **kwargs)
.tox/c1/lib/python3.6/site-packages/invenio_rest/views.py:240: in dispatch_request
    *args, **kwargs
.tox/c1/lib/python3.6/site-packages/flask/views.py:158: in dispatch_request
    return meth(*args, **kwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_search_ui.rest.IndexSearchResource object at 0x7fde825eb6d8>
kwargs = {}, FacetSearchSetting = <class 'weko_admin.models.FacetSearchSetting'>
get_facet_search_query = <MagicMock name='get_facet_search_query' id='140593610351392'>
page = 1, size = 20, is_search = 0, community_id = None, params = {}

    def get(self, **kwargs):
        """Search records.
    
        :returns: the search result containing hits and aggregations as
        returned by invenio-search.
        """
        from weko_admin.models import FacetSearchSetting
        from weko_admin.utils import get_facet_search_query
    
        page = request.values.get("page", 1, type=int)
        size = request.values.get("size", 20, type=int)
        is_search = request.values.get("is_search", 0 ,type=int ) #toppage and search_page is 1
        community_id = request.values.get("community")
        params = {}
        facets = get_facet_search_query()
        search_index = current_app.config["SEARCH_UI_SEARCH_INDEX"]
>       if facets and search_index and "post_filters" in facets[search_index]:
E       KeyError: 'test-weko'

weko_search_ui/rest.py:205: KeyError
_____________________________ test_delete_records ______________________________

i18n_app = <Flask 'testapp'>
db_activity = {'activity': <Activity 2>, 'item': {'id': '1', 'pid': {'type': 'depid', 'value': '1', 'revision_id': 0}, 'lang': 'ja',... 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}]}, 'relation_version_is_last': True}}

    def test_delete_records(i18n_app, db_activity):
        with open("tests/data/search_result_2.json", "r") as json_file:
            search_result = json.load(json_file)
    
            with patch("weko_search_ui.utils.get_tree_items", return_value=[search_result]):
                with patch(
                    "invenio_records.api.Record.get_record",
                    return_value=db_activity["record"],
                ):
                    with patch(
                        "weko_deposit.api.WekoIndexer.update_es_data",
                        return_value=db_activity["record"],
                    ):
                        with patch(
                            "weko_deposit.api.WekoDeposit.delete_by_index_tree_id",
                            return_value="",
                        ):
                            with patch(
                                "invenio_records.api.Record.delete", return_value=""
                            ):
                                assert delete_records(33, ignore_items=[])
>                               assert delete_records(1, ignore_items=[])

tests/test_utils.py:228: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:255: in delete_records
    soft_delete(pid)
../weko-records-ui/weko_records_ui/utils.py:289: in soft_delete
    raise ex
../weko-records-ui/weko_records_ui/utils.py:270: in soft_delete
    dep.remove_feedback_mail()
../weko-deposit/weko_deposit/api.py:1645: in remove_feedback_mail
    self.indexer.update_feedback_mail_list(feedback_mail)
../weko-deposit/weko_deposit/api.py:389: in update_feedback_mail_list
    body=body
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/utils.py:76: in _wrapped
    return func(*args, params=params, **kwargs)
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/__init__.py:528: in update
    doc_type, id, '_update'), params=params, body=body)
.tox/c1/lib/python3.6/site-packages/elasticsearch/transport.py:314: in perform_request
    status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)
.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/http_requests.py:90: in perform_request
    self._raise_error(response.status_code, raw_data)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, status_code = 404
raw_data = '{"error":{"root_cause":[{"type":"document_missing_exception","reason":"[item-v1.0.0][92d60879-6293-41d3-ae9f-e001db70...-e001db70a908]: document missing","index_uuid":"kb-BXDA_TMaQJJMVlJmkuw","shard":"3","index":"test-weko"},"status":404}'

    def _raise_error(self, status_code, raw_data):
        """ Locate appropriate exception and raise it. """
        error_message = raw_data
        additional_info = None
        try:
            if raw_data:
                additional_info = json.loads(raw_data)
                error_message = additional_info.get('error', error_message)
                if isinstance(error_message, dict) and 'type' in error_message:
                    error_message = error_message['type']
        except (ValueError, TypeError) as err:
            logger.warning('Undecodable raw error response from server: %s', err)
    
>       raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
E       elasticsearch.exceptions.NotFoundError: TransportError(404, 'document_missing_exception', '[item-v1.0.0][92d60879-6293-41d3-ae9f-e001db70a908]: document missing')

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/base.py:125: NotFoundError
------------------------------ Captured log call -------------------------------
WARNING  elasticsearch:base.py:97 POST http://elasticsearch:9200/test-weko/item-v1.0.0/92d60879-6293-41d3-ae9f-e001db70a908/_update [status:404 request:0.158s]
_________________________ test_get_feedback_mail_list __________________________

i18n_app = <Flask 'testapp'>
db_records2 = [(<PersistentIdentifier depid:1 / rec:1f43566a-21e7-483f-be94-58fc3399f6ac (R)>, <PersistentIdentifier recid:1 / rec:1...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
es = <Elasticsearch([{'host': 'elasticsearch'}])>

    def test_get_feedback_mail_list(i18n_app, db_records2, es):
        search_instance = '{"size": 1, "query": {"bool": {"filter": [{"bool": {"must": [{"match": {"publish_status": "0"}}, {"range": {"publish_date": {"lte": "now/d"}}}, {"terms": {"path": ["1031", "1029", "1025", "952", "953", "943", "940", "1017", "1015", "1011", "881", "893", "872", "869", "758", "753", "742", "530", "533", "502", "494", "710", "702", "691", "315", "351", "288", "281", "759", "754", "744", "531", "534", "503", "495", "711", "704", "692", "316", "352", "289", "282", "773", "771", "767", "538", "539", "519", "510", "756", "745", "733", "337", "377", "308", "299", "2063", "2061", "2057", "1984", "1985", "1975", "1972", "2049", "2047", "2043", "1913", "1925", "1904", "1901", "1790", "1785", "1774", "1562", "1565", "1534", "1526", "1742", "1734", "1723", "1347", "1383", "1320", "1313", "1791", "1786", "1776", "1563", "1566", "1535", "1527", "1743", "1736", "1724", "1348", "1384", "1321", "1314", "1805", "1803", "1799", "1570", "1571", "1551", "1542", "1788", "1777", "1765", "1369", "1409", "1340", "1331", "4127", "4125", "4121", "4048", "4049", "4039", "4036", "4113", "4111", "4107", "3977", "3989", "3968", "3965", "3854", "3849", "3838", "3626", "3629", "3598", "3590", "3806", "3798", "3787", "3411", "3447", "3384", "3377", "3855", "3850", "3840", "3627", "3630", "3599", "3591", "3807", "3800", "3788", "3412", "3448", "3385", "3378", "3869", "3867", "3863", "3634", "3635", "3615", "3606", "3852", "3841", "3829", "3433", "3473", "3404", "3395", "1631495207665", "1631495247023", "1631495289664", "1631495340640", "1631510190230", "1631510251689", "1631510324260", "1631510380602", "1631510415574", "1631511387362", "1631511432362", "1631511521954", "1631511525655", "1631511606115", "1631511735866", "1631511740808", "1631511841882", "1631511874428", "1631511843164", "1631511845163", "1631512253601", "1633380618401", "1638171727119", "1638171753803", "1634120530242", "1636010714174", "1636010749240", "1638512895916", "1638512971664"]}}, {"bool": {"must": [{"match": {"publish_status": "0"}}, {"match": {"relation_version_is_last": "true"}}]}}, {"bool": {"should": [{"nested": {"query": {"multi_match": {"query": "simple", "operator": "and", "fields": ["content.attachment.content"]}}, "path": "content"}}, {"query_string": {"query": "simple", "default_operator": "and", "fields": ["search_*", "search_*.ja"]}}]}}]}}], "must": [{"match_all": {}}]}}, "aggs": {"Data Language": {"filter": {"bool": {"must": [{"term": {"publish_status": "0"}}]}}, "aggs": {"Data Language": {"terms": {"field": "language", "size": 1000}}}}, "Access": {"filter": {"bool": {"must": [{"term": {"publish_status": "0"}}]}}, "aggs": {"Access": {"terms": {"field": "accessRights", "size": 1000}}}}, "Location": {"filter": {"bool": {"must": [{"term": {"publish_status": "0"}}]}}, "aggs": {"Location": {"terms": {"field": "geoLocation.geoLocationPlace", "size": 1000}}}}, "Temporal": {"filter": {"bool": {"must": [{"term": {"publish_status": "0"}}]}}, "aggs": {"Temporal": {"terms": {"field": "temporal", "size": 1000}}}}, "Topic": {"filter": {"bool": {"must": [{"term": {"publish_status": "0"}}]}}, "aggs": {"Topic": {"terms": {"field": "subject.value", "size": 1000}}}}, "Distributor": {"filter": {"bool": {"must": [{"term": {"contributor.@attributes.contributorType": "Distributor"}}, {"term": {"publish_status": "0"}}]}}, "aggs": {"Distributor": {"terms": {"field": "contributor.contributorName", "size": 1000}}}}, "Data Type": {"filter": {"bool": {"must": [{"term": {"description.descriptionType": "Other"}}, {"term": {"publish_status": "0"}}]}}, "aggs": {"Data Type": {"terms": {"field": "description.value", "size": 1000}}}}}, "sort": [{"_id": {"order": "desc", "unmapped_type": "long"}}], "_source": {"excludes": ["content"]}}'
        execute_result = {
            "aggregations": {"doc_count": 1, "key": 2},
            "feedback_mail_list": {},
            "email_list": {},
            "buckets": [],
        }
        # mock_recordssearch = MagicMock(side_effect=MockRecordsSearch)
        # side_effect=mock_recordssearch
        with patch(
            "weko_search_ui.query.feedback_email_search_factory",
            return_value=search_instance,
        ):
>           assert get_feedback_mail_list() == {}

tests/test_utils.py:270: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:318: in get_feedback_mail_list
    search_instance.execute()
.tox/c1/lib/python3.6/site-packages/elasticsearch_dsl/search.py:706: in execute
    **self._params
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/utils.py:76: in _wrapped
    return func(*args, params=params, **kwargs)
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/__init__.py:636: in search
    doc_type, '_search'), params=params, body=body)
.tox/c1/lib/python3.6/site-packages/elasticsearch/transport.py:314: in perform_request
    status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)
.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/http_requests.py:90: in perform_request
    self._raise_error(response.status_code, raw_data)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, status_code = 400
raw_data = '{"error":{"root_cause":[{"type":"query_shard_exception","reason":"failed to create query: {\\n  \\"bool\\" : {\\n    ...l_state_exception","reason":"[nested] failed to find nested object under path [feedback_mail_list]"}}}]},"status":400}'

    def _raise_error(self, status_code, raw_data):
        """ Locate appropriate exception and raise it. """
        error_message = raw_data
        additional_info = None
        try:
            if raw_data:
                additional_info = json.loads(raw_data)
                error_message = additional_info.get('error', error_message)
                if isinstance(error_message, dict) and 'type' in error_message:
                    error_message = error_message['type']
        except (ValueError, TypeError) as err:
            logger.warning('Undecodable raw error response from server: %s', err)
    
>       raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
E       elasticsearch.exceptions.RequestError: TransportError(400, 'search_phase_execution_exception', 'failed to create query: {\n  "bool" : {\n    "must" : [\n      {\n        "nested" : {\n          "query" : {\n            "bool" : {\n              "must" : [\n                {\n                  "exists" : {\n                    "field" : "feedback_mail_list.email",\n                    "boost" : 1.0\n                  }\n                }\n              ],\n              "adjust_pure_negative" : true,\n              "boost" : 1.0\n            }\n          },\n          "path" : "feedback_mail_list",\n          "ignore_unmapped" : false,\n          "score_mode" : "avg",\n          "boost" : 1.0\n        }\n      },\n      {\n        "query_string" : {\n          "query" : "_type:record-v1.0.0 AND relation_version_is_last:true ",\n          "fields" : [ ],\n          "type" : "best_fields",\n          "default_operator" : "or",\n          "max_determinized_states" : 10000,\n          "enable_position_increments" : true,\n          "fuzziness" : "AUTO",\n          "fuzzy_prefix_length" : 0,\n          "fuzzy_max_expansions" : 50,\n          "phrase_slop" : 0,\n          "escape" : false,\n          "auto_generate_synonyms_phrase_query" : true,\n          "fuzzy_transpositions" : true,\n          "boost" : 1.0\n        }\n      }\n    ],\n    "adjust_pure_negative" : true,\n    "boost" : 1.0\n  }\n}')

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/base.py:125: RequestError
------------------------------ Captured log setup ------------------------------
WARNING  elasticsearch:base.py:97 PUT http://elasticsearch:9200/test-weko-item-v1.0.0/_alias/test-weko [status:400 request:0.005s]
------------------------------ Captured log call -------------------------------
WARNING  elasticsearch:base.py:97 GET http://elasticsearch:9200/test-weko/_search?preference=4a4d20d732cd9f789541e54dd9eb6af8&version=false [status:400 request:0.012s]
__________________________ test_unpackage_import_file __________________________

app = <Flask 'testapp'>
db = <SQLAlchemy engine=sqlite:////code/modules/weko-search-ui/test.db>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7fde7be3c7f0>
mocker_itemtype = None

    def test_unpackage_import_file(app, db,mocker, mocker_itemtype):
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)), "data", "item_map.json"
        )
        with open(filepath, encoding="utf-8") as f:
            item_map = json.load(f)
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)), "data", "item_type_mapping.json"
        )
        with open(filepath, encoding="utf-8") as f:
            item_type_mapping = json.load(f)
        mocker.patch("weko_records.serializers.utils.get_mapping", return_value=item_map)
        mocker.patch("weko_records.api.Mapping.get_record", return_value=item_type_mapping)
    
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)),
            "data",
            "unpackage_import_file/result.json",
        )
        with open(filepath, encoding="utf-8") as f:
            result = json.load(f)
    
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)),
            "data",
            "unpackage_import_file/result_force_new.json",
        )
        with open(filepath, encoding="utf-8") as f:
            result_force_new = json.load(f)
    
        path = os.path.join(
            os.path.dirname(os.path.realpath(__file__)), "data", "unpackage_import_file"
        )
        with app.test_request_context():
            with set_locale("en"):
>               assert unpackage_import_file(path, "items.csv", "csv", False) == result
E               AssertionError: assert [{'$schema': 'https://localhost:8443/items/jsonschema/15',\n  'edit_mode': 'Keep',\n  'errors': None,\n  'feedback_mail': ['wekosoftware@nii.ac.jp'],\n  'file_path': ['file00000001/1KB.pdf', ''],\n  'identifier_key': 'item_1617186819068',\n  'is_change_identifier': False,\n  'item_type_id': 15,\n  'item_type_name': '',\n  'metadata': {'item_1617186331708': [{'subitem_1551255647225': 'ja_conference '\n                                                                'paperITEM00000001(public_open_access_open_access_simple)',\n                                       'subitem_1551255648112': 'ja'},\n                                      {'subitem_1551255647225': 'en_conference '\n                                                                'paperITEM00000001(public_open_access_simple)',\n                                       'subitem_1551255648112': 'en'}],\n               'item_1617186385884': [{'subitem_1551255720400': 'Alternative '\n                                                                'Title',\n                                       'subitem_1551255721061': 'en'},\n                                      {'subitem_1551255720400': 'Alternative '\n                                                                'Title',\n                                       'subitem_1551255721061': 'ja'}],\n               'item_1617186419668': [{'creatorAffiliations': [{'affiliationNameIdentifiers': [{'affiliationNameIdentifier': '0000000121691048',\n                                                                                                'affiliationNameIdentifierScheme': 'ISNI',\n                                                                                                'affiliationNameIdentifierURI': 'http://isni.org/isni/0000000121691048'}],\n                                                                'affiliationNames': [{'affiliationName': 'University',\n                                                                                      'affiliationNameLang': 'en'}]}],\n                                       'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'creatorNames': [{'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja'},\n                                                        {'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja-Kana'},\n                                                        {'creatorName': 'Joho, '\n                                                                        'Taro',\n                                                         'creatorNameLang': 'en'}],\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': '4',\n                                                            'nameIdentifierScheme': 'WEKO'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'zzzzzzz',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]},\n                                      {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'creatorNames': [{'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja'},\n                                                        {'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja-Kana'},\n                                                        {'creatorName': 'Joho, '\n                                                                        'Taro',\n                                                         'creatorNameLang': 'en'}],\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'zzzzzzz',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]},\n                                      {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'creatorNames': [{'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja'},\n                                                        {'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja-Kana'},\n                                                        {'creatorName': 'Joho, '\n                                                                        'Taro',\n                                                         'creatorNameLang': 'en'}],\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'zzzzzzz',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}],\n               'item_1617186476635': {'subitem_1522299639480': 'open access',\n                                      'subitem_1600958577026': 'http://purl.org/coar/access_right/c_abf2'},\n               'item_1617186499011': [{'subitem_1522650717957': 'ja',\n                                       'subitem_1522650727486': 'http://localhost',\n                                       'subitem_1522651041219': 'Rights '\n                                                                'Information'}],\n               'item_1617186609386': [{'subitem_1522299896455': 'ja',\n                                       'subitem_1522300014469': 'Other',\n                                       'subitem_1522300048512': 'http://localhost/',\n                                       'subitem_1523261968819': 'Sibject1'}],\n               'item_1617186626617': [{'subitem_description': 'Description\n'\n                                                              'Description<br/>Description',\n                                       'subitem_description_language': 'en',\n                                       'subitem_description_type': 'Abstract'},\n                                      {'subitem_description': '\n\n\n',\n                                       'subitem_description_language': 'ja',\n                                       'subitem_description_type': 'Abstract'}],\n               'item_1617186643794': [{'subitem_1522300295150': 'en',\n                                       'subitem_1522300316516': 'Publisher'}],\n               'item_1617186660861': [{'subitem_1522300695726': 'Available',\n                                       'subitem_1522300722591': '2021-06-30'}],\n               'item_1617186702042': [{'subitem_1551255818386': 'jpn'}],\n               'item_1617186783814': [{'subitem_identifier_type': 'URI',\n                                       'subitem_identifier_uri': 'http://localhost'}],\n               'item_1617186859717': [{'subitem_1522658018441': 'en',\n                                       'subitem_1522658031721': 'Temporal'}],\n               'item_1617186882738': [{'subitem_geolocation_place': [{'subitem_geolocation_place_text': 'Japan'}]}],\n               'item_1617186901218': [{'subitem_1522399143519': {'subitem_1522399281603': 'ISNI',\n                                                                 'subitem_1522399333375': 'http://xxx'},\n                                       'subitem_1522399412622': [{'subitem_1522399416691': 'en',\n                                                                  'subitem_1522737543681': 'Funder '\n                                                                                           'Name'}],\n                                       'subitem_1522399571623': {'subitem_1522399585738': 'Award '\n                                                                                          'URI',\n                                                                 'subitem_1522399628911': 'Award '\n                                                                                          'Number'},\n                                       'subitem_1522399651758': [{'subitem_1522721910626': 'en',\n                                                                  'subitem_1522721929892': 'Award '\n                                                                                           'Title'}]}],\n               'item_1617186920753': [{'subitem_1522646500366': 'ISSN',\n                                       'subitem_1522646572813': 'xxxx-xxxx-xxxx'}],\n               'item_1617186941041': [{'subitem_1522650068558': 'en',\n                                       'subitem_1522650091861': 'Source '\n                                                                'Title'}],\n               'item_1617186959569': {'subitem_1551256328147': '1'},\n               'item_1617186981471': {'subitem_1551256294723': '111'},\n               'item_1617186994930': {'subitem_1551256248092': '12'},\n               'item_1617187024783': {'subitem_1551256198917': '1'},\n               'item_1617187045071': {'subitem_1551256185532': '3'},\n               'item_1617187112279': [{'subitem_1551256126428': 'Degree Name',\n                                       'subitem_1551256129013': 'en'}],\n               'item_1617187136212': {'subitem_1551256096004': '2021-06-30'},\n               'item_1617187187528': [{'subitem_1599711633003': [{'subitem_1599711636923': 'Conference '\n                                                                                           'Name',\n                                                                  'subitem_1599711645590': 'ja'}],\n                                       'subitem_1599711655652': '1',\n                                       'subitem_1599711660052': [{'subitem_1599711680082': 'Sponsor',\n                                                                  'subitem_1599711686511': 'ja'}],\n                                       'subitem_1599711699392': {'subitem_1599711704251': '2020/12/11',\n                                                                 'subitem_1599711712451': '1',\n                                                                 'subitem_1599711727603': '12',\n                                                                 'subitem_1599711731891': '2000',\n                                                                 'subitem_1599711735410': '1',\n                                                                 'subitem_1599711739022': '12',\n                                                                 'subitem_1599711743722': '2020',\n                                                                 'subitem_1599711745532': 'ja'},\n                                       'subitem_1599711758470': [{'subitem_1599711769260': 'Conference '\n                                                                                           'Venue',\n                                                                  'subitem_1599711775943': 'ja'}],\n                                       'subitem_1599711788485': [{'subitem_1599711798761': 'Conference '\n                                                                                           'Place',\n                                                                  'subitem_1599711803382': 'ja'}],\n                                       'subitem_1599711813532': 'JPN'}],\n               'item_1617258105262': {'resourcetype': 'conference paper',\n                                      'resourceuri': 'http://purl.org/coar/resource_type/c_5794'},\n               'item_1617265215918': {'subitem_1522305645492': 'AO',\n                                      'subitem_1600292170262': 'http://purl.org/coar/version/c_b1a7d7d4d402bcce'},\n               'item_1617349709064': [{'contributorMails': [{'contributorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'contributorNames': [{'contributorName': ', '\n                                                                                '',\n                                                             'lang': 'ja'},\n                                                            {'contributorName': ', '\n                                                                                '',\n                                                             'lang': 'ja-Kana'},\n                                                            {'contributorName': 'Joho, '\n                                                                                'Taro',\n                                                             'lang': 'en'}],\n                                       'contributorType': 'ContactPerson',\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}],\n               'item_1617349808926': {'subitem_1523263171732': 'Version'},\n               'item_1617351524846': {'subitem_1523260933860': 'Unknown'},\n               'item_1617353299429': [{'subitem_1522306207484': 'isVersionOf',\n                                       'subitem_1522306287251': {'subitem_1522306382014': 'arXiv',\n                                                                 'subitem_1522306436033': 'xxxxx'},\n                                       'subitem_1523320863692': [{'subitem_1523320867455': 'en',\n                                                                  'subitem_1523320909613': 'Related '\n                                                                                           'Title'}]}],\n               'item_1617605131499': [{'accessrole': 'open_access',\n                                       'date': [{'dateType': 'Available',\n                                                 'dateValue': '2021-07-12'}],\n                                       'displaytype': 'simple',\n                                       'filename': '1KB.pdf',\n                                       'filesize': [{'value': '1 KB'}],\n                                       'format': 'text/plain'},\n                                      {'filename': ''}],\n               'item_1617610673286': [{'nameIdentifiers': [{'nameIdentifier': 'xxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'}],\n                                       'rightHolderNames': [{'rightHolderLanguage': 'ja',\n                                                             'rightHolderName': 'Right '\n                                                                                'Holder '\n                                                                                'Name'}]}],\n               'item_1617620223087': [{'subitem_1565671149650': 'ja',\n                                       'subitem_1565671169640': 'Banner '\n                                                                'Headline',\n                                       'subitem_1565671178623': 'Subheading'},\n                                      {'subitem_1565671149650': 'en',\n                                       'subitem_1565671169640': 'Banner '\n                                                                'Headline',\n                                       'subitem_1565671178623': 'Subheding'}],\n               'item_1617944105607': [{'subitem_1551256015892': [{'subitem_1551256027296': 'xxxxxx',\n                                                                  'subitem_1551256029891': 'kakenhi'}],\n                                       'subitem_1551256037922': [{'subitem_1551256042287': 'Degree '\n                                                                                           'Grantor '\n                                                                                           'Name',\n                                                                  'subitem_1551256047619': 'en'}]}],\n               'pubdate': '2021-03-19'},\n  'pos_index': ['Index A'],\n  'publish_status': 'public',\n  'warnings': ['The following items are not registered because they do not '\n               'exist in the specified item type. '\n               'item_1617186331708[0].subitem_1551255647225, '\n               'item_1617186331708[0].subitem_1551255648112, '\n               'item_1617186331708[1].subitem_1551255647225, '\n               'item_1617186331708[1].subitem_1551255648112, '\n               'item_1617186385884[0].subitem_1551255720400, '\n               'item_1617186385884[0].subitem_1551255721061, '\n               'item_1617186385884[1].subitem_1551255720400, '\n               'item_1617186385884[1].subitem_1551255721061, '\n               'item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, '\n               'item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, '\n               'item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, '\n               'item_1617186419668[0].creatorAffiliations[0].affiliationNames[0].affiliationName, '\n               'item_1617186419668[0].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, '\n               'item_1617186419668[0].creatorAlternatives[0].creatorAlternative, '\n               'item_1617186419668[0].creatorAlternatives[0].creatorAlternativeLang, '\n               'item_1617186419668[0].creatorMails[0].creatorMail, '\n               'item_1617186419668[0].creatorNames[0].creatorName, '\n               'item_1617186419668[0].creatorNames[0].creatorNameLang, '\n               'item_1617186419668[0].creatorNames[1].creatorName, '\n               'item_1617186419668[0].creatorNames[1].creatorNameLang, '\n               'item_1617186419668[0].creatorNames[2].creatorName, '\n               'item_1617186419668[0].creatorNames[2].creatorNameLang, '\n               'item_1617186419668[0].familyNames[0].familyName, '\n               'item_1617186419668[0].familyNames[0].familyNameLang, '\n               'item_1617186419668[0].familyNames[1].familyName, '\n               'item_1617186419668[0].familyNames[1].familyNameLang, '\n               'item_1617186419668[0].familyNames[2].familyName, '\n               'item_1617186419668[0].familyNames[2].familyNameLang, '\n               'item_1617186419668[0].givenNames[0].givenName, '\n               'item_1617186419668[0].givenNames[0].givenNameLang, '\n               'item_1617186419668[0].givenNames[1].givenName, '\n               'item_1617186419668[0].givenNames[1].givenNameLang, '\n               'item_1617186419668[0].givenNames[2].givenName, '\n               'item_1617186419668[0].givenNames[2].givenNameLang, '\n               'item_1617186419668[0].nameIdentifiers[0].nameIdentifier, '\n               'item_1617186419668[0].nameIdentifiers[0].nameIdentifierScheme, '\n               'item_1617186419668[0].nameIdentifiers[0].nameIdentifierURI, '\n               'item_1617186419668[0].nameIdentifiers[1].nameIdentifier, '\n               'item_1617186419668[0].nameIdentifiers[1].nameIdentifierScheme, '\n               'item_1617186419668[0].nameIdentifiers[1].nameIdentifierURI, '\n               'item_1617186419668[0].nameIdentifiers[2].nameIdentifier, '\n               'item_1617186419668[0].nameIdentifiers[2].nameIdentifierScheme, '\n               'item_1617186419668[0].nameIdentifiers[2].nameIdentifierURI, '\n               'item_1617186419668[0].nameIdentifiers[3].nameIdentifier, '\n               'item_1617186419668[0].nameIdentifiers[3].nameIdentifierScheme, '\n               'item_1617186419668[0].nameIdentifiers[3].nameIdentifierURI, '\n               'item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, '\n               'item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, '\n               'item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, '\n               'item_1617186419668[1].creatorAffiliations[0].affiliationNames[0].affiliationName, '\n               'item_1617186419668[1].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, '\n               'item_1617186419668[1].creatorAlternatives[0].creatorAlternative, '\n               'item_1617186419668[1].creatorAlternatives[0].creatorAlternativeLang, '\n               'item_1617186419668[1].creatorMails[0].creatorMail, '\n               'item_1617186419668[1].creatorNames[0].creatorName, '\n               'item_1617186419668[1].creatorNames[0].creatorNameLang, '\n               'item_1617186419668[1].creatorNames[1].creatorName, '\n               'item_1617186419668[1].creatorNames[1].creatorNameLang, '\n               'item_1617186419668[1].creatorNames[2].creatorName, '\n               'item_1617186419668[1].creatorNames[2].creatorNameLang, '\n               'item_1617186419668[1].familyNames[0].familyName, '\n               'item_1617186419668[1].familyNames[0].familyNameLang, '\n               'item_1617186419668[1].familyNames[1].familyName, '\n               'item_1617186419668[1].familyNames[1].familyNameLang, '\n               'item_1617186419668[1].familyNames[2].familyName, '\n               'item_1617186419668[1].familyNames[2].familyNameLang, '\n               'item_1617186419668[1].givenNames[0].givenName, '\n               'item_1617186419668[1].givenNames[0].givenNameLang, '\n               'item_1617186419668[1].givenNames[1].givenName, '\n               'item_1617186419668[1].givenNames[1].givenNameLang, '\n               'item_1617186419668[1].givenNames[2].givenName, '\n               'item_1617186419668[1].givenNames[2].givenNameLang, '\n               'item_1617186419668[1].nameIdentifiers[0].nameIdentifier, '\n               'item_1617186419668[1].nameIdentifiers[0].nameIdentifierScheme, '\n               'item_1617186419668[1].nameIdentifiers[0].nameIdentifierURI, '\n               'item_1617186419668[1].nameIdentifiers[1].nameIdentifier, '\n               'item_1617186419668[1].nameIdentifiers[1].nameIdentifierScheme, '\n               'item_1617186419668[1].nameIdentifiers[1].nameIdentifierURI, '\n               'item_1617186419668[1].nameIdentifiers[2].nameIdentifier, '\n               'item_1617186419668[1].nameIdentifiers[2].nameIdentifierScheme, '\n               'item_1617186419668[1].nameIdentifiers[2].nameIdentifierURI, '\n               'item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, '\n               'item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, '\n               'item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, '\n               'item_1617186419668[2].creatorAffiliations[0].affiliationNames[0].affiliationName, '\n               'item_1617186419668[2].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, '\n               'item_1617186419668[2].creatorAlternatives[0].creatorAlternative, '\n               'item_1617186419668[2].creatorAlternatives[0].creatorAlternativeLang, '\n               'item_1617186419668[2].creatorMails[0].creatorMail, '\n               'item_1617186419668[2].creatorNames[0].creatorName, '\n               'item_1617186419668[2].creatorNames[0].creatorNameLang, '\n               'item_1617186419668[2].creatorNames[1].creatorName, '\n               'item_1617186419668[2].creatorNames[1].creatorNameLang, '\n               'item_1617186419668[2].creatorNames[2].creatorName, '\n               'item_1617186419668[2].creatorNames[2].creatorNameLang, '\n               'item_1617186419668[2].familyNames[0].familyName, '\n               'item_1617186419668[2].familyNames[0].familyNameLang, '\n               'item_1617186419668[2].familyNames[1].familyName, '\n               'item_1617186419668[2].familyNames[1].familyNameLang, '\n               'item_1617186419668[2].familyNames[2].familyName, '\n               'item_1617186419668[2].familyNames[2].familyNameLang, '\n               'item_1617186419668[2].givenNames[0].givenName, '\n               'item_1617186419668[2].givenNames[0].givenNameLang, '\n               'item_1617186419668[2].givenNames[1].givenName, '\n               'item_1617186419668[2].givenNames[1].givenNameLang, '\n               'item_1617186419668[2].givenNames[2].givenName, '\n               'item_1617186419668[2].givenNames[2].givenNameLang, '\n               'item_1617186419668[2].nameIdentifiers[0].nameIdentifier, '\n               'item_1617186419668[2].nameIdentifiers[0].nameIdentifierScheme, '\n               'item_1617186419668[2].nameIdentifiers[0].nameIdentifierURI, '\n               'item_1617186419668[2].nameIdentifiers[1].nameIdentifier, '\n               'item_1617186419668[2].nameIdentifiers[1].nameIdentifierScheme, '\n               'item_1617186419668[2].nameIdentifiers[1].nameIdentifierURI, '\n               'item_1617186419668[2].nameIdentifiers[2].nameIdentifier, '\n               'item_1617186419668[2].nameIdentifiers[2].nameIdentifierScheme, '\n               'item_1617186419668[2].nameIdentifiers[2].nameIdentifierURI, '\n               'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationNameIdentifier, '\n               'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationScheme, '\n               'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationURI, '\n               'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNames[0].contributorAffiliationName, '\n               'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNames[0].contributorAffiliationNameLang, '\n               'item_1617349709064[0].contributorAlternatives[0].contributorAlternative, '\n               'item_1617349709064[0].contributorAlternatives[0].contributorAlternativeLang, '\n               'item_1617349709064[0].contributorMails[0].contributorMail, '\n               'item_1617349709064[0].contributorNames[0].contributorName, '\n               'item_1617349709064[0].contributorNames[0].lang, '\n               'item_1617349709064[0].contributorNames[1].contributorName, '\n               'item_1617349709064[0].contributorNames[1].lang, '\n               'item_1617349709064[0].contributorNames[2].contributorName, '\n               'item_1617349709064[0].contributorNames[2].lang, '\n               'item_1617349709064[0].contributorType, '\n               'item_1617349709064[0].familyNames[0].familyName, '\n               'item_1617349709064[0].familyNames[0].familyNameLang, '\n               'item_1617349709064[0].familyNames[1].familyName, '\n               'item_1617349709064[0].familyNames[1].familyNameLang, '\n               'item_1617349709064[0].familyNames[2].familyName, '\n               'item_1617349709064[0].familyNames[2].familyNameLang, '\n               'item_1617349709064[0].givenNames[0].givenName, '\n               'item_1617349709064[0].givenNames[0].givenNameLang, '\n               'item_1617349709064[0].givenNames[1].givenName, '\n               'item_1617349709064[0].givenNames[1].givenNameLang, '\n               'item_1617349709064[0].givenNames[2].givenName, '\n               'item_1617349709064[0].givenNames[2].givenNameLang, '\n               'item_1617349709064[0].nameIdentifiers[0].nameIdentifier, '\n               'item_1617349709064[0].nameIdentifiers[0].nameIdentifierScheme, '\n               'item_1617349709064[0].nameIdentifiers[0].nameIdentifierURI, '\n               'item_1617349709064[0].nameIdentifiers[1].nameIdentifier, '\n               'item_1617349709064[0].nameIdentifiers[1].nameIdentifierScheme, '\n               'item_1617349709064[0].nameIdentifiers[1].nameIdentifierURI, '\n               'item_1617349709064[0].nameIdentifiers[2].nameIdentifier, '\n               'item_1617349709064[0].nameIdentifiers[2].nameIdentifierScheme, '\n               'item_1617349709064[0].nameIdentifiers[2].nameIdentifierURI, '\n               'item_1617186476635.subitem_1522299639480, '\n               'item_1617186476635.subitem_1600958577026, '\n               'item_1617351524846.subitem_1523260933860, '\n               'item_1617186499011[0].subitem_1522650717957, '\n               'item_1617186499011[0].subitem_1522650727486, '\n               'item_1617186499011[0].subitem_1522651041219, '\n               'item_1617610673286[0].nameIdentifiers[0].nameIdentifier, '\n               'item_1617610673286[0].nameIdentifiers[0].nameIdentifierScheme, '\n               'item_1617610673286[0].nameIdentifiers[0].nameIdentifierURI, '\n               'item_1617610673286[0].rightHolderNames[0].rightHolderLanguage, '\n               'item_1617610673286[0].rightHolderNames[0].rightHolderName, '\n               'item_1617186609386[0].subitem_1522299896455, '\n               'item_1617186609386[0].subitem_1522300014469, '\n               'item_1617186609386[0].subitem_1522300048512, '\n               'item_1617186609386[0].subitem_1523261968819, '\n               'item_1617186626617[0].subitem_description, '\n               'item_1617186626617[0].subitem_description_language, '\n               'item_1617186626617[0].subitem_description_type, '\n               'item_1617186626617[1].subitem_description, '\n               'item_1617186626617[1].subitem_description_language, '\n               'item_1617186626617[1].subitem_description_type, '\n               'item_1617186643794[0].subitem_1522300295150, '\n               'item_1617186643794[0].subitem_1522300316516, '\n               'item_1617186660861[0].subitem_1522300695726, '\n               'item_1617186660861[0].subitem_1522300722591, '\n               'item_1617186702042[0].subitem_1551255818386, '\n               'item_1617258105262.resourcetype, '\n               'item_1617258105262.resourceuri, '\n               'item_1617349808926.subitem_1523263171732, '\n               'item_1617265215918.subitem_1522305645492, '\n               'item_1617265215918.subitem_1600292170262, '\n               'item_1617186783814[0].subitem_identifier_type, '\n               'item_1617186783814[0].subitem_identifier_uri, '\n               'item_1617186819068.subitem_identifier_reg_text, '\n               'item_1617186819068.subitem_identifier_reg_type, '\n               'item_1617353299429[0].subitem_1522306207484, '\n               'item_1617353299429[0].subitem_1522306287251.subitem_1522306382014, '\n               'item_1617353299429[0].subitem_1522306287251.subitem_1522306436033, '\n               'item_1617353299429[0].subitem_1523320863692[0].subitem_1523320867455, '\n               'item_1617353299429[0].subitem_1523320863692[0].subitem_1523320909613, '\n               'item_1617186859717[0].subitem_1522658018441, '\n               'item_1617186859717[0].subitem_1522658031721, '\n               'item_1617186882738[0].subitem_geolocation_box.subitem_east_longitude, '\n               'item_1617186882738[0].subitem_geolocation_box.subitem_north_latitude, '\n               'item_1617186882738[0].subitem_geolocation_box.subitem_south_latitude, '\n               'item_1617186882738[0].subitem_geolocation_box.subitem_west_longitude, '\n               'item_1617186882738[0].subitem_geolocation_place[0].subitem_geolocation_place_text, '\n               'item_1617186882738[0].subitem_geolocation_point.subitem_point_latitude, '\n               'item_1617186882738[0].subitem_geolocation_point.subitem_point_longitude, '\n               'item_1617186901218[0].subitem_1522399143519.subitem_1522399281603, '\n               'item_1617186901218[0].subitem_1522399143519.subitem_1522399333375, '\n               'item_1617186901218[0].subitem_1522399412622[0].subitem_1522399416691, '\n               'item_1617186901218[0].subitem_1522399412622[0].subitem_1522737543681, '\n               'item_1617186901218[0].subitem_1522399571623.subitem_1522399585738, '\n               'item_1617186901218[0].subitem_1522399571623.subitem_1522399628911, '\n               'item_1617186901218[0].subitem_1522399651758[0].subitem_1522721910626, '\n               'item_1617186901218[0].subitem_1522399651758[0].subitem_1522721929892, '\n               'item_1617186920753[0].subitem_1522646500366, '\n               'item_1617186920753[0].subitem_1522646572813, '\n               'item_1617186941041[0].subitem_1522650068558, '\n               'item_1617186941041[0].subitem_1522650091861, '\n               'item_1617186959569.subitem_1551256328147, '\n               'item_1617186981471.subitem_1551256294723, '\n               'item_1617186994930.subitem_1551256248092, '\n               'item_1617187024783.subitem_1551256198917, '\n               'item_1617187045071.subitem_1551256185532, '\n               'item_1617187056579.bibliographicIssueDates.bibliographicIssueDate, '\n               'item_1617187056579.bibliographicIssueDates.bibliographicIssueDateType, '\n               'item_1617187056579.bibliographicIssueNumber, '\n               'item_1617187056579.bibliographicNumberOfPages, '\n               'item_1617187056579.bibliographicPageEnd, '\n               'item_1617187056579.bibliographicPageStart, '\n               'item_1617187056579.bibliographicVolumeNumber, '\n               'item_1617187056579.bibliographic_titles[0].bibliographic_title, '\n               'item_1617187056579.bibliographic_titles[0].bibliographic_titleLang, '\n               'item_1617187087799.subitem_1551256171004, '\n               'item_1617187112279[0].subitem_1551256126428, '\n               'item_1617187112279[0].subitem_1551256129013, '\n               'item_1617187136212.subitem_1551256096004, '\n               'item_1617944105607[0].subitem_1551256015892[0].subitem_1551256027296, '\n               'item_1617944105607[0].subitem_1551256015892[0].subitem_1551256029891, '\n               'item_1617944105607[0].subitem_1551256037922[0].subitem_1551256042287, '\n               'item_1617944105607[0].subitem_1551256037922[0].subitem_1551256047619, '\n               'item_1617187187528[0].subitem_1599711633003[0].subitem_1599711636923, '\n               'item_1617187187528[0].subitem_1599711633003[0].subitem_1599711645590, '\n               'item_1617187187528[0].subitem_1599711655652, '\n               'item_1617187187528[0].subitem_1599711660052[0].subitem_1599711680082, '\n               'item_1617187187528[0].subitem_1599711660052[0].subitem_1599711686511, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711704251, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711712451, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711727603, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711731891, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711735410, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711739022, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711743722, '\n               'item_1617187187528[0].subitem_1599711699392.subitem_1599711745532, '\n               'item_1617187187528[0].subitem_1599711758470[0].subitem_1599711769260, '\n               'item_1617187187528[0].subitem_1599711758470[0].subitem_1599711775943, '\n               'item_1617187187528[0].subitem_1599711788485[0].subitem_1599711798761, '\n               'item_1617187187528[0].subitem_1599711788485[0].subitem_1599711803382, '\n               'item_1617187187528[0].subitem_1599711813532, '\n               'item_1617605131499[0].accessrole, '\n               'item_1617605131499[0].date[0].dateType, '\n               'item_1617605131499[0].date[0].dateValue, '\n               'item_1617605131499[0].displaytype, '\n               'item_1617605131499[0].fileDate[0].fileDateType, '\n               'item_1617605131499[0].fileDate[0].fileDateValue, '\n               'item_1617605131499[0].filename, '\n               'item_1617605131499[0].filesize[0].value, '\n               'item_1617605131499[0].format, item_1617605131499[0].groups, '\n               'item_1617605131499[0].licensefree, '\n               'item_1617605131499[0].licensetype, '\n               'item_1617605131499[0].url.label, '\n               'item_1617605131499[0].url.objectType, '\n               'item_1617605131499[0].url.url, item_1617605131499[0].version, '\n               'item_1617605131499[1].accessrole, '\n               'item_1617605131499[1].date[0].dateType, '\n               'item_1617605131499[1].date[0].dateValue, '\n               'item_1617605131499[1].displaytype, '\n               'item_1617605131499[1].fileDate[0].fileDateType, '\n               'item_1617605131499[1].fileDate[0].fileDateValue, '\n               'item_1617605131499[1].filename, '\n               'item_1617605131499[1].filesize[0].value, '\n               'item_1617605131499[1].format, item_1617605131499[1].groups, '\n               'item_1617605131499[1].licensefree, '\n               'item_1617605131499[1].licensetype, '\n               'item_1617605131499[1].url.label, '\n               'item_1617605131499[1].url.objectType, '\n               'item_1617605131499[1].url.url, item_1617605131499[1].version, '\n               'item_1617620223087[0].subitem_1565671149650, '\n               'item_1617620223087[0].subitem_1565671169640, '\n               'item_1617620223087[0].subitem_1565671178623, '\n               'item_1617620223087[1].subitem_1565671149650, '\n               'item_1617620223087[1].subitem_1565671169640, '\n               'item_1617620223087[1].subitem_1565671178623']}] == [{'$schema': 'https://localhost:8443/items/jsonschema/15',\n  'edit_mode': 'Keep',\n  'errors': None,\n  'feedback_mail': ['wekosoftware@nii.ac.jp'],\n  'file_path': ['file00000001/1KB.pdf', ''],\n  'identifier_key': 'item_1617186819068',\n  'item_type_id': 15,\n  'item_type_name': '',\n  'metadata': {'item_1617186331708': [{'subitem_1551255647225': 'ja_conference '\n                                                                'paperITEM00000001(public_open_access_open_access_simple)',\n                                       'subitem_1551255648112': 'ja'},\n                                      {'subitem_1551255647225': 'en_conference '\n                                                                'paperITEM00000001(public_open_access_simple)',\n                                       'subitem_1551255648112': 'en'}],\n               'item_1617186385884': [{'subitem_1551255720400': 'Alternative '\n                                                                'Title',\n                                       'subitem_1551255721061': 'en'},\n                                      {'subitem_1551255720400': 'Alternative '\n                                                                'Title',\n                                       'subitem_1551255721061': 'ja'}],\n               'item_1617186419668': [{'creatorAffiliations': [{'affiliationNameIdentifiers': [{'affiliationNameIdentifier': '0000000121691048',\n                                                                                                'affiliationNameIdentifierScheme': 'ISNI',\n                                                                                                'affiliationNameIdentifierURI': 'http://isni.org/isni/0000000121691048'}],\n                                                                'affiliationNames': [{'affiliationName': 'University',\n                                                                                      'affiliationNameLang': 'en'}]}],\n                                       'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'creatorNames': [{'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja'},\n                                                        {'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja-Kana'},\n                                                        {'creatorName': 'Joho, '\n                                                                        'Taro',\n                                                         'creatorNameLang': 'en'}],\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': '4',\n                                                            'nameIdentifierScheme': 'WEKO'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'zzzzzzz',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]},\n                                      {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'creatorNames': [{'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja'},\n                                                        {'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja-Kana'},\n                                                        {'creatorName': 'Joho, '\n                                                                        'Taro',\n                                                         'creatorNameLang': 'en'}],\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'zzzzzzz',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]},\n                                      {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'creatorNames': [{'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja'},\n                                                        {'creatorName': ', '\n                                                                        '',\n                                                         'creatorNameLang': 'ja-Kana'},\n                                                        {'creatorName': 'Joho, '\n                                                                        'Taro',\n                                                         'creatorNameLang': 'en'}],\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'zzzzzzz',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}],\n               'item_1617186476635': {'subitem_1522299639480': 'open access',\n                                      'subitem_1600958577026': 'http://purl.org/coar/access_right/c_abf2'},\n               'item_1617186499011': [{'subitem_1522650717957': 'ja',\n                                       'subitem_1522650727486': 'http://localhost',\n                                       'subitem_1522651041219': 'Rights '\n                                                                'Information'}],\n               'item_1617186609386': [{'subitem_1522299896455': 'ja',\n                                       'subitem_1522300014469': 'Other',\n                                       'subitem_1522300048512': 'http://localhost/',\n                                       'subitem_1523261968819': 'Sibject1'}],\n               'item_1617186626617': [{'subitem_description': 'Description\n'\n                                                              'Description<br/>Description',\n                                       'subitem_description_language': 'en',\n                                       'subitem_description_type': 'Abstract'},\n                                      {'subitem_description': '\n\n\n',\n                                       'subitem_description_language': 'ja',\n                                       'subitem_description_type': 'Abstract'}],\n               'item_1617186643794': [{'subitem_1522300295150': 'en',\n                                       'subitem_1522300316516': 'Publisher'}],\n               'item_1617186660861': [{'subitem_1522300695726': 'Available',\n                                       'subitem_1522300722591': '2021-06-30'}],\n               'item_1617186702042': [{'subitem_1551255818386': 'jpn'}],\n               'item_1617186783814': [{'subitem_identifier_type': 'URI',\n                                       'subitem_identifier_uri': 'http://localhost'}],\n               'item_1617186859717': [{'subitem_1522658018441': 'en',\n                                       'subitem_1522658031721': 'Temporal'}],\n               'item_1617186882738': [{'subitem_geolocation_place': [{'subitem_geolocation_place_text': 'Japan'}]}],\n               'item_1617186901218': [{'subitem_1522399143519': {'subitem_1522399281603': 'ISNI',\n                                                                 'subitem_1522399333375': 'http://xxx'},\n                                       'subitem_1522399412622': [{'subitem_1522399416691': 'en',\n                                                                  'subitem_1522737543681': 'Funder '\n                                                                                           'Name'}],\n                                       'subitem_1522399571623': {'subitem_1522399585738': 'Award '\n                                                                                          'URI',\n                                                                 'subitem_1522399628911': 'Award '\n                                                                                          'Number'},\n                                       'subitem_1522399651758': [{'subitem_1522721910626': 'en',\n                                                                  'subitem_1522721929892': 'Award '\n                                                                                           'Title'}]}],\n               'item_1617186920753': [{'subitem_1522646500366': 'ISSN',\n                                       'subitem_1522646572813': 'xxxx-xxxx-xxxx'}],\n               'item_1617186941041': [{'subitem_1522650068558': 'en',\n                                       'subitem_1522650091861': 'Source '\n                                                                'Title'}],\n               'item_1617186959569': {'subitem_1551256328147': '1'},\n               'item_1617186981471': {'subitem_1551256294723': '111'},\n               'item_1617186994930': {'subitem_1551256248092': '12'},\n               'item_1617187024783': {'subitem_1551256198917': '1'},\n               'item_1617187045071': {'subitem_1551256185532': '3'},\n               'item_1617187112279': [{'subitem_1551256126428': 'Degree Name',\n                                       'subitem_1551256129013': 'en'}],\n               'item_1617187136212': {'subitem_1551256096004': '2021-06-30'},\n               'item_1617187187528': [{'subitem_1599711633003': [{'subitem_1599711636923': 'Conference '\n                                                                                           'Name',\n                                                                  'subitem_1599711645590': 'ja'}],\n                                       'subitem_1599711655652': '1',\n                                       'subitem_1599711660052': [{'subitem_1599711680082': 'Sponsor',\n                                                                  'subitem_1599711686511': 'ja'}],\n                                       'subitem_1599711699392': {'subitem_1599711704251': '2020/12/11',\n                                                                 'subitem_1599711712451': '1',\n                                                                 'subitem_1599711727603': '12',\n                                                                 'subitem_1599711731891': '2000',\n                                                                 'subitem_1599711735410': '1',\n                                                                 'subitem_1599711739022': '12',\n                                                                 'subitem_1599711743722': '2020',\n                                                                 'subitem_1599711745532': 'ja'},\n                                       'subitem_1599711758470': [{'subitem_1599711769260': 'Conference '\n                                                                                           'Venue',\n                                                                  'subitem_1599711775943': 'ja'}],\n                                       'subitem_1599711788485': [{'subitem_1599711798761': 'Conference '\n                                                                                           'Place',\n                                                                  'subitem_1599711803382': 'ja'}],\n                                       'subitem_1599711813532': 'JPN'}],\n               'item_1617258105262': {'resourcetype': 'conference paper',\n                                      'resourceuri': 'http://purl.org/coar/resource_type/c_5794'},\n               'item_1617265215918': {'subitem_1522305645492': 'AO',\n                                      'subitem_1600292170262': 'http://purl.org/coar/version/c_b1a7d7d4d402bcce'},\n               'item_1617349709064': [{'contributorMails': [{'contributorMail': 'wekosoftware@nii.ac.jp'}],\n                                       'contributorNames': [{'contributorName': ', '\n                                                                                '',\n                                                             'lang': 'ja'},\n                                                            {'contributorName': ', '\n                                                                                '',\n                                                             'lang': 'ja-Kana'},\n                                                            {'contributorName': 'Joho, '\n                                                                                'Taro',\n                                                             'lang': 'en'}],\n                                       'contributorType': 'ContactPerson',\n                                       'familyNames': [{'familyName': '',\n                                                        'familyNameLang': 'ja'},\n                                                       {'familyName': '',\n                                                        'familyNameLang': 'ja-Kana'},\n                                                       {'familyName': 'Joho',\n                                                        'familyNameLang': 'en'}],\n                                       'givenNames': [{'givenName': '',\n                                                       'givenNameLang': 'ja'},\n                                                      {'givenName': '',\n                                                       'givenNameLang': 'ja-Kana'},\n                                                      {'givenName': 'Taro',\n                                                       'givenNameLang': 'en'}],\n                                       'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'CiNii',\n                                                            'nameIdentifierURI': 'https://ci.nii.ac.jp/'},\n                                                           {'nameIdentifier': 'xxxxxxx',\n                                                            'nameIdentifierScheme': 'KAKEN2',\n                                                            'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}],\n               'item_1617349808926': {'subitem_1523263171732': 'Version'},\n               'item_1617351524846': {'subitem_1523260933860': 'Unknown'},\n               'item_1617353299429': [{'subitem_1522306207484': 'isVersionOf',\n                                       'subitem_1522306287251': {'subitem_1522306382014': 'arXiv',\n                                                                 'subitem_1522306436033': 'xxxxx'},\n                                       'subitem_1523320863692': [{'subitem_1523320867455': 'en',\n                                                                  'subitem_1523320909613': 'Related '\n                                                                                           'Title'}]}],\n               'item_1617605131499': [{'accessrole': 'open_access',\n                                       'date': [{'dateType': 'Available',\n                                                 'dateValue': '2021-07-12'}],\n                                       'displaytype': 'simple',\n                                       'filename': '1KB.pdf',\n                                       'filesize': [{'value': '1 KB'}],\n                                       'format': 'text/plain'},\n                                      {'filename': ''}],\n               'item_1617610673286': [{'nameIdentifiers': [{'nameIdentifier': 'xxxxxx',\n                                                            'nameIdentifierScheme': 'ORCID',\n                                                            'nameIdentifierURI': 'https://orcid.org/'}],\n                                       'rightHolderNames': [{'rightHolderLanguage': 'ja',\n                                                             'rightHolderName': 'Right '\n                                                                                'Holder '\n                                                                                'Name'}]}],\n               'item_1617620223087': [{'subitem_1565671149650': 'ja',\n                                       'subitem_1565671169640': 'Banner '\n                                                                'Headline',\n                                       'subitem_1565671178623': 'Subheading'},\n                                      {'subitem_1565671149650': 'en',\n                                       'subitem_1565671169640': 'Banner '\n                                                                'Headline',\n                                       'subitem_1565671178623': 'Subheding'}],\n               'item_1617944105607': [{'subitem_1551256015892': [{'subitem_1551256027296': 'xxxxxx',\n                                                                  'subitem_1551256029891': 'kakenhi'}],\n                                       'subitem_1551256037922': [{'subitem_1551256042287': 'Degree '\n                                                                                           'Grantor '\n                                                                                           'Name',\n                                                                  'subitem_1551256047619': 'en'}]}],\n               'pubdate': '2021-03-19'},\n  'pos_index': ['Index A'],\n  'publish_status': 'public'}]
E                 At index 0 diff: {'pos_index': ['Index A'], 'publish_status': 'public', 'feedback_mail': ['wekosoftware@nii.ac.jp'], 'edit_mode': 'Keep', 'metadata': {'pubdate': '2021-03-19', 'item_1617186331708': [{'subitem_1551255647225': 'ja_conference paperITEM00000001(public_open_access_open_access_simple)', 'subitem_1551255648112': 'ja'}, {'subitem_1551255647225': 'en_conference paperITEM00000001(public_open_access_simple)', 'subitem_1551255648112': 'en'}], 'item_1617186385884': [{'subitem_1551255720400': 'Alternative Title', 'subitem_1551255721061': 'en'}, {'subitem_1551255720400': 'Alternative Title', 'subitem_1551255721061': 'ja'}], 'item_1617186419668': [{'creatorAffiliations': [{'affiliationNameIdentifiers': [{'affiliationNameIdentifier': '0000000121691048', 'affiliationNameIdentifierScheme': 'ISNI', 'affiliationNameIdentifierURI': 'http://isni.org/isni/0000000121691048'}], 'affiliationNames': [{'affiliationName': 'University', 'affiliationNameLang': 'en'}]}], 'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}], 'creatorNames': [{'creatorName': ', ', 'creatorNameLang': 'ja'}, {'creatorName': ', ', 'creatorNameLang': 'ja-Kana'}, {'creatorName': 'Joho, Taro', 'creatorNameLang': 'en'}], 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': '4', 'nameIdentifierScheme': 'WEKO'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'zzzzzzz', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}, {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}], 'creatorNames': [{'creatorName': ', ', 'creatorNameLang': 'ja'}, {'creatorName': ', ', 'creatorNameLang': 'ja-Kana'}, {'creatorName': 'Joho, Taro', 'creatorNameLang': 'en'}], 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'zzzzzzz', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}, {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}], 'creatorNames': [{'creatorName': ', ', 'creatorNameLang': 'ja'}, {'creatorName': ', ', 'creatorNameLang': 'ja-Kana'}, {'creatorName': 'Joho, Taro', 'creatorNameLang': 'en'}], 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'zzzzzzz', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}], 'item_1617349709064': [{'contributorMails': [{'contributorMail': 'wekosoftware@nii.ac.jp'}], 'contributorNames': [{'contributorName': ', ', 'lang': 'ja'}, {'contributorName': ', ', 'lang': 'ja-Kana'}, {'contributorName': 'Joho, Taro', 'lang': 'en'}], 'contributorType': 'ContactPerson', 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}], 'item_1617186476635': {'subitem_1522299639480': 'open access', 'subitem_1600958577026': 'http://purl.org/coar/access_right/c_abf2'}, 'item_1617351524846': {'subitem_1523260933860': 'Unknown'}, 'item_1617186499011': [{'subitem_1522650717957': 'ja', 'subitem_1522650727486': 'http://localhost', 'subitem_1522651041219': 'Rights Information'}], 'item_1617610673286': [{'nameIdentifiers': [{'nameIdentifier': 'xxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}], 'rightHolderNames': [{'rightHolderLanguage': 'ja', 'rightHolderName': 'Right Holder Name'}]}], 'item_1617186609386': [{'subitem_1522299896455': 'ja', 'subitem_1522300014469': 'Other', 'subitem_1522300048512': 'http://localhost/', 'subitem_1523261968819': 'Sibject1'}], 'item_1617186626617': [{'subitem_description': 'Description\nDescription<br/>Description', 'subitem_description_language': 'en', 'subitem_description_type': 'Abstract'}, {'subitem_description': '\n\n\n', 'subitem_description_language': 'ja', 'subitem_description_type': 'Abstract'}], 'item_1617186643794': [{'subitem_1522300295150': 'en', 'subitem_1522300316516': 'Publisher'}], 'item_1617186660861': [{'subitem_1522300695726': 'Available', 'subitem_1522300722591': '2021-06-30'}], 'item_1617186702042': [{'subitem_1551255818386': 'jpn'}], 'item_1617258105262': {'resourcetype': 'conference paper', 'resourceuri': 'http://purl.org/coar/resource_type/c_5794'}, 'item_1617349808926': {'subitem_1523263171732': 'Version'}, 'item_1617265215918': {'subitem_1522305645492': 'AO', 'subitem_1600292170262': 'http://purl.org/coar/version/c_b1a7d7d4d402bcce'}, 'item_1617186783814': [{'subitem_identifier_type': 'URI', 'subitem_identifier_uri': 'http://localhost'}], 'item_1617353299429': [{'subitem_1522306207484': 'isVersionOf', 'subitem_1522306287251': {'subitem_1522306382014': 'arXiv', 'subitem_1522306436033': 'xxxxx'}, 'subitem_1523320863692': [{'subitem_1523320867455': 'en', 'subitem_1523320909613': 'Related Title'}]}], 'item_1617186859717': [{'subitem_1522658018441': 'en', 'subitem_1522658031721': 'Temporal'}], 'item_1617186882738': [{'subitem_geolocation_place': [{'subitem_geolocation_place_text': 'Japan'}]}], 'item_1617186901218': [{'subitem_1522399143519': {'subitem_1522399281603': 'ISNI', 'subitem_1522399333375': 'http://xxx'}, 'subitem_1522399412622': [{'subitem_1522399416691': 'en', 'subitem_1522737543681': 'Funder Name'}], 'subitem_1522399571623': {'subitem_1522399585738': 'Award URI', 'subitem_1522399628911': 'Award Number'}, 'subitem_1522399651758': [{'subitem_1522721910626': 'en', 'subitem_1522721929892': 'Award Title'}]}], 'item_1617186920753': [{'subitem_1522646500366': 'ISSN', 'subitem_1522646572813': 'xxxx-xxxx-xxxx'}], 'item_1617186941041': [{'subitem_1522650068558': 'en', 'subitem_1522650091861': 'Source Title'}], 'item_1617186959569': {'subitem_1551256328147': '1'}, 'item_1617186981471': {'subitem_1551256294723': '111'}, 'item_1617186994930': {'subitem_1551256248092': '12'}, 'item_1617187024783': {'subitem_1551256198917': '1'}, 'item_1617187045071': {'subitem_1551256185532': '3'}, 'item_1617187112279': [{'subitem_1551256126428': 'Degree Name', 'subitem_1551256129013': 'en'}], 'item_1617187136212': {'subitem_1551256096004': '2021-06-30'}, 'item_1617944105607': [{'subitem_1551256015892': [{'subitem_1551256027296': 'xxxxxx', 'subitem_1551256029891': 'kakenhi'}], 'subitem_1551256037922': [{'subitem_1551256042287': 'Degree Grantor Name', 'subitem_1551256047619': 'en'}]}], 'item_1617187187528': [{'subitem_1599711633003': [{'subitem_1599711636923': 'Conference Name', 'subitem_1599711645590': 'ja'}], 'subitem_1599711655652': '1', 'subitem_1599711660052': [{'subitem_1599711680082': 'Sponsor', 'subitem_1599711686511': 'ja'}], 'subitem_1599711699392': {'subitem_1599711704251': '2020/12/11', 'subitem_1599711712451': '1', 'subitem_1599711727603': '12', 'subitem_1599711731891': '2000', 'subitem_1599711735410': '1', 'subitem_1599711739022': '12', 'subitem_1599711743722': '2020', 'subitem_1599711745532': 'ja'}, 'subitem_1599711758470': [{'subitem_1599711769260': 'Conference Venue', 'subitem_1599711775943': 'ja'}], 'subitem_1599711788485': [{'subitem_1599711798761': 'Conference Place', 'subitem_1599711803382': 'ja'}], 'subitem_1599711813532': 'JPN'}], 'item_1617605131499': [{'accessrole': 'open_access', 'date': [{'dateType': 'Available', 'dateValue': '2021-07-12'}], 'displaytype': 'simple', 'filename': '1KB.pdf', 'filesize': [{'value': '1 KB'}], 'format': 'text/plain'}, {'filename': ''}], 'item_1617620223087': [{'subitem_1565671149650': 'ja', 'subitem_1565671169640': 'Banner Headline', 'subitem_1565671178623': 'Subheading'}, {'subitem_1565671149650': 'en', 'subitem_1565671169640': 'Banner Headline', 'subitem_1565671178623': 'Subheding'}]}, 'file_path': ['file00000001/1KB.pdf', ''], 'item_type_name': '', 'item_type_id': 15, '$schema': 'https://localhost:8443/items/jsonschema/15', 'warnings': ['The following items are not registered because they do not exist in the specified item type. item_1617186331708[0].subitem_1551255647225, item_1617186331708[0].subitem_1551255648112, item_1617186331708[1].subitem_1551255647225, item_1617186331708[1].subitem_1551255648112, item_1617186385884[0].subitem_1551255720400, item_1617186385884[0].subitem_1551255721061, item_1617186385884[1].subitem_1551255720400, item_1617186385884[1].subitem_1551255721061, item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, item_1617186419668[0].creatorAffiliations[0].affiliationNames[0].affiliationName, item_1617186419668[0].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, item_1617186419668[0].creatorAlternatives[0].creatorAlternative, item_1617186419668[0].creatorAlternatives[0].creatorAlternativeLang, item_1617186419668[0].creatorMails[0].creatorMail, item_1617186419668[0].creatorNames[0].creatorName, item_1617186419668[0].creatorNames[0].creatorNameLang, item_1617186419668[0].creatorNames[1].creatorName, item_1617186419668[0].creatorNames[1].creatorNameLang, item_1617186419668[0].creatorNames[2].creatorName, item_1617186419668[0].creatorNames[2].creatorNameLang, item_1617186419668[0].familyNames[0].familyName, item_1617186419668[0].familyNames[0].familyNameLang, item_1617186419668[0].familyNames[1].familyName, item_1617186419668[0].familyNames[1].familyNameLang, item_1617186419668[0].familyNames[2].familyName, item_1617186419668[0].familyNames[2].familyNameLang, item_1617186419668[0].givenNames[0].givenName, item_1617186419668[0].givenNames[0].givenNameLang, item_1617186419668[0].givenNames[1].givenName, item_1617186419668[0].givenNames[1].givenNameLang, item_1617186419668[0].givenNames[2].givenName, item_1617186419668[0].givenNames[2].givenNameLang, item_1617186419668[0].nameIdentifiers[0].nameIdentifier, item_1617186419668[0].nameIdentifiers[0].nameIdentifierScheme, item_1617186419668[0].nameIdentifiers[0].nameIdentifierURI, item_1617186419668[0].nameIdentifiers[1].nameIdentifier, item_1617186419668[0].nameIdentifiers[1].nameIdentifierScheme, item_1617186419668[0].nameIdentifiers[1].nameIdentifierURI, item_1617186419668[0].nameIdentifiers[2].nameIdentifier, item_1617186419668[0].nameIdentifiers[2].nameIdentifierScheme, item_1617186419668[0].nameIdentifiers[2].nameIdentifierURI, item_1617186419668[0].nameIdentifiers[3].nameIdentifier, item_1617186419668[0].nameIdentifiers[3].nameIdentifierScheme, item_1617186419668[0].nameIdentifiers[3].nameIdentifierURI, item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, item_1617186419668[1].creatorAffiliations[0].affiliationNames[0].affiliationName, item_1617186419668[1].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, item_1617186419668[1].creatorAlternatives[0].creatorAlternative, item_1617186419668[1].creatorAlternatives[0].creatorAlternativeLang, item_1617186419668[1].creatorMails[0].creatorMail, item_1617186419668[1].creatorNames[0].creatorName, item_1617186419668[1].creatorNames[0].creatorNameLang, item_1617186419668[1].creatorNames[1].creatorName, item_1617186419668[1].creatorNames[1].creatorNameLang, item_1617186419668[1].creatorNames[2].creatorName, item_1617186419668[1].creatorNames[2].creatorNameLang, item_1617186419668[1].familyNames[0].familyName, item_1617186419668[1].familyNames[0].familyNameLang, item_1617186419668[1].familyNames[1].familyName, item_1617186419668[1].familyNames[1].familyNameLang, item_1617186419668[1].familyNames[2].familyName, item_1617186419668[1].familyNames[2].familyNameLang, item_1617186419668[1].givenNames[0].givenName, item_1617186419668[1].givenNames[0].givenNameLang, item_1617186419668[1].givenNames[1].givenName, item_1617186419668[1].givenNames[1].givenNameLang, item_1617186419668[1].givenNames[2].givenName, item_1617186419668[1].givenNames[2].givenNameLang, item_1617186419668[1].nameIdentifiers[0].nameIdentifier, item_1617186419668[1].nameIdentifiers[0].nameIdentifierScheme, item_1617186419668[1].nameIdentifiers[0].nameIdentifierURI, item_1617186419668[1].nameIdentifiers[1].nameIdentifier, item_1617186419668[1].nameIdentifiers[1].nameIdentifierScheme, item_1617186419668[1].nameIdentifiers[1].nameIdentifierURI, item_1617186419668[1].nameIdentifiers[2].nameIdentifier, item_1617186419668[1].nameIdentifiers[2].nameIdentifierScheme, item_1617186419668[1].nameIdentifiers[2].nameIdentifierURI, item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, item_1617186419668[2].creatorAffiliations[0].affiliationNames[0].affiliationName, item_1617186419668[2].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, item_1617186419668[2].creatorAlternatives[0].creatorAlternative, item_1617186419668[2].creatorAlternatives[0].creatorAlternativeLang, item_1617186419668[2].creatorMails[0].creatorMail, item_1617186419668[2].creatorNames[0].creatorName, item_1617186419668[2].creatorNames[0].creatorNameLang, item_1617186419668[2].creatorNames[1].creatorName, item_1617186419668[2].creatorNames[1].creatorNameLang, item_1617186419668[2].creatorNames[2].creatorName, item_1617186419668[2].creatorNames[2].creatorNameLang, item_1617186419668[2].familyNames[0].familyName, item_1617186419668[2].familyNames[0].familyNameLang, item_1617186419668[2].familyNames[1].familyName, item_1617186419668[2].familyNames[1].familyNameLang, item_1617186419668[2].familyNames[2].familyName, item_1617186419668[2].familyNames[2].familyNameLang, item_1617186419668[2].givenNames[0].givenName, item_1617186419668[2].givenNames[0].givenNameLang, item_1617186419668[2].givenNames[1].givenName, item_1617186419668[2].givenNames[1].givenNameLang, item_1617186419668[2].givenNames[2].givenName, item_1617186419668[2].givenNames[2].givenNameLang, item_1617186419668[2].nameIdentifiers[0].nameIdentifier, item_1617186419668[2].nameIdentifiers[0].nameIdentifierScheme, item_1617186419668[2].nameIdentifiers[0].nameIdentifierURI, item_1617186419668[2].nameIdentifiers[1].nameIdentifier, item_1617186419668[2].nameIdentifiers[1].nameIdentifierScheme, item_1617186419668[2].nameIdentifiers[1].nameIdentifierURI, item_1617186419668[2].nameIdentifiers[2].nameIdentifier, item_1617186419668[2].nameIdentifiers[2].nameIdentifierScheme, item_1617186419668[2].nameIdentifiers[2].nameIdentifierURI, item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationNameIdentifier, item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationScheme, item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationURI, item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNames[0].contributorAffiliationName, item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNames[0].contributorAffiliationNameLang, item_1617349709064[0].contributorAlternatives[0].contributorAlternative, item_1617349709064[0].contributorAlternatives[0].contributorAlternativeLang, item_1617349709064[0].contributorMails[0].contributorMail, item_1617349709064[0].contributorNames[0].contributorName, item_1617349709064[0].contributorNames[0].lang, item_1617349709064[0].contributorNames[1].contributorName, item_1617349709064[0].contributorNames[1].lang, item_1617349709064[0].contributorNames[2].contributorName, item_1617349709064[0].contributorNames[2].lang, item_1617349709064[0].contributorType, item_1617349709064[0].familyNames[0].familyName, item_1617349709064[0].familyNames[0].familyNameLang, item_1617349709064[0].familyNames[1].familyName, item_1617349709064[0].familyNames[1].familyNameLang, item_1617349709064[0].familyNames[2].familyName, item_1617349709064[0].familyNames[2].familyNameLang, item_1617349709064[0].givenNames[0].givenName, item_1617349709064[0].givenNames[0].givenNameLang, item_1617349709064[0].givenNames[1].givenName, item_1617349709064[0].givenNames[1].givenNameLang, item_1617349709064[0].givenNames[2].givenName, item_1617349709064[0].givenNames[2].givenNameLang, item_1617349709064[0].nameIdentifiers[0].nameIdentifier, item_1617349709064[0].nameIdentifiers[0].nameIdentifierScheme, item_1617349709064[0].nameIdentifiers[0].nameIdentifierURI, item_1617349709064[0].nameIdentifiers[1].nameIdentifier, item_1617349709064[0].nameIdentifiers[1].nameIdentifierScheme, item_1617349709064[0].nameIdentifiers[1].nameIdentifierURI, item_1617349709064[0].nameIdentifiers[2].nameIdentifier, item_1617349709064[0].nameIdentifiers[2].nameIdentifierScheme, item_1617349709064[0].nameIdentifiers[2].nameIdentifierURI, item_1617186476635.subitem_1522299639480, item_1617186476635.subitem_1600958577026, item_1617351524846.subitem_1523260933860, item_1617186499011[0].subitem_1522650717957, item_1617186499011[0].subitem_1522650727486, item_1617186499011[0].subitem_1522651041219, item_1617610673286[0].nameIdentifiers[0].nameIdentifier, item_1617610673286[0].nameIdentifiers[0].nameIdentifierScheme, item_1617610673286[0].nameIdentifiers[0].nameIdentifierURI, item_1617610673286[0].rightHolderNames[0].rightHolderLanguage, item_1617610673286[0].rightHolderNames[0].rightHolderName, item_1617186609386[0].subitem_1522299896455, item_1617186609386[0].subitem_1522300014469, item_1617186609386[0].subitem_1522300048512, item_1617186609386[0].subitem_1523261968819, item_1617186626617[0].subitem_description, item_1617186626617[0].subitem_description_language, item_1617186626617[0].subitem_description_type, item_1617186626617[1].subitem_description, item_1617186626617[1].subitem_description_language, item_1617186626617[1].subitem_description_type, item_1617186643794[0].subitem_1522300295150, item_1617186643794[0].subitem_1522300316516, item_1617186660861[0].subitem_1522300695726, item_1617186660861[0].subitem_1522300722591, item_1617186702042[0].subitem_1551255818386, item_1617258105262.resourcetype, item_1617258105262.resourceuri, item_1617349808926.subitem_1523263171732, item_1617265215918.subitem_1522305645492, item_1617265215918.subitem_1600292170262, item_1617186783814[0].subitem_identifier_type, item_1617186783814[0].subitem_identifier_uri, item_1617186819068.subitem_identifier_reg_text, item_1617186819068.subitem_identifier_reg_type, item_1617353299429[0].subitem_1522306207484, item_1617353299429[0].subitem_1522306287251.subitem_1522306382014, item_1617353299429[0].subitem_1522306287251.subitem_1522306436033, item_1617353299429[0].subitem_1523320863692[0].subitem_1523320867455, item_1617353299429[0].subitem_1523320863692[0].subitem_1523320909613, item_1617186859717[0].subitem_1522658018441, item_1617186859717[0].subitem_1522658031721, item_1617186882738[0].subitem_geolocation_box.subitem_east_longitude, item_1617186882738[0].subitem_geolocation_box.subitem_north_latitude, item_1617186882738[0].subitem_geolocation_box.subitem_south_latitude, item_1617186882738[0].subitem_geolocation_box.subitem_west_longitude, item_1617186882738[0].subitem_geolocation_place[0].subitem_geolocation_place_text, item_1617186882738[0].subitem_geolocation_point.subitem_point_latitude, item_1617186882738[0].subitem_geolocation_point.subitem_point_longitude, item_1617186901218[0].subitem_1522399143519.subitem_1522399281603, item_1617186901218[0].subitem_1522399143519.subitem_1522399333375, item_1617186901218[0].subitem_1522399412622[0].subitem_1522399416691, item_1617186901218[0].subitem_1522399412622[0].subitem_1522737543681, item_1617186901218[0].subitem_1522399571623.subitem_1522399585738, item_1617186901218[0].subitem_1522399571623.subitem_1522399628911, item_1617186901218[0].subitem_1522399651758[0].subitem_1522721910626, item_1617186901218[0].subitem_1522399651758[0].subitem_1522721929892, item_1617186920753[0].subitem_1522646500366, item_1617186920753[0].subitem_1522646572813, item_1617186941041[0].subitem_1522650068558, item_1617186941041[0].subitem_1522650091861, item_1617186959569.subitem_1551256328147, item_1617186981471.subitem_1551256294723, item_1617186994930.subitem_1551256248092, item_1617187024783.subitem_1551256198917, item_1617187045071.subitem_1551256185532, item_1617187056579.bibliographicIssueDates.bibliographicIssueDate, item_1617187056579.bibliographicIssueDates.bibliographicIssueDateType, item_1617187056579.bibliographicIssueNumber, item_1617187056579.bibliographicNumberOfPages, item_1617187056579.bibliographicPageEnd, item_1617187056579.bibliographicPageStart, item_1617187056579.bibliographicVolumeNumber, item_1617187056579.bibliographic_titles[0].bibliographic_title, item_1617187056579.bibliographic_titles[0].bibliographic_titleLang, item_1617187087799.subitem_1551256171004, item_1617187112279[0].subitem_1551256126428, item_1617187112279[0].subitem_1551256129013, item_1617187136212.subitem_1551256096004, item_1617944105607[0].subitem_1551256015892[0].subitem_1551256027296, item_1617944105607[0].subitem_1551256015892[0].subitem_1551256029891, item_1617944105607[0].subitem_1551256037922[0].subitem_1551256042287, item_1617944105607[0].subitem_1551256037922[0].subitem_1551256047619, item_1617187187528[0].subitem_1599711633003[0].subitem_1599711636923, item_1617187187528[0].subitem_1599711633003[0].subitem_1599711645590, item_1617187187528[0].subitem_1599711655652, item_1617187187528[0].subitem_1599711660052[0].subitem_1599711680082, item_1617187187528[0].subitem_1599711660052[0].subitem_1599711686511, item_1617187187528[0].subitem_1599711699392.subitem_1599711704251, item_1617187187528[0].subitem_1599711699392.subitem_1599711712451, item_1617187187528[0].subitem_1599711699392.subitem_1599711727603, item_1617187187528[0].subitem_1599711699392.subitem_1599711731891, item_1617187187528[0].subitem_1599711699392.subitem_1599711735410, item_1617187187528[0].subitem_1599711699392.subitem_1599711739022, item_1617187187528[0].subitem_1599711699392.subitem_1599711743722, item_1617187187528[0].subitem_1599711699392.subitem_1599711745532, item_1617187187528[0].subitem_1599711758470[0].subitem_1599711769260, item_1617187187528[0].subitem_1599711758470[0].subitem_1599711775943, item_1617187187528[0].subitem_1599711788485[0].subitem_1599711798761, item_1617187187528[0].subitem_1599711788485[0].subitem_1599711803382, item_1617187187528[0].subitem_1599711813532, item_1617605131499[0].accessrole, item_1617605131499[0].date[0].dateType, item_1617605131499[0].date[0].dateValue, item_1617605131499[0].displaytype, item_1617605131499[0].fileDate[0].fileDateType, item_1617605131499[0].fileDate[0].fileDateValue, item_1617605131499[0].filename, item_1617605131499[0].filesize[0].value, item_1617605131499[0].format, item_1617605131499[0].groups, item_1617605131499[0].licensefree, item_1617605131499[0].licensetype, item_1617605131499[0].url.label, item_1617605131499[0].url.objectType, item_1617605131499[0].url.url, item_1617605131499[0].version, item_1617605131499[1].accessrole, item_1617605131499[1].date[0].dateType, item_1617605131499[1].date[0].dateValue, item_1617605131499[1].displaytype, item_1617605131499[1].fileDate[0].fileDateType, item_1617605131499[1].fileDate[0].fileDateValue, item_1617605131499[1].filename, item_1617605131499[1].filesize[0].value, item_1617605131499[1].format, item_1617605131499[1].groups, item_1617605131499[1].licensefree, item_1617605131499[1].licensetype, item_1617605131499[1].url.label, item_1617605131499[1].url.objectType, item_1617605131499[1].url.url, item_1617605131499[1].version, item_1617620223087[0].subitem_1565671149650, item_1617620223087[0].subitem_1565671169640, item_1617620223087[0].subitem_1565671178623, item_1617620223087[1].subitem_1565671149650, item_1617620223087[1].subitem_1565671169640, item_1617620223087[1].subitem_1565671178623'], 'is_change_identifier': False, 'identifier_key': 'item_1617186819068', 'errors': None} != {'pos_index': ['Index A'], 'publish_status': 'public', 'feedback_mail': ['wekosoftware@nii.ac.jp'], 'edit_mode': 'Keep', 'metadata': {'pubdate': '2021-03-19', 'item_1617186331708': [{'subitem_1551255647225': 'ja_conference paperITEM00000001(public_open_access_open_access_simple)', 'subitem_1551255648112': 'ja'}, {'subitem_1551255647225': 'en_conference paperITEM00000001(public_open_access_simple)', 'subitem_1551255648112': 'en'}], 'item_1617186385884': [{'subitem_1551255720400': 'Alternative Title', 'subitem_1551255721061': 'en'}, {'subitem_1551255720400': 'Alternative Title', 'subitem_1551255721061': 'ja'}], 'item_1617186419668': [{'creatorAffiliations': [{'affiliationNameIdentifiers': [{'affiliationNameIdentifier': '0000000121691048', 'affiliationNameIdentifierScheme': 'ISNI', 'affiliationNameIdentifierURI': 'http://isni.org/isni/0000000121691048'}], 'affiliationNames': [{'affiliationName': 'University', 'affiliationNameLang': 'en'}]}], 'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}], 'creatorNames': [{'creatorName': ', ', 'creatorNameLang': 'ja'}, {'creatorName': ', ', 'creatorNameLang': 'ja-Kana'}, {'creatorName': 'Joho, Taro', 'creatorNameLang': 'en'}], 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': '4', 'nameIdentifierScheme': 'WEKO'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'zzzzzzz', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}, {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}], 'creatorNames': [{'creatorName': ', ', 'creatorNameLang': 'ja'}, {'creatorName': ', ', 'creatorNameLang': 'ja-Kana'}, {'creatorName': 'Joho, Taro', 'creatorNameLang': 'en'}], 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'zzzzzzz', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}, {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}], 'creatorNames': [{'creatorName': ', ', 'creatorNameLang': 'ja'}, {'creatorName': ', ', 'creatorNameLang': 'ja-Kana'}, {'creatorName': 'Joho, Taro', 'creatorNameLang': 'en'}], 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'zzzzzzz', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}], 'item_1617349709064': [{'contributorMails': [{'contributorMail': 'wekosoftware@nii.ac.jp'}], 'contributorNames': [{'contributorName': ', ', 'lang': 'ja'}, {'contributorName': ', ', 'lang': 'ja-Kana'}, {'contributorName': 'Joho, Taro', 'lang': 'en'}], 'contributorType': 'ContactPerson', 'familyNames': [{'familyName': '', 'familyNameLang': 'ja'}, {'familyName': '', 'familyNameLang': 'ja-Kana'}, {'familyName': 'Joho', 'familyNameLang': 'en'}], 'givenNames': [{'givenName': '', 'givenNameLang': 'ja'}, {'givenName': '', 'givenNameLang': 'ja-Kana'}, {'givenName': 'Taro', 'givenNameLang': 'en'}], 'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'CiNii', 'nameIdentifierURI': 'https://ci.nii.ac.jp/'}, {'nameIdentifier': 'xxxxxxx', 'nameIdentifierScheme': 'KAKEN2', 'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}], 'item_1617186476635': {'subitem_1522299639480': 'open access', 'subitem_1600958577026': 'http://purl.org/coar/access_right/c_abf2'}, 'item_1617351524846': {'subitem_1523260933860': 'Unknown'}, 'item_1617186499011': [{'subitem_1522650717957': 'ja', 'subitem_1522650727486': 'http://localhost', 'subitem_1522651041219': 'Rights Information'}], 'item_1617610673286': [{'nameIdentifiers': [{'nameIdentifier': 'xxxxxx', 'nameIdentifierScheme': 'ORCID', 'nameIdentifierURI': 'https://orcid.org/'}], 'rightHolderNames': [{'rightHolderLanguage': 'ja', 'rightHolderName': 'Right Holder Name'}]}], 'item_1617186609386': [{'subitem_1522299896455': 'ja', 'subitem_1522300014469': 'Other', 'subitem_1522300048512': 'http://localhost/', 'subitem_1523261968819': 'Sibject1'}], 'item_1617186626617': [{'subitem_description': 'Description\nDescription<br/>Description', 'subitem_description_language': 'en', 'subitem_description_type': 'Abstract'}, {'subitem_description': '\n\n\n', 'subitem_description_language': 'ja', 'subitem_description_type': 'Abstract'}], 'item_1617186643794': [{'subitem_1522300295150': 'en', 'subitem_1522300316516': 'Publisher'}], 'item_1617186660861': [{'subitem_1522300695726': 'Available', 'subitem_1522300722591': '2021-06-30'}], 'item_1617186702042': [{'subitem_1551255818386': 'jpn'}], 'item_1617258105262': {'resourcetype': 'conference paper', 'resourceuri': 'http://purl.org/coar/resource_type/c_5794'}, 'item_1617349808926': {'subitem_1523263171732': 'Version'}, 'item_1617265215918': {'subitem_1522305645492': 'AO', 'subitem_1600292170262': 'http://purl.org/coar/version/c_b1a7d7d4d402bcce'}, 'item_1617186783814': [{'subitem_identifier_type': 'URI', 'subitem_identifier_uri': 'http://localhost'}], 'item_1617353299429': [{'subitem_1522306207484': 'isVersionOf', 'subitem_1522306287251': {'subitem_1522306382014': 'arXiv', 'subitem_1522306436033': 'xxxxx'}, 'subitem_1523320863692': [{'subitem_1523320867455': 'en', 'subitem_1523320909613': 'Related Title'}]}], 'item_1617186859717': [{'subitem_1522658018441': 'en', 'subitem_1522658031721': 'Temporal'}], 'item_1617186882738': [{'subitem_geolocation_place': [{'subitem_geolocation_place_text': 'Japan'}]}], 'item_1617186901218': [{'subitem_1522399143519': {'subitem_1522399281603': 'ISNI', 'subitem_1522399333375': 'http://xxx'}, 'subitem_1522399412622': [{'subitem_1522399416691': 'en', 'subitem_1522737543681': 'Funder Name'}], 'subitem_1522399571623': {'subitem_1522399585738': 'Award URI', 'subitem_1522399628911': 'Award Number'}, 'subitem_1522399651758': [{'subitem_1522721910626': 'en', 'subitem_1522721929892': 'Award Title'}]}], 'item_1617186920753': [{'subitem_1522646500366': 'ISSN', 'subitem_1522646572813': 'xxxx-xxxx-xxxx'}], 'item_1617186941041': [{'subitem_1522650068558': 'en', 'subitem_1522650091861': 'Source Title'}], 'item_1617186959569': {'subitem_1551256328147': '1'}, 'item_1617186981471': {'subitem_1551256294723': '111'}, 'item_1617186994930': {'subitem_1551256248092': '12'}, 'item_1617187024783': {'subitem_1551256198917': '1'}, 'item_1617187045071': {'subitem_1551256185532': '3'}, 'item_1617187112279': [{'subitem_1551256126428': 'Degree Name', 'subitem_1551256129013': 'en'}], 'item_1617187136212': {'subitem_1551256096004': '2021-06-30'}, 'item_1617944105607': [{'subitem_1551256015892': [{'subitem_1551256027296': 'xxxxxx', 'subitem_1551256029891': 'kakenhi'}], 'subitem_1551256037922': [{'subitem_1551256042287': 'Degree Grantor Name', 'subitem_1551256047619': 'en'}]}], 'item_1617187187528': [{'subitem_1599711633003': [{'subitem_1599711636923': 'Conference Name', 'subitem_1599711645590': 'ja'}], 'subitem_1599711655652': '1', 'subitem_1599711660052': [{'subitem_1599711680082': 'Sponsor', 'subitem_1599711686511': 'ja'}], 'subitem_1599711699392': {'subitem_1599711704251': '2020/12/11', 'subitem_1599711712451': '1', 'subitem_1599711727603': '12', 'subitem_1599711731891': '2000', 'subitem_1599711735410': '1', 'subitem_1599711739022': '12', 'subitem_1599711743722': '2020', 'subitem_1599711745532': 'ja'}, 'subitem_1599711758470': [{'subitem_1599711769260': 'Conference Venue', 'subitem_1599711775943': 'ja'}], 'subitem_1599711788485': [{'subitem_1599711798761': 'Conference Place', 'subitem_1599711803382': 'ja'}], 'subitem_1599711813532': 'JPN'}], 'item_1617605131499': [{'accessrole': 'open_access', 'date': [{'dateType': 'Available', 'dateValue': '2021-07-12'}], 'displaytype': 'simple', 'filename': '1KB.pdf', 'filesize': [{'value': '1 KB'}], 'format': 'text/plain'}, {'filename': ''}], 'item_1617620223087': [{'subitem_1565671149650': 'ja', 'subitem_1565671169640': 'Banner Headline', 'subitem_1565671178623': 'Subheading'}, {'subitem_1565671149650': 'en', 'subitem_1565671169640': 'Banner Headline', 'subitem_1565671178623': 'Subheding'}]}, 'file_path': ['file00000001/1KB.pdf', ''], 'item_type_name': '', 'item_type_id': 15, '$schema': 'https://localhost:8443/items/jsonschema/15', 'identifier_key': 'item_1617186819068', 'errors': None}
E                 Full diff:
E                   [
E                    {'$schema': 'https://localhost:8443/items/jsonschema/15',
E                     'edit_mode': 'Keep',
E                     'errors': None,
E                     'feedback_mail': ['wekosoftware@nii.ac.jp'],
E                     'file_path': ['file00000001/1KB.pdf',
E                                   ''],
E                     'identifier_key': 'item_1617186819068',
E                 +   'is_change_identifier': False,
E                     'item_type_id': 15,
E                     'item_type_name': '',
E                     'metadata': {'item_1617186331708': [{'subitem_1551255647225': 'ja_conference '
E                                                                                   'paperITEM00000001(public_open_access_open_access_simple)',
E                                                          'subitem_1551255648112': 'ja'},
E                                                         {'subitem_1551255647225': 'en_conference '
E                                                                                   'paperITEM00000001(public_open_access_simple)',
E                                                          'subitem_1551255648112': 'en'}],
E                                  'item_1617186385884': [{'subitem_1551255720400': 'Alternative '
E                                                                                   'Title',
E                                                          'subitem_1551255721061': 'en'},
E                                                         {'subitem_1551255720400': 'Alternative '
E                                                                                   'Title',
E                                                          'subitem_1551255721061': 'ja'}],
E                                  'item_1617186419668': [{'creatorAffiliations': [{'affiliationNameIdentifiers': [{'affiliationNameIdentifier': '0000000121691048',
E                                                                                                                   'affiliationNameIdentifierScheme': 'ISNI',
E                                                                                                                   'affiliationNameIdentifierURI': 'http://isni.org/isni/0000000121691048'}],
E                                                                                   'affiliationNames': [{'affiliationName': 'University',
E                                                                                                         'affiliationNameLang': 'en'}]}],
E                                                          'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],
E                                                          'creatorNames': [{'creatorName': ', '
E                                                                                           '',
E                                                                            'creatorNameLang': 'ja'},
E                                                                           {'creatorName': ', '
E                                                                                           '',
E                                                                            'creatorNameLang': 'ja-Kana'},
E                                                                           {'creatorName': 'Joho, '
E                                                                                           'Taro',
E                                                                            'creatorNameLang': 'en'}],
E                                                          'familyNames': [{'familyName': '',
E                                                                           'familyNameLang': 'ja'},
E                                                                          {'familyName': '',
E                                                                           'familyNameLang': 'ja-Kana'},
E                                                                          {'familyName': 'Joho',
E                                                                           'familyNameLang': 'en'}],
E                                                          'givenNames': [{'givenName': '',
E                                                                          'givenNameLang': 'ja'},
E                                                                         {'givenName': '',
E                                                                          'givenNameLang': 'ja-Kana'},
E                                                                         {'givenName': 'Taro',
E                                                                          'givenNameLang': 'en'}],
E                                                          'nameIdentifiers': [{'nameIdentifier': '4',
E                                                                               'nameIdentifierScheme': 'WEKO'},
E                                                                              {'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'ORCID',
E                                                                               'nameIdentifierURI': 'https://orcid.org/'},
E                                                                              {'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'CiNii',
E                                                                               'nameIdentifierURI': 'https://ci.nii.ac.jp/'},
E                                                                              {'nameIdentifier': 'zzzzzzz',
E                                                                               'nameIdentifierScheme': 'KAKEN2',
E                                                                               'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]},
E                                                         {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],
E                                                          'creatorNames': [{'creatorName': ', '
E                                                                                           '',
E                                                                            'creatorNameLang': 'ja'},
E                                                                           {'creatorName': ', '
E                                                                                           '',
E                                                                            'creatorNameLang': 'ja-Kana'},
E                                                                           {'creatorName': 'Joho, '
E                                                                                           'Taro',
E                                                                            'creatorNameLang': 'en'}],
E                                                          'familyNames': [{'familyName': '',
E                                                                           'familyNameLang': 'ja'},
E                                                                          {'familyName': '',
E                                                                           'familyNameLang': 'ja-Kana'},
E                                                                          {'familyName': 'Joho',
E                                                                           'familyNameLang': 'en'}],
E                                                          'givenNames': [{'givenName': '',
E                                                                          'givenNameLang': 'ja'},
E                                                                         {'givenName': '',
E                                                                          'givenNameLang': 'ja-Kana'},
E                                                                         {'givenName': 'Taro',
E                                                                          'givenNameLang': 'en'}],
E                                                          'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'ORCID',
E                                                                               'nameIdentifierURI': 'https://orcid.org/'},
E                                                                              {'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'CiNii',
E                                                                               'nameIdentifierURI': 'https://ci.nii.ac.jp/'},
E                                                                              {'nameIdentifier': 'zzzzzzz',
E                                                                               'nameIdentifierScheme': 'KAKEN2',
E                                                                               'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]},
E                                                         {'creatorMails': [{'creatorMail': 'wekosoftware@nii.ac.jp'}],
E                                                          'creatorNames': [{'creatorName': ', '
E                                                                                           '',
E                                                                            'creatorNameLang': 'ja'},
E                                                                           {'creatorName': ', '
E                                                                                           '',
E                                                                            'creatorNameLang': 'ja-Kana'},
E                                                                           {'creatorName': 'Joho, '
E                                                                                           'Taro',
E                                                                            'creatorNameLang': 'en'}],
E                                                          'familyNames': [{'familyName': '',
E                                                                           'familyNameLang': 'ja'},
E                                                                          {'familyName': '',
E                                                                           'familyNameLang': 'ja-Kana'},
E                                                                          {'familyName': 'Joho',
E                                                                           'familyNameLang': 'en'}],
E                                                          'givenNames': [{'givenName': '',
E                                                                          'givenNameLang': 'ja'},
E                                                                         {'givenName': '',
E                                                                          'givenNameLang': 'ja-Kana'},
E                                                                         {'givenName': 'Taro',
E                                                                          'givenNameLang': 'en'}],
E                                                          'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'ORCID',
E                                                                               'nameIdentifierURI': 'https://orcid.org/'},
E                                                                              {'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'CiNii',
E                                                                               'nameIdentifierURI': 'https://ci.nii.ac.jp/'},
E                                                                              {'nameIdentifier': 'zzzzzzz',
E                                                                               'nameIdentifierScheme': 'KAKEN2',
E                                                                               'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}],
E                                  'item_1617186476635': {'subitem_1522299639480': 'open access',
E                                                         'subitem_1600958577026': 'http://purl.org/coar/access_right/c_abf2'},
E                                  'item_1617186499011': [{'subitem_1522650717957': 'ja',
E                                                          'subitem_1522650727486': 'http://localhost',
E                                                          'subitem_1522651041219': 'Rights '
E                                                                                   'Information'}],
E                                  'item_1617186609386': [{'subitem_1522299896455': 'ja',
E                                                          'subitem_1522300014469': 'Other',
E                                                          'subitem_1522300048512': 'http://localhost/',
E                                                          'subitem_1523261968819': 'Sibject1'}],
E                                  'item_1617186626617': [{'subitem_description': 'Description\n'
E                                                                                 'Description<br/>Description',
E                                                          'subitem_description_language': 'en',
E                                                          'subitem_description_type': 'Abstract'},
E                                                         {'subitem_description': '\n'
E                                                                                 '\n'
E                                                                                 '\n'
E                                                                                 '',
E                                                          'subitem_description_language': 'ja',
E                                                          'subitem_description_type': 'Abstract'}],
E                                  'item_1617186643794': [{'subitem_1522300295150': 'en',
E                                                          'subitem_1522300316516': 'Publisher'}],
E                                  'item_1617186660861': [{'subitem_1522300695726': 'Available',
E                                                          'subitem_1522300722591': '2021-06-30'}],
E                                  'item_1617186702042': [{'subitem_1551255818386': 'jpn'}],
E                                  'item_1617186783814': [{'subitem_identifier_type': 'URI',
E                                                          'subitem_identifier_uri': 'http://localhost'}],
E                                  'item_1617186859717': [{'subitem_1522658018441': 'en',
E                                                          'subitem_1522658031721': 'Temporal'}],
E                                  'item_1617186882738': [{'subitem_geolocation_place': [{'subitem_geolocation_place_text': 'Japan'}]}],
E                                  'item_1617186901218': [{'subitem_1522399143519': {'subitem_1522399281603': 'ISNI',
E                                                                                    'subitem_1522399333375': 'http://xxx'},
E                                                          'subitem_1522399412622': [{'subitem_1522399416691': 'en',
E                                                                                     'subitem_1522737543681': 'Funder '
E                                                                                                              'Name'}],
E                                                          'subitem_1522399571623': {'subitem_1522399585738': 'Award '
E                                                                                                             'URI',
E                                                                                    'subitem_1522399628911': 'Award '
E                                                                                                             'Number'},
E                                                          'subitem_1522399651758': [{'subitem_1522721910626': 'en',
E                                                                                     'subitem_1522721929892': 'Award '
E                                                                                                              'Title'}]}],
E                                  'item_1617186920753': [{'subitem_1522646500366': 'ISSN',
E                                                          'subitem_1522646572813': 'xxxx-xxxx-xxxx'}],
E                                  'item_1617186941041': [{'subitem_1522650068558': 'en',
E                                                          'subitem_1522650091861': 'Source '
E                                                                                   'Title'}],
E                                  'item_1617186959569': {'subitem_1551256328147': '1'},
E                                  'item_1617186981471': {'subitem_1551256294723': '111'},
E                                  'item_1617186994930': {'subitem_1551256248092': '12'},
E                                  'item_1617187024783': {'subitem_1551256198917': '1'},
E                                  'item_1617187045071': {'subitem_1551256185532': '3'},
E                                  'item_1617187112279': [{'subitem_1551256126428': 'Degree Name',
E                                                          'subitem_1551256129013': 'en'}],
E                                  'item_1617187136212': {'subitem_1551256096004': '2021-06-30'},
E                                  'item_1617187187528': [{'subitem_1599711633003': [{'subitem_1599711636923': 'Conference '
E                                                                                                              'Name',
E                                                                                     'subitem_1599711645590': 'ja'}],
E                                                          'subitem_1599711655652': '1',
E                                                          'subitem_1599711660052': [{'subitem_1599711680082': 'Sponsor',
E                                                                                     'subitem_1599711686511': 'ja'}],
E                                                          'subitem_1599711699392': {'subitem_1599711704251': '2020/12/11',
E                                                                                    'subitem_1599711712451': '1',
E                                                                                    'subitem_1599711727603': '12',
E                                                                                    'subitem_1599711731891': '2000',
E                                                                                    'subitem_1599711735410': '1',
E                                                                                    'subitem_1599711739022': '12',
E                                                                                    'subitem_1599711743722': '2020',
E                                                                                    'subitem_1599711745532': 'ja'},
E                                                          'subitem_1599711758470': [{'subitem_1599711769260': 'Conference '
E                                                                                                              'Venue',
E                                                                                     'subitem_1599711775943': 'ja'}],
E                                                          'subitem_1599711788485': [{'subitem_1599711798761': 'Conference '
E                                                                                                              'Place',
E                                                                                     'subitem_1599711803382': 'ja'}],
E                                                          'subitem_1599711813532': 'JPN'}],
E                                  'item_1617258105262': {'resourcetype': 'conference paper',
E                                                         'resourceuri': 'http://purl.org/coar/resource_type/c_5794'},
E                                  'item_1617265215918': {'subitem_1522305645492': 'AO',
E                                                         'subitem_1600292170262': 'http://purl.org/coar/version/c_b1a7d7d4d402bcce'},
E                                  'item_1617349709064': [{'contributorMails': [{'contributorMail': 'wekosoftware@nii.ac.jp'}],
E                                                          'contributorNames': [{'contributorName': ', '
E                                                                                                   '',
E                                                                                'lang': 'ja'},
E                                                                               {'contributorName': ', '
E                                                                                                   '',
E                                                                                'lang': 'ja-Kana'},
E                                                                               {'contributorName': 'Joho, '
E                                                                                                   'Taro',
E                                                                                'lang': 'en'}],
E                                                          'contributorType': 'ContactPerson',
E                                                          'familyNames': [{'familyName': '',
E                                                                           'familyNameLang': 'ja'},
E                                                                          {'familyName': '',
E                                                                           'familyNameLang': 'ja-Kana'},
E                                                                          {'familyName': 'Joho',
E                                                                           'familyNameLang': 'en'}],
E                                                          'givenNames': [{'givenName': '',
E                                                                          'givenNameLang': 'ja'},
E                                                                         {'givenName': '',
E                                                                          'givenNameLang': 'ja-Kana'},
E                                                                         {'givenName': 'Taro',
E                                                                          'givenNameLang': 'en'}],
E                                                          'nameIdentifiers': [{'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'ORCID',
E                                                                               'nameIdentifierURI': 'https://orcid.org/'},
E                                                                              {'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'CiNii',
E                                                                               'nameIdentifierURI': 'https://ci.nii.ac.jp/'},
E                                                                              {'nameIdentifier': 'xxxxxxx',
E                                                                               'nameIdentifierScheme': 'KAKEN2',
E                                                                               'nameIdentifierURI': 'https://kaken.nii.ac.jp/'}]}],
E                                  'item_1617349808926': {'subitem_1523263171732': 'Version'},
E                                  'item_1617351524846': {'subitem_1523260933860': 'Unknown'},
E                                  'item_1617353299429': [{'subitem_1522306207484': 'isVersionOf',
E                                                          'subitem_1522306287251': {'subitem_1522306382014': 'arXiv',
E                                                                                    'subitem_1522306436033': 'xxxxx'},
E                                                          'subitem_1523320863692': [{'subitem_1523320867455': 'en',
E                                                                                     'subitem_1523320909613': 'Related '
E                                                                                                              'Title'}]}],
E                                  'item_1617605131499': [{'accessrole': 'open_access',
E                                                          'date': [{'dateType': 'Available',
E                                                                    'dateValue': '2021-07-12'}],
E                                                          'displaytype': 'simple',
E                                                          'filename': '1KB.pdf',
E                                                          'filesize': [{'value': '1 KB'}],
E                                                          'format': 'text/plain'},
E                                                         {'filename': ''}],
E                                  'item_1617610673286': [{'nameIdentifiers': [{'nameIdentifier': 'xxxxxx',
E                                                                               'nameIdentifierScheme': 'ORCID',
E                                                                               'nameIdentifierURI': 'https://orcid.org/'}],
E                                                          'rightHolderNames': [{'rightHolderLanguage': 'ja',
E                                                                                'rightHolderName': 'Right '
E                                                                                                   'Holder '
E                                                                                                   'Name'}]}],
E                                  'item_1617620223087': [{'subitem_1565671149650': 'ja',
E                                                          'subitem_1565671169640': 'Banner '
E                                                                                   'Headline',
E                                                          'subitem_1565671178623': 'Subheading'},
E                                                         {'subitem_1565671149650': 'en',
E                                                          'subitem_1565671169640': 'Banner '
E                                                                                   'Headline',
E                                                          'subitem_1565671178623': 'Subheding'}],
E                                  'item_1617944105607': [{'subitem_1551256015892': [{'subitem_1551256027296': 'xxxxxx',
E                                                                                     'subitem_1551256029891': 'kakenhi'}],
E                                                          'subitem_1551256037922': [{'subitem_1551256042287': 'Degree '
E                                                                                                              'Grantor '
E                                                                                                              'Name',
E                                                                                     'subitem_1551256047619': 'en'}]}],
E                                  'pubdate': '2021-03-19'},
E                     'pos_index': ['Index A'],
E                 -   'publish_status': 'public'},
E                 ?                             -
E                 +   'publish_status': 'public',
E                 +   'warnings': ['The following items are not registered because they do not '
E                 +                'exist in the specified item type. '
E                 +                'item_1617186331708[0].subitem_1551255647225, '
E                 +                'item_1617186331708[0].subitem_1551255648112, '
E                 +                'item_1617186331708[1].subitem_1551255647225, '
E                 +                'item_1617186331708[1].subitem_1551255648112, '
E                 +                'item_1617186385884[0].subitem_1551255720400, '
E                 +                'item_1617186385884[0].subitem_1551255721061, '
E                 +                'item_1617186385884[1].subitem_1551255720400, '
E                 +                'item_1617186385884[1].subitem_1551255721061, '
E                 +                'item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, '
E                 +                'item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, '
E                 +                'item_1617186419668[0].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, '
E                 +                'item_1617186419668[0].creatorAffiliations[0].affiliationNames[0].affiliationName, '
E                 +                'item_1617186419668[0].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, '
E                 +                'item_1617186419668[0].creatorAlternatives[0].creatorAlternative, '
E                 +                'item_1617186419668[0].creatorAlternatives[0].creatorAlternativeLang, '
E                 +                'item_1617186419668[0].creatorMails[0].creatorMail, '
E                 +                'item_1617186419668[0].creatorNames[0].creatorName, '
E                 +                'item_1617186419668[0].creatorNames[0].creatorNameLang, '
E                 +                'item_1617186419668[0].creatorNames[1].creatorName, '
E                 +                'item_1617186419668[0].creatorNames[1].creatorNameLang, '
E                 +                'item_1617186419668[0].creatorNames[2].creatorName, '
E                 +                'item_1617186419668[0].creatorNames[2].creatorNameLang, '
E                 +                'item_1617186419668[0].familyNames[0].familyName, '
E                 +                'item_1617186419668[0].familyNames[0].familyNameLang, '
E                 +                'item_1617186419668[0].familyNames[1].familyName, '
E                 +                'item_1617186419668[0].familyNames[1].familyNameLang, '
E                 +                'item_1617186419668[0].familyNames[2].familyName, '
E                 +                'item_1617186419668[0].familyNames[2].familyNameLang, '
E                 +                'item_1617186419668[0].givenNames[0].givenName, '
E                 +                'item_1617186419668[0].givenNames[0].givenNameLang, '
E                 +                'item_1617186419668[0].givenNames[1].givenName, '
E                 +                'item_1617186419668[0].givenNames[1].givenNameLang, '
E                 +                'item_1617186419668[0].givenNames[2].givenName, '
E                 +                'item_1617186419668[0].givenNames[2].givenNameLang, '
E                 +                'item_1617186419668[0].nameIdentifiers[0].nameIdentifier, '
E                 +                'item_1617186419668[0].nameIdentifiers[0].nameIdentifierScheme, '
E                 +                'item_1617186419668[0].nameIdentifiers[0].nameIdentifierURI, '
E                 +                'item_1617186419668[0].nameIdentifiers[1].nameIdentifier, '
E                 +                'item_1617186419668[0].nameIdentifiers[1].nameIdentifierScheme, '
E                 +                'item_1617186419668[0].nameIdentifiers[1].nameIdentifierURI, '
E                 +                'item_1617186419668[0].nameIdentifiers[2].nameIdentifier, '
E                 +                'item_1617186419668[0].nameIdentifiers[2].nameIdentifierScheme, '
E                 +                'item_1617186419668[0].nameIdentifiers[2].nameIdentifierURI, '
E                 +                'item_1617186419668[0].nameIdentifiers[3].nameIdentifier, '
E                 +                'item_1617186419668[0].nameIdentifiers[3].nameIdentifierScheme, '
E                 +                'item_1617186419668[0].nameIdentifiers[3].nameIdentifierURI, '
E                 +                'item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, '
E                 +                'item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, '
E                 +                'item_1617186419668[1].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, '
E                 +                'item_1617186419668[1].creatorAffiliations[0].affiliationNames[0].affiliationName, '
E                 +                'item_1617186419668[1].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, '
E                 +                'item_1617186419668[1].creatorAlternatives[0].creatorAlternative, '
E                 +                'item_1617186419668[1].creatorAlternatives[0].creatorAlternativeLang, '
E                 +                'item_1617186419668[1].creatorMails[0].creatorMail, '
E                 +                'item_1617186419668[1].creatorNames[0].creatorName, '
E                 +                'item_1617186419668[1].creatorNames[0].creatorNameLang, '
E                 +                'item_1617186419668[1].creatorNames[1].creatorName, '
E                 +                'item_1617186419668[1].creatorNames[1].creatorNameLang, '
E                 +                'item_1617186419668[1].creatorNames[2].creatorName, '
E                 +                'item_1617186419668[1].creatorNames[2].creatorNameLang, '
E                 +                'item_1617186419668[1].familyNames[0].familyName, '
E                 +                'item_1617186419668[1].familyNames[0].familyNameLang, '
E                 +                'item_1617186419668[1].familyNames[1].familyName, '
E                 +                'item_1617186419668[1].familyNames[1].familyNameLang, '
E                 +                'item_1617186419668[1].familyNames[2].familyName, '
E                 +                'item_1617186419668[1].familyNames[2].familyNameLang, '
E                 +                'item_1617186419668[1].givenNames[0].givenName, '
E                 +                'item_1617186419668[1].givenNames[0].givenNameLang, '
E                 +                'item_1617186419668[1].givenNames[1].givenName, '
E                 +                'item_1617186419668[1].givenNames[1].givenNameLang, '
E                 +                'item_1617186419668[1].givenNames[2].givenName, '
E                 +                'item_1617186419668[1].givenNames[2].givenNameLang, '
E                 +                'item_1617186419668[1].nameIdentifiers[0].nameIdentifier, '
E                 +                'item_1617186419668[1].nameIdentifiers[0].nameIdentifierScheme, '
E                 +                'item_1617186419668[1].nameIdentifiers[0].nameIdentifierURI, '
E                 +                'item_1617186419668[1].nameIdentifiers[1].nameIdentifier, '
E                 +                'item_1617186419668[1].nameIdentifiers[1].nameIdentifierScheme, '
E                 +                'item_1617186419668[1].nameIdentifiers[1].nameIdentifierURI, '
E                 +                'item_1617186419668[1].nameIdentifiers[2].nameIdentifier, '
E                 +                'item_1617186419668[1].nameIdentifiers[2].nameIdentifierScheme, '
E                 +                'item_1617186419668[1].nameIdentifiers[2].nameIdentifierURI, '
E                 +                'item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifier, '
E                 +                'item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierScheme, '
E                 +                'item_1617186419668[2].creatorAffiliations[0].affiliationNameIdentifiers[0].affiliationNameIdentifierURI, '
E                 +                'item_1617186419668[2].creatorAffiliations[0].affiliationNames[0].affiliationName, '
E                 +                'item_1617186419668[2].creatorAffiliations[0].affiliationNames[0].affiliationNameLang, '
E                 +                'item_1617186419668[2].creatorAlternatives[0].creatorAlternative, '
E                 +                'item_1617186419668[2].creatorAlternatives[0].creatorAlternativeLang, '
E                 +                'item_1617186419668[2].creatorMails[0].creatorMail, '
E                 +                'item_1617186419668[2].creatorNames[0].creatorName, '
E                 +                'item_1617186419668[2].creatorNames[0].creatorNameLang, '
E                 +                'item_1617186419668[2].creatorNames[1].creatorName, '
E                 +                'item_1617186419668[2].creatorNames[1].creatorNameLang, '
E                 +                'item_1617186419668[2].creatorNames[2].creatorName, '
E                 +                'item_1617186419668[2].creatorNames[2].creatorNameLang, '
E                 +                'item_1617186419668[2].familyNames[0].familyName, '
E                 +                'item_1617186419668[2].familyNames[0].familyNameLang, '
E                 +                'item_1617186419668[2].familyNames[1].familyName, '
E                 +                'item_1617186419668[2].familyNames[1].familyNameLang, '
E                 +                'item_1617186419668[2].familyNames[2].familyName, '
E                 +                'item_1617186419668[2].familyNames[2].familyNameLang, '
E                 +                'item_1617186419668[2].givenNames[0].givenName, '
E                 +                'item_1617186419668[2].givenNames[0].givenNameLang, '
E                 +                'item_1617186419668[2].givenNames[1].givenName, '
E                 +                'item_1617186419668[2].givenNames[1].givenNameLang, '
E                 +                'item_1617186419668[2].givenNames[2].givenName, '
E                 +                'item_1617186419668[2].givenNames[2].givenNameLang, '
E                 +                'item_1617186419668[2].nameIdentifiers[0].nameIdentifier, '
E                 +                'item_1617186419668[2].nameIdentifiers[0].nameIdentifierScheme, '
E                 +                'item_1617186419668[2].nameIdentifiers[0].nameIdentifierURI, '
E                 +                'item_1617186419668[2].nameIdentifiers[1].nameIdentifier, '
E                 +                'item_1617186419668[2].nameIdentifiers[1].nameIdentifierScheme, '
E                 +                'item_1617186419668[2].nameIdentifiers[1].nameIdentifierURI, '
E                 +                'item_1617186419668[2].nameIdentifiers[2].nameIdentifier, '
E                 +                'item_1617186419668[2].nameIdentifiers[2].nameIdentifierScheme, '
E                 +                'item_1617186419668[2].nameIdentifiers[2].nameIdentifierURI, '
E                 +                'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationNameIdentifier, '
E                 +                'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationScheme, '
E                 +                'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNameIdentifiers[0].contributorAffiliationURI, '
E                 +                'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNames[0].contributorAffiliationName, '
E                 +                'item_1617349709064[0].contributorAffiliations[0].contributorAffiliationNames[0].contributorAffiliationNameLang, '
E                 +                'item_1617349709064[0].contributorAlternatives[0].contributorAlternative, '
E                 +                'item_1617349709064[0].contributorAlternatives[0].contributorAlternativeLang, '
E                 +                'item_1617349709064[0].contributorMails[0].contributorMail, '
E                 +                'item_1617349709064[0].contributorNames[0].contributorName, '
E                 +                'item_1617349709064[0].contributorNames[0].lang, '
E                 +                'item_1617349709064[0].contributorNames[1].contributorName, '
E                 +                'item_1617349709064[0].contributorNames[1].lang, '
E                 +                'item_1617349709064[0].contributorNames[2].contributorName, '
E                 +                'item_1617349709064[0].contributorNames[2].lang, '
E                 +                'item_1617349709064[0].contributorType, '
E                 +                'item_1617349709064[0].familyNames[0].familyName, '
E                 +                'item_1617349709064[0].familyNames[0].familyNameLang, '
E                 +                'item_1617349709064[0].familyNames[1].familyName, '
E                 +                'item_1617349709064[0].familyNames[1].familyNameLang, '
E                 +                'item_1617349709064[0].familyNames[2].familyName, '
E                 +                'item_1617349709064[0].familyNames[2].familyNameLang, '
E                 +                'item_1617349709064[0].givenNames[0].givenName, '
E                 +                'item_1617349709064[0].givenNames[0].givenNameLang, '
E                 +                'item_1617349709064[0].givenNames[1].givenName, '
E                 +                'item_1617349709064[0].givenNames[1].givenNameLang, '
E                 +                'item_1617349709064[0].givenNames[2].givenName, '
E                 +                'item_1617349709064[0].givenNames[2].givenNameLang, '
E                 +                'item_1617349709064[0].nameIdentifiers[0].nameIdentifier, '
E                 +                'item_1617349709064[0].nameIdentifiers[0].nameIdentifierScheme, '
E                 +                'item_1617349709064[0].nameIdentifiers[0].nameIdentifierURI, '
E                 +                'item_1617349709064[0].nameIdentifiers[1].nameIdentifier, '
E                 +                'item_1617349709064[0].nameIdentifiers[1].nameIdentifierScheme, '
E                 +                'item_1617349709064[0].nameIdentifiers[1].nameIdentifierURI, '
E                 +                'item_1617349709064[0].nameIdentifiers[2].nameIdentifier, '
E                 +                'item_1617349709064[0].nameIdentifiers[2].nameIdentifierScheme, '
E                 +                'item_1617349709064[0].nameIdentifiers[2].nameIdentifierURI, '
E                 +                'item_1617186476635.subitem_1522299639480, '
E                 +                'item_1617186476635.subitem_1600958577026, '
E                 +                'item_1617351524846.subitem_1523260933860, '
E                 +                'item_1617186499011[0].subitem_1522650717957, '
E                 +                'item_1617186499011[0].subitem_1522650727486, '
E                 +                'item_1617186499011[0].subitem_1522651041219, '
E                 +                'item_1617610673286[0].nameIdentifiers[0].nameIdentifier, '
E                 +                'item_1617610673286[0].nameIdentifiers[0].nameIdentifierScheme, '
E                 +                'item_1617610673286[0].nameIdentifiers[0].nameIdentifierURI, '
E                 +                'item_1617610673286[0].rightHolderNames[0].rightHolderLanguage, '
E                 +                'item_1617610673286[0].rightHolderNames[0].rightHolderName, '
E                 +                'item_1617186609386[0].subitem_1522299896455, '
E                 +                'item_1617186609386[0].subitem_1522300014469, '
E                 +                'item_1617186609386[0].subitem_1522300048512, '
E                 +                'item_1617186609386[0].subitem_1523261968819, '
E                 +                'item_1617186626617[0].subitem_description, '
E                 +                'item_1617186626617[0].subitem_description_language, '
E                 +                'item_1617186626617[0].subitem_description_type, '
E                 +                'item_1617186626617[1].subitem_description, '
E                 +                'item_1617186626617[1].subitem_description_language, '
E                 +                'item_1617186626617[1].subitem_description_type, '
E                 +                'item_1617186643794[0].subitem_1522300295150, '
E                 +                'item_1617186643794[0].subitem_1522300316516, '
E                 +                'item_1617186660861[0].subitem_1522300695726, '
E                 +                'item_1617186660861[0].subitem_1522300722591, '
E                 +                'item_1617186702042[0].subitem_1551255818386, '
E                 +                'item_1617258105262.resourcetype, '
E                 +                'item_1617258105262.resourceuri, '
E                 +                'item_1617349808926.subitem_1523263171732, '
E                 +                'item_1617265215918.subitem_1522305645492, '
E                 +                'item_1617265215918.subitem_1600292170262, '
E                 +                'item_1617186783814[0].subitem_identifier_type, '
E                 +                'item_1617186783814[0].subitem_identifier_uri, '
E                 +                'item_1617186819068.subitem_identifier_reg_text, '
E                 +                'item_1617186819068.subitem_identifier_reg_type, '
E                 +                'item_1617353299429[0].subitem_1522306207484, '
E                 +                'item_1617353299429[0].subitem_1522306287251.subitem_1522306382014, '
E                 +                'item_1617353299429[0].subitem_1522306287251.subitem_1522306436033, '
E                 +                'item_1617353299429[0].subitem_1523320863692[0].subitem_1523320867455, '
E                 +                'item_1617353299429[0].subitem_1523320863692[0].subitem_1523320909613, '
E                 +                'item_1617186859717[0].subitem_1522658018441, '
E                 +                'item_1617186859717[0].subitem_1522658031721, '
E                 +                'item_1617186882738[0].subitem_geolocation_box.subitem_east_longitude, '
E                 +                'item_1617186882738[0].subitem_geolocation_box.subitem_north_latitude, '
E                 +                'item_1617186882738[0].subitem_geolocation_box.subitem_south_latitude, '
E                 +                'item_1617186882738[0].subitem_geolocation_box.subitem_west_longitude, '
E                 +                'item_1617186882738[0].subitem_geolocation_place[0].subitem_geolocation_place_text, '
E                 +                'item_1617186882738[0].subitem_geolocation_point.subitem_point_latitude, '
E                 +                'item_1617186882738[0].subitem_geolocation_point.subitem_point_longitude, '
E                 +                'item_1617186901218[0].subitem_1522399143519.subitem_1522399281603, '
E                 +                'item_1617186901218[0].subitem_1522399143519.subitem_1522399333375, '
E                 +                'item_1617186901218[0].subitem_1522399412622[0].subitem_1522399416691, '
E                 +                'item_1617186901218[0].subitem_1522399412622[0].subitem_1522737543681, '
E                 +                'item_1617186901218[0].subitem_1522399571623.subitem_1522399585738, '
E                 +                'item_1617186901218[0].subitem_1522399571623.subitem_1522399628911, '
E                 +                'item_1617186901218[0].subitem_1522399651758[0].subitem_1522721910626, '
E                 +                'item_1617186901218[0].subitem_1522399651758[0].subitem_1522721929892, '
E                 +                'item_1617186920753[0].subitem_1522646500366, '
E                 +                'item_1617186920753[0].subitem_1522646572813, '
E                 +                'item_1617186941041[0].subitem_1522650068558, '
E                 +                'item_1617186941041[0].subitem_1522650091861, '
E                 +                'item_1617186959569.subitem_1551256328147, '
E                 +                'item_1617186981471.subitem_1551256294723, '
E                 +                'item_1617186994930.subitem_1551256248092, '
E                 +                'item_1617187024783.subitem_1551256198917, '
E                 +                'item_1617187045071.subitem_1551256185532, '
E                 +                'item_1617187056579.bibliographicIssueDates.bibliographicIssueDate, '
E                 +                'item_1617187056579.bibliographicIssueDates.bibliographicIssueDateType, '
E                 +                'item_1617187056579.bibliographicIssueNumber, '
E                 +                'item_1617187056579.bibliographicNumberOfPages, '
E                 +                'item_1617187056579.bibliographicPageEnd, '
E                 +                'item_1617187056579.bibliographicPageStart, '
E                 +                'item_1617187056579.bibliographicVolumeNumber, '
E                 +                'item_1617187056579.bibliographic_titles[0].bibliographic_title, '
E                 +                'item_1617187056579.bibliographic_titles[0].bibliographic_titleLang, '
E                 +                'item_1617187087799.subitem_1551256171004, '
E                 +                'item_1617187112279[0].subitem_1551256126428, '
E                 +                'item_1617187112279[0].subitem_1551256129013, '
E                 +                'item_1617187136212.subitem_1551256096004, '
E                 +                'item_1617944105607[0].subitem_1551256015892[0].subitem_1551256027296, '
E                 +                'item_1617944105607[0].subitem_1551256015892[0].subitem_1551256029891, '
E                 +                'item_1617944105607[0].subitem_1551256037922[0].subitem_1551256042287, '
E                 +                'item_1617944105607[0].subitem_1551256037922[0].subitem_1551256047619, '
E                 +                'item_1617187187528[0].subitem_1599711633003[0].subitem_1599711636923, '
E                 +                'item_1617187187528[0].subitem_1599711633003[0].subitem_1599711645590, '
E                 +                'item_1617187187528[0].subitem_1599711655652, '
E                 +                'item_1617187187528[0].subitem_1599711660052[0].subitem_1599711680082, '
E                 +                'item_1617187187528[0].subitem_1599711660052[0].subitem_1599711686511, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711704251, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711712451, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711727603, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711731891, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711735410, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711739022, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711743722, '
E                 +                'item_1617187187528[0].subitem_1599711699392.subitem_1599711745532, '
E                 +                'item_1617187187528[0].subitem_1599711758470[0].subitem_1599711769260, '
E                 +                'item_1617187187528[0].subitem_1599711758470[0].subitem_1599711775943, '
E                 +                'item_1617187187528[0].subitem_1599711788485[0].subitem_1599711798761, '
E                 +                'item_1617187187528[0].subitem_1599711788485[0].subitem_1599711803382, '
E                 +                'item_1617187187528[0].subitem_1599711813532, '
E                 +                'item_1617605131499[0].accessrole, '
E                 +                'item_1617605131499[0].date[0].dateType, '
E                 +                'item_1617605131499[0].date[0].dateValue, '
E                 +                'item_1617605131499[0].displaytype, '
E                 +                'item_1617605131499[0].fileDate[0].fileDateType, '
E                 +                'item_1617605131499[0].fileDate[0].fileDateValue, '
E                 +                'item_1617605131499[0].filename, '
E                 +                'item_1617605131499[0].filesize[0].value, '
E                 +                'item_1617605131499[0].format, item_1617605131499[0].groups, '
E                 +                'item_1617605131499[0].licensefree, '
E                 +                'item_1617605131499[0].licensetype, '
E                 +                'item_1617605131499[0].url.label, '
E                 +                'item_1617605131499[0].url.objectType, '
E                 +                'item_1617605131499[0].url.url, item_1617605131499[0].version, '
E                 +                'item_1617605131499[1].accessrole, '
E                 +                'item_1617605131499[1].date[0].dateType, '
E                 +                'item_1617605131499[1].date[0].dateValue, '
E                 +                'item_1617605131499[1].displaytype, '
E                 +                'item_1617605131499[1].fileDate[0].fileDateType, '
E                 +                'item_1617605131499[1].fileDate[0].fileDateValue, '
E                 +                'item_1617605131499[1].filename, '
E                 +                'item_1617605131499[1].filesize[0].value, '
E                 +                'item_1617605131499[1].format, item_1617605131499[1].groups, '
E                 +                'item_1617605131499[1].licensefree, '
E                 +                'item_1617605131499[1].licensetype, '
E                 +                'item_1617605131499[1].url.label, '
E                 +                'item_1617605131499[1].url.objectType, '
E                 +                'item_1617605131499[1].url.url, item_1617605131499[1].version, '
E                 +                'item_1617620223087[0].subitem_1565671149650, '
E                 +                'item_1617620223087[0].subitem_1565671169640, '
E                 +                'item_1617620223087[0].subitem_1565671178623, '
E                 +                'item_1617620223087[1].subitem_1565671149650, '
E                 +                'item_1617620223087[1].subitem_1565671169640, '
E                 +                'item_1617620223087[1].subitem_1565671178623']},
E                   ]

tests/test_utils.py:379: AssertionError
_________________________ test_register_item_metadata __________________________

i18n_app = <Flask 'testapp'>, es_item_file_pipeline = None
deposit = {'title': 'fuu', '$schema': 'https://inveniosoftware.org/schemas/deposits/deposit-v1.0.0.json', '_deposit': {'id': '2452da97915141f18528afc54b999cc4', 'status': 'draft', 'owners': [9], 'created_by': 9}}
es_records = {'indexer': <weko_deposit.api.WekoIndexer object at 0x7fde7bc22278>, 'results': [{'depid': <PersistentIdentifier depid...stentIdentifier hdl:https://hdl.handle.net/0000/0000000005 / rec:e8794f30-45d2-4084-ac20-7ebe9af5494f (R)>, ...}, ...]}

    def test_register_item_metadata(i18n_app, es_item_file_pipeline, deposit, es_records):
        item = es_records["results"][0]["item"]
        root_path = os.path.dirname(os.path.abspath(__file__))
    
        with patch("invenio_files_rest.utils.find_and_update_location_size"):
>           assert register_item_metadata(item, root_path, is_gakuninrdm=False)
E           TypeError: register_item_metadata() missing 1 required positional argument: 'owner'

tests/test_utils.py:684: TypeError
------------------------------ Captured log setup ------------------------------
WARNING  elasticsearch:base.py:97 PUT http://elasticsearch:9200/test-weko-item-v1.0.0/_alias/test-weko [status:400 request:0.003s]
______________________ test_send_item_created_event_to_es ______________________

i18n_app = <Flask 'testapp'>, es_item_file_pipeline = None
es_records = {'indexer': <weko_deposit.api.WekoIndexer object at 0x7fde7865bc50>, 'results': [{'depid': <PersistentIdentifier depid...stentIdentifier hdl:https://hdl.handle.net/0000/0000000005 / rec:50bb3167-956d-44cc-beb4-722d4dfd3def (R)>, ...}, ...]}
client_request_args = <Response streamed [200 OK]>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
es = <Elasticsearch([{'host': 'elasticsearch'}])>

    def test_send_item_created_event_to_es(
        i18n_app, es_item_file_pipeline, es_records, client_request_args, users, es
    ):
        # with patch("weko_search_ui.utils.send_item_created_event_to_es._push_item_to_elasticsearch", return_value=""):
        # with patch("weko_search_ui.utils._push_item_to_elasticsearch", return_value=""):
        item = es_records["results"][0]["item"]
        request_info = {
            "remote_addr": request.remote_addr,
            "referrer": request.referrer,
            "hostname": request.host,
            "user_id": 1,
        }
    
>       send_item_created_event_to_es(item, request_info)

tests/test_utils.py:747: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:1498: in send_item_created_event_to_es
    _push_item_to_elasticsearch(id, index, doc_type, data)
weko_search_ui/utils.py:1489: in _push_item_to_elasticsearch
    indexer.client.index(index=index, doc_type=doc_type, id=id, body=data)
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/utils.py:76: in _wrapped
    return func(*args, params=params, **kwargs)
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/__init__.py:300: in index
    _make_path(index, doc_type, id), params=params, body=body)
.tox/c1/lib/python3.6/site-packages/elasticsearch/transport.py:314: in perform_request
    status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)
.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/http_requests.py:90: in perform_request
    self._raise_error(response.status_code, raw_data)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, status_code = 400
raw_data = '{"error":{"root_cause":[{"type":"invalid_index_name_exception","reason":"Invalid index name [-events-stats-item-creat...e], must not start with \'_\', \'-\', or \'+\'","index_uuid":"_na_","index":"-events-stats-item-create"},"status":400}'

    def _raise_error(self, status_code, raw_data):
        """ Locate appropriate exception and raise it. """
        error_message = raw_data
        additional_info = None
        try:
            if raw_data:
                additional_info = json.loads(raw_data)
                error_message = additional_info.get('error', error_message)
                if isinstance(error_message, dict) and 'type' in error_message:
                    error_message = error_message['type']
        except (ValueError, TypeError) as err:
            logger.warning('Undecodable raw error response from server: %s', err)
    
>       raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
E       elasticsearch.exceptions.RequestError: TransportError(400, 'invalid_index_name_exception', "Invalid index name [-events-stats-item-create], must not start with '_', '-', or '+'")

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/base.py:125: RequestError
------------------------------ Captured log setup ------------------------------
WARNING  elasticsearch:base.py:97 PUT http://elasticsearch:9200/test-weko-item-v1.0.0/_alias/test-weko [status:400 request:0.004s]
ERROR    flask.app:receivers.py:39 Error building event
Traceback (most recent call last):
  File "/code/modules/invenio-stats/invenio_stats/receivers.py", line 31, in __call__
    if self.name in current_stats.events:
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/local.py", line 348, in __getattr__
    return getattr(self._get_current_object(), name)
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/utils.py", line 91, in __get__
    value = self.func(obj)
  File "/code/modules/invenio-stats/invenio_stats/ext.py", line 79, in events
    queue = current_queues.queues[
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/werkzeug/local.py", line 348, in __getattr__
    return getattr(self._get_current_object(), name)
AttributeError: 'int' object has no attribute 'queues'
------------------------------ Captured log call -------------------------------
WARNING  elasticsearch:base.py:97 PUT http://elasticsearch:9200/-events-stats-item-create/stats-item-create/2023-03-25+05%3A27%3A00-ec8bd8e0723e5a536548777e357940569215f22e [status:400 request:0.004s]
_________________________ test_import_items_to_system __________________________

item = {'id': '1', 'cnri': 'cnricnricnri', 'cnri_suffix_not_existed': 'cnri_suffix_not_existed', 'is_change_identifier': 'is_...'item_1617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}
request_info = {'hostname': 'TEST_SERVER', 'referrer': None, 'remote_addr': None, 'user_id': 1}
is_gakuninrdm = False

    def import_items_to_system(item: dict, request_info=None, is_gakuninrdm=False):
        """Validation importing zip file.
    
        :argument
            item        -- Items Metadata.
            request_info -- Information from request.
            is_gakuninrdm - Is call by gakuninrdm api.
        :return
            return      -- Json response.
    
        """
    
        owner = 1
        if request_info and 'user_id' in request_info:
            owner = request_info['user_id']
        if not request_info and request:
            request_info = {
                "remote_addr": request.remote_addr,
                "referrer": request.referrer,
                "hostname": request.host,
                "user_id": owner
            }
    
        if not item:
            return None
        else:
            bef_metadata = None
            bef_last_ver_metadata = None
            try:
                # current_app.logger.debug("item: {0}".format(item))
                status = item.get("status")
                root_path = item.get("root_path", "")
                if status == "new":
                    item_id = create_deposit(item.get("id"))
                    item["id"] = item_id
                else:
                    handle_check_item_is_locked(item)
                    # cache ES data for rollback
                    pid = PersistentIdentifier.query.filter_by(
                        pid_type="recid", pid_value=item["id"]
                    ).first()
                    bef_metadata = WekoIndexer().get_metadata_by_item_id(pid.object_uuid)
                    bef_last_ver_metadata = WekoIndexer().get_metadata_by_item_id(
                        PIDVersioning(child=pid).last_child.object_uuid
                    )
    
                register_item_metadata(item, root_path, owner, is_gakuninrdm)
                if not is_gakuninrdm:
                    if current_app.config.get("WEKO_HANDLE_ALLOW_REGISTER_CNRI"):
                        register_item_handle(item)
                    register_item_doi(item)
    
                    status_number = WEKO_IMPORT_PUBLISH_STATUS.index(
                        item.get("publish_status")
                    )
                    register_item_update_publish_status(item, str(status_number))
                    if item.get("status") == "new":
                        # Send item_created event to ES.
>                       send_item_created_event_to_es(item, request_info)

weko_search_ui/utils.py:1559: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

item = {'id': '1', 'cnri': 'cnricnricnri', 'cnri_suffix_not_existed': 'cnri_suffix_not_existed', 'is_change_identifier': 'is_...'item_1617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}
request_info = {'hostname': 'TEST_SERVER', 'referrer': None, 'remote_addr': None, 'user_id': 1}

    def send_item_created_event_to_es(item, request_info):
        """Send item_created event to ES."""
        def _prepare_stored_data(item, request_info):
            """Prepare stored data."""
            # TODO: consider to use "weko_deposit.signals.item_created."
            timestamp = datetime.utcnow().replace(microsecond=0)
            doc = {
                "ip_address": request_info.get("remote_addr"),
                "timestamp": timestamp.isoformat(),
            }
            doc = anonymize_user(doc)
            doc = flag_restricted(doc)
            doc = flag_robots(doc)
            item_id = item.get("id") if 'id' in item else item.get("recid", -1)
            data = {
                "remote_addr": request_info.get("remote_addr"),
                "country": doc.get("country"),
                "record_name": item.get("item_title"),
                "referrer": request_info.get("referrer"),
                "is_robot": doc.get("is_robot"),
                "cur_user_id": request_info.get("user_id"),
                "is_restricted": doc.get("is_restricted"),
                "unique_session_id": doc.get("unique_session_id"),
                "hostname": request_info.get("hostname"),
                "pid_value": item_id,
                "unique_id": "item_create_{}".format(item_id),
                "pid_type": "depid",
                "timestamp": doc.get("timestamp"),
                "visitor_id": doc.get("visitor_id"),
            }
            return data
    
        def _push_item_to_elasticsearch(id, index, doc_type, data):
            """Push item to elasticsearch in order to count report."""
            indexer = RecordIndexer()
            indexer.client.index(index=index, doc_type=doc_type, id=id, body=data)
    
        timestamp = datetime.utcnow().replace(microsecond=0)
        # Prepare stored data.
        data = _prepare_stored_data(item, request_info)
        doc_type = "stats-item-create"
        index = "{}-events-{}".format(index_prefix, doc_type)
        id = hash_id(timestamp, data)
        # Save item to stats events.
>       _push_item_to_elasticsearch(id, index, doc_type, data)

weko_search_ui/utils.py:1498: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

id = '2023-03-25 05:28:12-ec8bd8e0723e5a536548777e357940569215f22e'
index = '-events-stats-item-create', doc_type = 'stats-item-create'
data = {'country': None, 'cur_user_id': 1, 'hostname': 'TEST_SERVER', 'is_restricted': False, ...}

    def _push_item_to_elasticsearch(id, index, doc_type, data):
        """Push item to elasticsearch in order to count report."""
        indexer = RecordIndexer()
>       indexer.client.index(index=index, doc_type=doc_type, id=id, body=data)

weko_search_ui/utils.py:1489: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

args = (<Elasticsearch([{'host': 'elasticsearch'}])>,)
kwargs = {'body': {'country': None, 'cur_user_id': 1, 'hostname': 'TEST_SERVER', 'is_restricted': False, ...}, 'doc_type': 'sta...em-create', 'id': '2023-03-25 05:28:12-ec8bd8e0723e5a536548777e357940569215f22e', 'index': '-events-stats-item-create'}
params = {}, p = 'request_timeout'

    @wraps(func)
    def _wrapped(*args, **kwargs):
        params = {}
        if 'params' in kwargs:
            params = kwargs.pop('params').copy()
        for p in es_query_params + GLOBAL_PARAMS:
            if p in kwargs:
                v = kwargs.pop(p)
                if v is not None:
                    params[p] = _escape(v)
    
        # don't treat ignore and request_timeout as other params to avoid escaping
        for p in ('ignore', 'request_timeout'):
            if p in kwargs:
                params[p] = kwargs.pop(p)
>       return func(*args, params=params, **kwargs)

.tox/c1/lib/python3.6/site-packages/elasticsearch/client/utils.py:76: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Elasticsearch([{'host': 'elasticsearch'}])>
index = '-events-stats-item-create', doc_type = 'stats-item-create'
body = {'country': None, 'cur_user_id': 1, 'hostname': 'TEST_SERVER', 'is_restricted': False, ...}
id = '2023-03-25 05:28:12-ec8bd8e0723e5a536548777e357940569215f22e', params = {}

    @query_params('op_type', 'parent', 'pipeline', 'refresh', 'routing',
        'timeout', 'timestamp', 'ttl', 'version', 'version_type',
        'wait_for_active_shards')
    def index(self, index, doc_type, body, id=None, params=None):
        """
        Adds or updates a typed JSON document in a specific index, making it searchable.
        `<http://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html>`_
    
        :arg index: The name of the index
        :arg doc_type: The type of the document
        :arg body: The document
        :arg id: Document ID
        :arg op_type: Explicit operation type, default 'index', valid choices
            are: 'index', 'create'
        :arg parent: ID of the parent document
        :arg pipeline: The pipeline id to preprocess incoming documents with
        :arg refresh: If `true` then refresh the affected shards to make this
            operation visible to search, if `wait_for` then wait for a refresh
            to make this operation visible to search, if `false` (the default)
            then do nothing with refreshes., valid choices are: 'true', 'false',
            'wait_for'
        :arg routing: Specific routing value
        :arg timeout: Explicit operation timeout
        :arg timestamp: Explicit timestamp for the document
        :arg ttl: Expiration time for the document
        :arg version: Explicit version number for concurrency control
        :arg version_type: Specific version type, valid choices are: 'internal',
            'external', 'external_gte', 'force'
        :arg wait_for_active_shards: Sets the number of shard copies that must
            be active before proceeding with the index operation. Defaults to 1,
            meaning the primary shard only. Set to `all` for all shard copies,
            otherwise set to any non-negative value less than or equal to the
            total number of copies for the shard (number of replicas + 1)
        """
        for param in (index, doc_type, body):
            if param in SKIP_IN_PATH:
                raise ValueError("Empty value passed for a required argument.")
        return self.transport.perform_request('POST' if id in SKIP_IN_PATH else 'PUT',
>           _make_path(index, doc_type, id), params=params, body=body)

.tox/c1/lib/python3.6/site-packages/elasticsearch/client/__init__.py:300: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <elasticsearch.transport.Transport object at 0x7fde748e1eb8>
method = 'PUT'
url = '/-events-stats-item-create/stats-item-create/2023-03-25+05%3A28%3A12-ec8bd8e0723e5a536548777e357940569215f22e'
headers = None, params = {}
body = b'{"remote_addr":null,"country":null,"record_name":"item_title","referrer":null,"is_robot":false,"cur_user_id":1,"is_r...pe":"depid","timestamp":"2023-03-25T05:28:12","visitor_id":"e2f508661077f037624003e61ffd614408278230243e763894925bf4"}'

    def perform_request(self, method, url, headers=None, params=None, body=None):
        """
        Perform the actual request. Retrieve a connection from the connection
        pool, pass all the information to it's perform_request method and
        return the data.
    
        If an exception was raised, mark the connection as failed and retry (up
        to `max_retries` times).
    
        If the operation was succesful and the connection used was previously
        marked as dead, mark it as live, resetting it's failure count.
    
        :arg method: HTTP method to use
        :arg url: absolute url (without host) to target
        :arg headers: dictionary of headers, will be handed over to the
            underlying :class:`~elasticsearch.Connection` class
        :arg params: dictionary of query parameters, will be handed over to the
            underlying :class:`~elasticsearch.Connection` class for serialization
        :arg body: body of the request, will be serializes using serializer and
            passed to the connection
        """
        if body is not None:
            body = self.serializer.dumps(body)
    
            # some clients or environments don't support sending GET with body
            if method in ('HEAD', 'GET') and self.send_get_body_as != 'GET':
                # send it as post instead
                if self.send_get_body_as == 'POST':
                    method = 'POST'
    
                # or as source parameter
                elif self.send_get_body_as == 'source':
                    if params is None:
                        params = {}
                    params['source'] = body
                    body = None
    
        if body is not None:
            try:
                body = body.encode('utf-8', 'surrogatepass')
            except (UnicodeDecodeError, AttributeError):
                # bytes/str - no need to re-encode
                pass
    
        ignore = ()
        timeout = None
        if params:
            timeout = params.pop('request_timeout', None)
            ignore = params.pop('ignore', ())
            if isinstance(ignore, int):
                ignore = (ignore, )
    
        for attempt in range(self.max_retries + 1):
            connection = self.get_connection()
    
            try:
>               status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)

.tox/c1/lib/python3.6/site-packages/elasticsearch/transport.py:314: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, method = 'PUT'
url = 'http://elasticsearch:9200/-events-stats-item-create/stats-item-create/2023-03-25+05%3A28%3A12-ec8bd8e0723e5a536548777e357940569215f22e'
params = {}
body = b'{"remote_addr":null,"country":null,"record_name":"item_title","referrer":null,"is_robot":false,"cur_user_id":1,"is_r...pe":"depid","timestamp":"2023-03-25T05:28:12","visitor_id":"e2f508661077f037624003e61ffd614408278230243e763894925bf4"}'
timeout = None, ignore = (), headers = None

    def perform_request(self, method, url, params=None, body=None, timeout=None, ignore=(), headers=None):
        url = self.base_url + url
        if params:
            url = '%s?%s' % (url, urlencode(params or {}))
    
        start = time.time()
        request = requests.Request(method=method, headers=headers, url=url, data=body)
        prepared_request = self.session.prepare_request(request)
        settings = self.session.merge_environment_settings(prepared_request.url, {}, None, None, None)
        send_kwargs = {'timeout': timeout or self.timeout}
        send_kwargs.update(settings)
        try:
            response = self.session.send(prepared_request, **send_kwargs)
            duration = time.time() - start
            raw_data = response.text
        except Exception as e:
            self.log_request_fail(method, url, prepared_request.path_url, body, time.time() - start, exception=e)
            if isinstance(e, requests.exceptions.SSLError):
                raise SSLError('N/A', str(e), e)
            if isinstance(e, requests.Timeout):
                raise ConnectionTimeout('TIMEOUT', str(e), e)
            raise ConnectionError('N/A', str(e), e)
    
        # raise errors based on http status codes, let the client handle those if needed
        if not (200 <= response.status_code < 300) and response.status_code not in ignore:
            self.log_request_fail(method, url, response.request.path_url, body, duration, response.status_code, raw_data)
>           self._raise_error(response.status_code, raw_data)

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/http_requests.py:90: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, status_code = 400
raw_data = '{"error":{"root_cause":[{"type":"invalid_index_name_exception","reason":"Invalid index name [-events-stats-item-creat...e], must not start with \'_\', \'-\', or \'+\'","index_uuid":"_na_","index":"-events-stats-item-create"},"status":400}'

    def _raise_error(self, status_code, raw_data):
        """ Locate appropriate exception and raise it. """
        error_message = raw_data
        additional_info = None
        try:
            if raw_data:
                additional_info = json.loads(raw_data)
                error_message = additional_info.get('error', error_message)
                if isinstance(error_message, dict) and 'type' in error_message:
                    error_message = error_message['type']
        except (ValueError, TypeError) as err:
            logger.warning('Undecodable raw error response from server: %s', err)
    
>       raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
E       elasticsearch.exceptions.RequestError: TransportError(400, 'invalid_index_name_exception', "Invalid index name [-events-stats-item-create], must not start with '_', '-', or '+'")

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/base.py:125: RequestError

During handling of the above exception, another exception occurred:

i18n_app = <Flask 'testapp'>, es_item_file_pipeline = None
es_records = {'indexer': <weko_deposit.api.WekoIndexer object at 0x7fde748f1d30>, 'results': [{'depid': <PersistentIdentifier depid...stentIdentifier hdl:https://hdl.handle.net/0000/0000000005 / rec:800021f8-b4da-46d0-bdca-254e6dc07015 (R)>, ...}, ...]}

    def test_import_items_to_system(i18n_app, es_item_file_pipeline, es_records):
        # item = dict(db_activity['item'])
        item = es_records["results"][0]["item"]
    
        with patch("weko_search_ui.utils.register_item_metadata", return_value={}):
            with patch("weko_search_ui.utils.register_item_doi", return_value={}):
                with patch(
                    "weko_search_ui.utils.register_item_update_publish_status",
                    return_value={},
                ):
                    with patch(
                        "weko_search_ui.utils.create_deposit", return_value=item["id"]
                    ):
                        with patch(
                            "weko_search_ui.utils.send_item_created_event_to_es",
                            return_value=item["id"],
                        ):
                            with patch(
                                "weko_workflow.utils.get_cache_data", return_value=True
                            ):
                                assert import_items_to_system(item)
                                item["status"] = "new"
                                assert import_items_to_system(item)
    
>                       assert import_items_to_system(
                            item
                        )  # Will result in error but will cover exception part

tests/test_utils.py:775: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:1600: in import_items_to_system
    current_app.logger.error("elasticsearch  error: ", ex)
/usr/local/lib/python3.6/logging/__init__.py:1337: in error
    self._log(ERROR, msg, args, **kwargs)
/usr/local/lib/python3.6/logging/__init__.py:1444: in _log
    self.handle(record)
/usr/local/lib/python3.6/logging/__init__.py:1454: in handle
    self.callHandlers(record)
/usr/local/lib/python3.6/logging/__init__.py:1516: in callHandlers
    hdlr.handle(record)
/usr/local/lib/python3.6/logging/__init__.py:865: in handle
    self.emit(record)
.tox/c1/lib/python3.6/site-packages/_pytest/logging.py:328: in emit
    super().emit(record)
/usr/local/lib/python3.6/logging/__init__.py:1000: in emit
    self.handleError(record)
/usr/local/lib/python3.6/logging/__init__.py:994: in emit
    msg = self.format(record)
/usr/local/lib/python3.6/logging/__init__.py:840: in format
    return fmt.format(record)
.tox/c1/lib/python3.6/site-packages/_pytest/logging.py:89: in format
    return super().format(record)
/usr/local/lib/python3.6/logging/__init__.py:577: in format
    record.message = record.getMessage()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <LogRecord: flask.app, 40, /code/modules/weko-search-ui/weko_search_ui/utils.py, 1600, "elasticsearch  error: ">

    def getMessage(self):
        """
        Return the message for this LogRecord.
    
        Return the message for this LogRecord after merging any user-supplied
        arguments with the message.
        """
        msg = str(self.msg)
        if self.args:
>           msg = msg % self.args
E           TypeError: not all arguments converted during string formatting

/usr/local/lib/python3.6/logging/__init__.py:338: TypeError
------------------------------ Captured log setup ------------------------------
WARNING  elasticsearch:base.py:97 PUT http://elasticsearch:9200/test-weko-item-v1.0.0/_alias/test-weko [status:400 request:0.005s]
------------------------------ Captured log call -------------------------------
ERROR    flask.app:api.py:91 Traceback (most recent call last):
  File "/code/modules/weko-handle/weko_handle/api.py", line 62, in register_handle
    self.credential_path)
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/b2handle/clientcredentials.py", line 54, in load_from_JSON
    jsonfilecontent = json.loads(open(json_filename, 'r').read())
TypeError: expected str, bytes or os.PathLike object, not NoneType

ERROR    flask.app:api.py:92 expected str, bytes or os.PathLike object, not NoneType
ERROR    flask.app:api.py:91 Traceback (most recent call last):
  File "/code/modules/weko-handle/weko_handle/api.py", line 62, in register_handle
    self.credential_path)
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/b2handle/clientcredentials.py", line 54, in load_from_JSON
    jsonfilecontent = json.loads(open(json_filename, 'r').read())
TypeError: expected str, bytes or os.PathLike object, not NoneType

ERROR    flask.app:api.py:92 expected str, bytes or os.PathLike object, not NoneType
ERROR    flask.app:api.py:91 Traceback (most recent call last):
  File "/code/modules/weko-handle/weko_handle/api.py", line 62, in register_handle
    self.credential_path)
  File "/code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/b2handle/clientcredentials.py", line 54, in load_from_JSON
    jsonfilecontent = json.loads(open(json_filename, 'r').read())
TypeError: expected str, bytes or os.PathLike object, not NoneType

ERROR    flask.app:api.py:92 expected str, bytes or os.PathLike object, not NoneType
WARNING  elasticsearch:base.py:97 PUT http://elasticsearch:9200/-events-stats-item-create/stats-item-create/2023-03-25+05%3A28%3A12-ec8bd8e0723e5a536548777e357940569215f22e [status:400 request:0.004s]
___________________ test_handle_check_and_prepare_index_tree ___________________

i18n_app = <Flask 'testapp'>
record_with_metadata = [{'$schema': 'https://localhost:8443/items/jsonschema/15', 'doi_ra': 'JaLC', 'edit_mode': 'Keep', 'errors': None, ...}...chema': 'https://localhost:8443/items/jsonschema/15', 'doi_ra': 'JaLC', 'edit_mode': 'Keep', 'errors': None, ...}, ...]
indices = {'index_dict': {'biblio_flag': False, 'browsing_group': '', 'browsing_role': 'Contributor', 'comment': '', ...}, 'index_non_dict': <Index 33>, 'index_non_dict_child': <Index 44>}

    def test_handle_check_and_prepare_index_tree(i18n_app, record_with_metadata, indices):
        list_record = [record_with_metadata[0]]
        can_edit_indexes = [indices["index_dict"]]
        item_2 = record_with_metadata[0]
    
        all_index_permission = False
>       assert not handle_check_and_prepare_index_tree(
            list_record, all_index_permission, can_edit_indexes
        )

tests/test_utils.py:808: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:1832: in handle_check_and_prepare_index_tree
    _index_ids = check(index_id, index_name_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

index_id = 1658883231990, index_name_path = 'IndexA'

    def check(index_id, index_name_path):
        """Check index_id/index_name.
    
        Args:
            index_id (str): Index id.
            index_name_path (str): Index name path.
    
        Returns:
            [bool]: Check result.
    
        """
        temp_res = []
        index_info = None
        try:
            index_info = Indexes.get_path_list([index_id])
        except Exception:
            db.session.rollback()
            current_app.logger.warning("Specified IndexID is invalid!")
    
        if index_info and len(index_info) == 1:
            if index_name_path and index_name_path not in [
                index_info[0].name.replace(
                    '-/-', current_app.config['WEKO_ITEMS_UI_INDEX_PATH_SPLIT']),
                index_info[0].name_en.replace(
                    '-/-', current_app.config['WEKO_ITEMS_UI_INDEX_PATH_SPLIT']),
            ]:
                warnings.append(
                    _("Specified {} does not match with existing index.").format(
                        "POS_INDEX"
                    )
                )
            temp_res = [index_info[0].cid]
        elif index_name_path:
            index_path_list = index_name_path.split(
>               current_app.config['WEKO_ITEMS_UI_INDEX_PATH_SPLIT'])
E           KeyError: 'WEKO_ITEMS_UI_INDEX_PATH_SPLIT'

weko_search_ui/utils.py:1771: KeyError
_________________ test_handle_check_and_prepare_feedback_mail __________________

i18n_app = <Flask 'testapp'>
record_with_metadata = [{'$schema': 'https://localhost:8443/items/jsonschema/15', 'doi_ra': 'JaLC', 'edit_mode': 'Keep', 'errors': None, ...}...chema': 'https://localhost:8443/items/jsonschema/15', 'doi_ra': 'JaLC', 'edit_mode': 'Keep', 'errors': None, ...}, ...]

    def test_handle_check_and_prepare_feedback_mail(i18n_app, record_with_metadata):
        list_record = [record_with_metadata[0]]
    
        # Doesn't return any value
>       assert not handle_check_and_prepare_feedback_mail(list_record)

tests/test_utils.py:837: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:1869: in handle_check_and_prepare_feedback_mail
    email_checked = check_email_existed(mail)
../weko-authors/weko_authors/utils.py:90: in check_email_existed
    body=body
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/utils.py:76: in _wrapped
    return func(*args, params=params, **kwargs)
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/__init__.py:636: in search
    doc_type, '_search'), params=params, body=body)
.tox/c1/lib/python3.6/site-packages/elasticsearch/transport.py:314: in perform_request
    status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)
.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/http_requests.py:90: in perform_request
    self._raise_error(response.status_code, raw_data)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, status_code = 404
raw_data = '{"error":{"root_cause":[{"type":"index_not_found_exception","reason":"no such index","resource.type":"index_or_alias"...index","resource.type":"index_or_alias","resource.id":"-authors","index_uuid":"_na_","index":"-authors"},"status":404}'

    def _raise_error(self, status_code, raw_data):
        """ Locate appropriate exception and raise it. """
        error_message = raw_data
        additional_info = None
        try:
            if raw_data:
                additional_info = json.loads(raw_data)
                error_message = additional_info.get('error', error_message)
                if isinstance(error_message, dict) and 'type' in error_message:
                    error_message = error_message['type']
        except (ValueError, TypeError) as err:
            logger.warning('Undecodable raw error response from server: %s', err)
    
>       raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
E       elasticsearch.exceptions.NotFoundError: TransportError(404, 'index_not_found_exception', 'no such index')

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/base.py:125: NotFoundError
------------------------------ Captured log call -------------------------------
WARNING  elasticsearch:base.py:97 GET http://elasticsearch:9200/-authors/author-v1.0.0/_search [status:404 request:0.005s]
____________________________ test_handle_check_cnri ____________________________

i18n_app = <Flask 'testapp'>

    def test_handle_check_cnri(i18n_app):
        item = MagicMock()
        # item = {
        #     "id": 1,
        #     "cnri": None,
        #     "is_change_identifier": True
        # }
        # Doesn't return any value
>       assert not handle_check_cnri([item])

tests/test_utils.py:871: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:1927: in handle_check_cnri
    if prefix != Handle().get_prefix():
../weko-handle/weko_handle/api.py:97: in get_prefix
    return PIDClientCredentials.load_from_JSON(self.credential_path).get_prefix()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

json_filename = None

    @staticmethod
    def load_from_JSON(json_filename):
        '''
        Create a new instance of a PIDClientCredentials with information read
        from a local JSON file.
    
        :param json_filename: The path to the json credentials file. The json
            file should have the following format:
    
                .. code:: json
    
                    {
                        "handle_server_url": "https://url.to.your.handle.server",
                        "username": "index:prefix/suffix",
                        "password": "ZZZZZZZ",
                        "prefix": "prefix_to_use_for_writing_handles",
                        "handleowner": "username_to_own_handles"
                    }
    
            Any additional key-value-pairs are stored in the instance as
            config.
        :raises: :exc:`~b2handle.handleexceptions.CredentialsFormatError`
        :raises: :exc:`~b2handle.handleexceptions.HandleSyntaxError`
        :return: An instance.
        '''
        try:
>           jsonfilecontent = json.loads(open(json_filename, 'r').read())
E           TypeError: expected str, bytes or os.PathLike object, not NoneType

.tox/c1/lib/python3.6/site-packages/b2handle/clientcredentials.py:54: TypeError
____________________________ test_handle_check_doi _____________________________

value = <MagicMock name='mock.pid_recid.object_uuid' id='140593374726968'>

    @staticmethod
    def _coerce(value):
        if value and not isinstance(value, uuid.UUID):
            try:
>               value = uuid.UUID(value)

.tox/c1/lib/python3.6/site-packages/sqlalchemy_utils/types/uuid.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <[AttributeError("'UUID' object has no attribute 'int'",) raised in repr()] UUID object at 0x7fde7221d748>
hex = <MagicMock name='mock.pid_recid.object_uuid.replace().replace().strip().replace()' id='140593374403664'>
bytes = None, bytes_le = None, fields = None, int = None, version = None

    def __init__(self, hex=None, bytes=None, bytes_le=None, fields=None,
                       int=None, version=None):
        r"""Create a UUID from either a string of 32 hexadecimal digits,
        a string of 16 bytes as the 'bytes' argument, a string of 16 bytes
        in little-endian order as the 'bytes_le' argument, a tuple of six
        integers (32-bit time_low, 16-bit time_mid, 16-bit time_hi_version,
        8-bit clock_seq_hi_variant, 8-bit clock_seq_low, 48-bit node) as
        the 'fields' argument, or a single 128-bit integer as the 'int'
        argument.  When a string of hex digits is given, curly braces,
        hyphens, and a URN prefix are all optional.  For example, these
        expressions all yield the same UUID:
    
        UUID('{12345678-1234-5678-1234-567812345678}')
        UUID('12345678123456781234567812345678')
        UUID('urn:uuid:12345678-1234-5678-1234-567812345678')
        UUID(bytes='\x12\x34\x56\x78'*4)
        UUID(bytes_le='\x78\x56\x34\x12\x34\x12\x78\x56' +
                      '\x12\x34\x56\x78\x12\x34\x56\x78')
        UUID(fields=(0x12345678, 0x1234, 0x5678, 0x12, 0x34, 0x567812345678))
        UUID(int=0x12345678123456781234567812345678)
    
        Exactly one of 'hex', 'bytes', 'bytes_le', 'fields', or 'int' must
        be given.  The 'version' argument is optional; if given, the resulting
        UUID will have its variant and version set according to RFC 4122,
        overriding the given 'hex', 'bytes', 'bytes_le', 'fields', or 'int'.
        """
    
        if [hex, bytes, bytes_le, fields, int].count(None) != 4:
            raise TypeError('one of the hex, bytes, bytes_le, fields, '
                            'or int arguments must be given')
        if hex is not None:
            hex = hex.replace('urn:', '').replace('uuid:', '')
            hex = hex.strip('{}').replace('-', '')
            if len(hex) != 32:
>               raise ValueError('badly formed hexadecimal UUID string')
E               ValueError: badly formed hexadecimal UUID string

/usr/local/lib/python3.6/uuid.py:140: ValueError

During handling of the above exception, another exception occurred:

self = <sqlalchemy.engine.base.Connection object at 0x7fde7221d438>
dialect = <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x7fde72215278>
constructor = <bound method DefaultExecutionContext._init_compiled of <class 'sqlalchemy.dialects.sqlite.base.SQLiteExecutionContext'>>
statement = <sqlalchemy.dialects.sqlite.base.SQLiteCompiler object at 0x7fde7221d4e0>
parameters = [immutabledict({})]
args = (<sqlalchemy.dialects.sqlite.base.SQLiteCompiler object at 0x7fde7221d4e0>, [immutabledict({})])
conn = <sqlalchemy.pool._ConnectionFairy object at 0x7fde72215be0>

    def _execute_context(
        self, dialect, constructor, statement, parameters, *args
    ):
        """Create an :class:`.ExecutionContext` and execute, returning
        a :class:`.ResultProxy`."""
    
        try:
            try:
                conn = self.__connection
            except AttributeError:
                # escape "except AttributeError" before revalidating
                # to prevent misleading stacktraces in Py3K
                conn = None
            if conn is None:
                conn = self._revalidate_connection()
    
>           context = constructor(dialect, self, conn, *args)

.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1171: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'sqlalchemy.dialects.sqlite.base.SQLiteExecutionContext'>
dialect = <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x7fde72215278>
connection = <sqlalchemy.engine.base.Connection object at 0x7fde7221d438>
dbapi_connection = <sqlalchemy.pool._ConnectionFairy object at 0x7fde72215be0>
compiled = <sqlalchemy.dialects.sqlite.base.SQLiteCompiler object at 0x7fde7221d4e0>
parameters = []

    @classmethod
    def _init_compiled(
        cls, dialect, connection, dbapi_connection, compiled, parameters
    ):
        """Initialize execution context for a Compiled construct."""
    
        self = cls.__new__(cls)
        self.root_connection = connection
        self._dbapi_connection = dbapi_connection
        self.dialect = connection.dialect
    
        self.compiled = compiled
    
        # this should be caught in the engine before
        # we get here
        assert compiled.can_execute
    
        self.execution_options = compiled.execution_options.union(
            connection._execution_options
        )
    
        self.result_column_struct = (
            compiled._result_columns,
            compiled._ordered_columns,
            compiled._textual_ordered_columns,
        )
    
        self.unicode_statement = util.text_type(compiled)
        if not dialect.supports_unicode_statements:
            self.statement = self.unicode_statement.encode(
                self.dialect.encoding
            )
        else:
            self.statement = self.unicode_statement
    
        self.isinsert = compiled.isinsert
        self.isupdate = compiled.isupdate
        self.isdelete = compiled.isdelete
        self.is_text = compiled.isplaintext
    
        if not parameters:
            self.compiled_parameters = [compiled.construct_params()]
        else:
            self.compiled_parameters = [
                compiled.construct_params(m, _group_number=grp)
                for grp, m in enumerate(parameters)
            ]
    
            self.executemany = len(parameters) > 1
    
        self.cursor = self.create_cursor()
    
        if self.isinsert or self.isupdate or self.isdelete:
            self.is_crud = True
            self._is_explicit_returning = bool(compiled.statement._returning)
            self._is_implicit_returning = bool(
                compiled.returning and not compiled.statement._returning
            )
    
        if self.compiled.insert_prefetch or self.compiled.update_prefetch:
            if self.executemany:
                self._process_executemany_defaults()
            else:
                self._process_executesingle_defaults()
    
        processors = compiled._bind_processors
    
        if compiled.contains_expanding_parameters:
            positiontup = self._expand_in_parameters(compiled, processors)
        elif compiled.positional:
            positiontup = self.compiled.positiontup
    
        # Convert the dictionary of bind parameter values
        # into a dict or list to be sent to the DBAPI's
        # execute() or executemany() method.
        parameters = []
        if compiled.positional:
            for compiled_params in self.compiled_parameters:
                param = []
                for key in positiontup:
                    if key in processors:
>                       param.append(processors[key](compiled_params[key]))

.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/default.py:703: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

value = <MagicMock name='mock.pid_recid.object_uuid' id='140593374726968'>

    def process(value):
>       return impl_processor(process_param(value, dialect))

.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/type_api.py:1189: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = UUIDType(length=16)
value = <MagicMock name='mock.pid_recid.object_uuid' id='140593374726968'>
dialect = <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x7fde72215278>

    def process_bind_param(self, value, dialect):
        if value is None:
            return value
    
        if not isinstance(value, uuid.UUID):
>           value = self._coerce(value)

.tox/c1/lib/python3.6/site-packages/sqlalchemy_utils/types/uuid.py:68: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

value = <MagicMock name='mock.pid_recid.object_uuid' id='140593374726968'>

    @staticmethod
    def _coerce(value):
        if value and not isinstance(value, uuid.UUID):
            try:
                value = uuid.UUID(value)
    
            except (TypeError, ValueError):
>               value = uuid.UUID(bytes=value)

.tox/c1/lib/python3.6/site-packages/sqlalchemy_utils/types/uuid.py:59: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <[AttributeError("'UUID' object has no attribute 'int'",) raised in repr()] UUID object at 0x7fde7223cc88>
hex = None
bytes = <MagicMock name='mock.pid_recid.object_uuid' id='140593374726968'>
bytes_le = None, fields = None, int = None, version = None

    def __init__(self, hex=None, bytes=None, bytes_le=None, fields=None,
                       int=None, version=None):
        r"""Create a UUID from either a string of 32 hexadecimal digits,
        a string of 16 bytes as the 'bytes' argument, a string of 16 bytes
        in little-endian order as the 'bytes_le' argument, a tuple of six
        integers (32-bit time_low, 16-bit time_mid, 16-bit time_hi_version,
        8-bit clock_seq_hi_variant, 8-bit clock_seq_low, 48-bit node) as
        the 'fields' argument, or a single 128-bit integer as the 'int'
        argument.  When a string of hex digits is given, curly braces,
        hyphens, and a URN prefix are all optional.  For example, these
        expressions all yield the same UUID:
    
        UUID('{12345678-1234-5678-1234-567812345678}')
        UUID('12345678123456781234567812345678')
        UUID('urn:uuid:12345678-1234-5678-1234-567812345678')
        UUID(bytes='\x12\x34\x56\x78'*4)
        UUID(bytes_le='\x78\x56\x34\x12\x34\x12\x78\x56' +
                      '\x12\x34\x56\x78\x12\x34\x56\x78')
        UUID(fields=(0x12345678, 0x1234, 0x5678, 0x12, 0x34, 0x567812345678))
        UUID(int=0x12345678123456781234567812345678)
    
        Exactly one of 'hex', 'bytes', 'bytes_le', 'fields', or 'int' must
        be given.  The 'version' argument is optional; if given, the resulting
        UUID will have its variant and version set according to RFC 4122,
        overriding the given 'hex', 'bytes', 'bytes_le', 'fields', or 'int'.
        """
    
        if [hex, bytes, bytes_le, fields, int].count(None) != 4:
            raise TypeError('one of the hex, bytes, bytes_le, fields, '
                            'or int arguments must be given')
        if hex is not None:
            hex = hex.replace('urn:', '').replace('uuid:', '')
            hex = hex.strip('{}').replace('-', '')
            if len(hex) != 32:
                raise ValueError('badly formed hexadecimal UUID string')
            int = int_(hex, 16)
        if bytes_le is not None:
            if len(bytes_le) != 16:
                raise ValueError('bytes_le is not a 16-char string')
            bytes = (bytes_le[4-1::-1] + bytes_le[6-1:4-1:-1] +
                     bytes_le[8-1:6-1:-1] + bytes_le[8:])
        if bytes is not None:
            if len(bytes) != 16:
>               raise ValueError('bytes is not a 16-char string')
E               ValueError: bytes is not a 16-char string

/usr/local/lib/python3.6/uuid.py:149: ValueError

The above exception was the direct cause of the following exception:

app = <Flask 'testapp'>

    def test_handle_check_doi(app):
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)),
            "data",
            "list_records",
            "list_records.json",
        )
        with open(filepath, encoding="utf-8") as f:
            list_record = json.load(f)
        assert handle_check_doi(list_record) == None
    
        # case new items with doi_ra
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)),
            "data",
            "list_records",
            "b4_handle_check_doi.json",
        )
        with open(filepath, encoding="utf-8") as f:
            list_record = json.load(f)
        assert handle_check_doi(list_record) == None
    
        # item = {
        #     "doi_ra": "JaLC",
        #     "is_change_identifier": True,
        #     "status": "new"
        # }
        item = MagicMock()
        with patch("weko_deposit.api.WekoRecord.get_record_by_pid", return_value="1"):
            assert not handle_check_doi([item])
    
        item2 = {"doi_ra": "JaLC", "is_change_identifier": False, "status": "keep"}
        mock = MagicMock()
        mock2 = MagicMock()
        mock3 = MagicMock()
        mock2.object_uuid = mock3
        mock.pid_recid = mock2
    
        # def myfunc():
        #     return 1,2
        # mock.get_idt_registration_data = myfunc
    
        with patch("weko_deposit.api.WekoRecord.get_record_by_pid", return_value=mock):
            # with patch("weko_workflow.utils.IdentifierHandle", return_value=mock):
>           assert not handle_check_doi([item2])

tests/test_utils.py:951: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:2128: in handle_check_doi
    identifier = IdentifierHandle(pid.object_uuid)
../weko-workflow/weko_workflow/utils.py:935: in __init__
    self.metadata_mapping = MappingData(item_id)
../weko-workflow/weko_workflow/utils.py:810: in __init__
    self.record = WekoRecord.get_record(item_id) if item_id else record
../invenio-records/invenio_records/api.py:206: in get_record
    obj = query.one()
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3039: in one
    ret = self.one_or_none()
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3008: in one_or_none
    ret = list(self)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3081: in __iter__
    return self._execute_and_instances(context)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3106: in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:980: in execute
    return meth(self, multiparams, params)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/elements.py:273: in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1099: in _execute_clauseelement
    distilled_params,
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1174: in _execute_context
    e, util.text_type(statement), parameters, None, None
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1458: in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/util/compat.py:296: in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/util/compat.py:276: in reraise
    raise value.with_traceback(tb)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1171: in _execute_context
    context = constructor(dialect, self, conn, *args)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/default.py:703: in _init_compiled
    param.append(processors[key](compiled_params[key]))
.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/type_api.py:1189: in process
    return impl_processor(process_param(value, dialect))
.tox/c1/lib/python3.6/site-packages/sqlalchemy_utils/types/uuid.py:68: in process_bind_param
    value = self._coerce(value)
.tox/c1/lib/python3.6/site-packages/sqlalchemy_utils/types/uuid.py:59: in _coerce
    value = uuid.UUID(bytes=value)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <[AttributeError("'UUID' object has no attribute 'int'",) raised in repr()] UUID object at 0x7fde7223cc88>
hex = None
bytes = <MagicMock name='mock.pid_recid.object_uuid' id='140593374726968'>
bytes_le = None, fields = None, int = None, version = None

    def __init__(self, hex=None, bytes=None, bytes_le=None, fields=None,
                       int=None, version=None):
        r"""Create a UUID from either a string of 32 hexadecimal digits,
        a string of 16 bytes as the 'bytes' argument, a string of 16 bytes
        in little-endian order as the 'bytes_le' argument, a tuple of six
        integers (32-bit time_low, 16-bit time_mid, 16-bit time_hi_version,
        8-bit clock_seq_hi_variant, 8-bit clock_seq_low, 48-bit node) as
        the 'fields' argument, or a single 128-bit integer as the 'int'
        argument.  When a string of hex digits is given, curly braces,
        hyphens, and a URN prefix are all optional.  For example, these
        expressions all yield the same UUID:
    
        UUID('{12345678-1234-5678-1234-567812345678}')
        UUID('12345678123456781234567812345678')
        UUID('urn:uuid:12345678-1234-5678-1234-567812345678')
        UUID(bytes='\x12\x34\x56\x78'*4)
        UUID(bytes_le='\x78\x56\x34\x12\x34\x12\x78\x56' +
                      '\x12\x34\x56\x78\x12\x34\x56\x78')
        UUID(fields=(0x12345678, 0x1234, 0x5678, 0x12, 0x34, 0x567812345678))
        UUID(int=0x12345678123456781234567812345678)
    
        Exactly one of 'hex', 'bytes', 'bytes_le', 'fields', or 'int' must
        be given.  The 'version' argument is optional; if given, the resulting
        UUID will have its variant and version set according to RFC 4122,
        overriding the given 'hex', 'bytes', 'bytes_le', 'fields', or 'int'.
        """
    
        if [hex, bytes, bytes_le, fields, int].count(None) != 4:
            raise TypeError('one of the hex, bytes, bytes_le, fields, '
                            'or int arguments must be given')
        if hex is not None:
            hex = hex.replace('urn:', '').replace('uuid:', '')
            hex = hex.strip('{}').replace('-', '')
            if len(hex) != 32:
                raise ValueError('badly formed hexadecimal UUID string')
            int = int_(hex, 16)
        if bytes_le is not None:
            if len(bytes_le) != 16:
                raise ValueError('bytes_le is not a 16-char string')
            bytes = (bytes_le[4-1::-1] + bytes_le[6-1:4-1:-1] +
                     bytes_le[8-1:6-1:-1] + bytes_le[8:])
        if bytes is not None:
            if len(bytes) != 16:
>               raise ValueError('bytes is not a 16-char string')
E               sqlalchemy.exc.StatementError: (builtins.ValueError) bytes is not a 16-char string [SQL: 'SELECT records_metadata.created AS records_metadata_created, records_metadata.updated AS records_metadata_updated, records_metadata.id AS records_metadata_id, records_metadata.json AS records_metadata_json, records_metadata.version_id AS records_metadata_version_id \nFROM records_metadata \nWHERE records_metadata.id = ? AND records_metadata.json IS NOT NULL'] [parameters: [{}]]

/usr/local/lib/python3.6/uuid.py:149: StatementError
_________________________ test_handle_fill_system_item _________________________

self = <sqlalchemy.engine.base.Connection object at 0x7fde737c4e80>
dialect = <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x7fde737d4198>
constructor = <bound method DefaultExecutionContext._init_compiled of <class 'sqlalchemy.dialects.sqlite.base.SQLiteExecutionContext'>>
statement = 'SELECT doi_identifier.id AS doi_identifier_id, doi_identifier.repository AS doi_identifier_repository, doi_identifier...doi_identifier.updated_date AS doi_identifier_updated_date \nFROM doi_identifier \nWHERE doi_identifier.repository = ?'
parameters = ('Root Index',)
args = (<sqlalchemy.dialects.sqlite.base.SQLiteCompiler object at 0x7fde72840ac8>, [immutabledict({})])
conn = <sqlalchemy.pool._ConnectionFairy object at 0x7fde737e2358>
context = <sqlalchemy.dialects.sqlite.base.SQLiteExecutionContext object at 0x7fde737e2b70>

    def _execute_context(
        self, dialect, constructor, statement, parameters, *args
    ):
        """Create an :class:`.ExecutionContext` and execute, returning
        a :class:`.ResultProxy`."""
    
        try:
            try:
                conn = self.__connection
            except AttributeError:
                # escape "except AttributeError" before revalidating
                # to prevent misleading stacktraces in Py3K
                conn = None
            if conn is None:
                conn = self._revalidate_connection()
    
            context = constructor(dialect, self, conn, *args)
        except BaseException as e:
            self._handle_dbapi_exception(
                e, util.text_type(statement), parameters, None, None
            )
    
        if context.compiled:
            context.pre_exec()
    
        cursor, statement, parameters = (
            context.cursor,
            context.statement,
            context.parameters,
        )
    
        if not context.executemany:
            parameters = parameters[0]
    
        if self._has_events or self.engine._has_events:
            for fn in self.dispatch.before_cursor_execute:
                statement, parameters = fn(
                    self,
                    cursor,
                    statement,
                    parameters,
                    context,
                    context.executemany,
                )
    
        if self._echo:
            self.engine.logger.info(statement)
            self.engine.logger.info(
                "%r", sql_util._repr_params(parameters, batches=10)
            )
    
        evt_handled = False
        try:
            if context.executemany:
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_executemany:
                        if fn(cursor, statement, parameters, context):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_executemany(
                        cursor, statement, parameters, context
                    )
            elif not parameters and context.no_parameters:
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_execute_no_params:
                        if fn(cursor, statement, context):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_execute_no_params(
                        cursor, statement, context
                    )
            else:
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_execute:
                        if fn(cursor, statement, parameters, context):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_execute(
>                       cursor, statement, parameters, context
                    )

.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1236: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x7fde737d4198>
cursor = <sqlite3.Cursor object at 0x7fde722dfab0>
statement = 'SELECT doi_identifier.id AS doi_identifier_id, doi_identifier.repository AS doi_identifier_repository, doi_identifier...doi_identifier.updated_date AS doi_identifier_updated_date \nFROM doi_identifier \nWHERE doi_identifier.repository = ?'
parameters = ('Root Index',)
context = <sqlalchemy.dialects.sqlite.base.SQLiteExecutionContext object at 0x7fde737e2b70>

    def do_execute(self, cursor, statement, parameters, context=None):
>       cursor.execute(statement, parameters)
E       sqlite3.OperationalError: no such table: doi_identifier

.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/default.py:536: OperationalError

The above exception was the direct cause of the following exception:

app = <Flask 'testapp'>
test_list_records = [{'input': [{'$schema': 'https://localhost:8443/items/jsonschema/15', 'edit_mode': 'Keep', 'errors': None, 'feedback_m...e': 'Keep', 'errors': ['Please specify PubDate with YYYY-MM-DD.'], 'feedback_mail': ['wekosoftware@nii.ac.jp'], ...}]}]
mocker = <pytest_mock.plugin.MockerFixture object at 0x7fde713e7358>

    def test_handle_fill_system_item(app, test_list_records, mocker):
    
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)), "data", "item_map.json"
        )
        with open(filepath, encoding="utf-8") as f:
            item_map = json.load(f)
    
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)), "data", "item_type_mapping.json"
        )
        with open(filepath, encoding="utf-8") as f:
            item_type_mapping = json.load(f)
        mocker.patch("weko_records.serializers.utils.get_mapping", return_value=item_map)
        mocker.patch("weko_records.api.Mapping.get_record", return_value=item_type_mapping)
    
        filepath = os.path.join(
            os.path.dirname(os.path.realpath(__file__)),
            "data",
            "list_records/list_records_fill_system.json",
        )
        with open(filepath, encoding="utf-8") as f:
            list_record = json.load(f)
    
        items = []
        items_result = []
    
        for a in VERSION_TYPE_URI:
            item = copy.deepcopy(list_record[0])
            item["metadata"]["item_1617265215918"]["subitem_1522305645492"] = a
            item["metadata"]["item_1617265215918"][
                "subitem_1600292170262"
            ] = VERSION_TYPE_URI[a]
            item["metadata"]["item_1617186476635"]["subitem_1522299639480"] = "open access"
            item["metadata"]["item_1617186476635"][
                "subitem_1600958577026"
            ] = ACCESS_RIGHT_TYPE_URI["open access"]
            item["metadata"]["item_1617258105262"]["resourcetype"] = "conference paper"
            item["metadata"]["item_1617258105262"]["resourceuri"] = RESOURCE_TYPE_URI[
                "conference paper"
            ]
            item["warnings"] = []
            item["errors"] = []
            items_result.append(item)
            item2 = copy.deepcopy(item)
            item2["metadata"]["item_1617265215918"]["subitem_1522305645492"] = a
            item2["metadata"]["item_1617265215918"]["subitem_1600292170262"] = ""
            items.append(item2)
    
        for a in ACCESS_RIGHT_TYPE_URI:
            item = copy.deepcopy(list_record[0])
            item["metadata"]["item_1617265215918"]["subitem_1522305645492"] = "VoR"
            item["metadata"]["item_1617265215918"][
                "subitem_1600292170262"
            ] = VERSION_TYPE_URI["VoR"]
            item["metadata"]["item_1617186476635"]["subitem_1522299639480"] = a
            item["metadata"]["item_1617186476635"][
                "subitem_1600958577026"
            ] = ACCESS_RIGHT_TYPE_URI[a]
            item["metadata"]["item_1617258105262"]["resourcetype"] = "conference paper"
            item["metadata"]["item_1617258105262"]["resourceuri"] = RESOURCE_TYPE_URI[
                "conference paper"
            ]
            item["warnings"] = []
            item["errors"] = []
            items_result.append(item)
            item2 = copy.deepcopy(item)
            item2["metadata"]["item_1617186476635"]["subitem_1522299639480"] = a
            item2["metadata"]["item_1617186476635"]["subitem_1600958577026"] = ""
            items.append(item2)
    
        for a in RESOURCE_TYPE_URI:
            item = copy.deepcopy(list_record[0])
            item["metadata"]["item_1617265215918"]["subitem_1522305645492"] = "VoR"
            item["metadata"]["item_1617265215918"][
                "subitem_1600292170262"
            ] = VERSION_TYPE_URI["VoR"]
            item["metadata"]["item_1617186476635"]["subitem_1522299639480"] = "open access"
            item["metadata"]["item_1617186476635"][
                "subitem_1600958577026"
            ] = ACCESS_RIGHT_TYPE_URI["open access"]
            item["metadata"]["item_1617258105262"]["resourcetype"] = a
            item["metadata"]["item_1617258105262"]["resourceuri"] = RESOURCE_TYPE_URI[a]
            item["warnings"] = []
            item["errors"] = []
            items_result.append(item)
            item2 = copy.deepcopy(item)
            item2["metadata"]["item_1617258105262"]["resourcetype"] = a
            item2["metadata"]["item_1617258105262"]["resourceuri"] = ""
            items.append(item2)
    
        # with open("items.json","w") as f:
        #     json.dump(items,f)
    
        # with open("items_result.json","w") as f:
        #     json.dump(items_result,f)
    
        # filepath = os.path.join(os.path.dirname(os.path.realpath(__file__)),"data/handle_fill_system_item/items.json")
        # with open(filepath,encoding="utf-8") as f:
        #     items = json.load(f)
    
        # filepath = os.path.join(os.path.dirname(os.path.realpath(__file__)),"data/handle_fill_system_item/items_result.json")
        # with open(filepath,encoding="utf-8") as f:
        #     items_result = json.load(f)
    
        with app.test_request_context():
            with set_locale("en"):
>               handle_fill_system_item(items)

tests/test_utils.py:1402: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:2907: in handle_fill_system_item
    doi_setting = prepare_doi_setting()
weko_search_ui/utils.py:2208: in prepare_doi_setting
    identifier_setting = get_identifier_setting("Root Index")
../weko-workflow/weko_workflow/utils.py:130: in get_identifier_setting
    repository=community_id).one_or_none()
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3008: in one_or_none
    ret = list(self)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3081: in __iter__
    return self._execute_and_instances(context)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/query.py:3106: in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:980: in execute
    return meth(self, multiparams, params)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/elements.py:273: in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1099: in _execute_clauseelement
    distilled_params,
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1240: in _execute_context
    e, statement, parameters, cursor, context
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1458: in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/util/compat.py:296: in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/util/compat.py:276: in reraise
    raise value.with_traceback(tb)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/base.py:1236: in _execute_context
    cursor, statement, parameters, context
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x7fde737d4198>
cursor = <sqlite3.Cursor object at 0x7fde722dfab0>
statement = 'SELECT doi_identifier.id AS doi_identifier_id, doi_identifier.repository AS doi_identifier_repository, doi_identifier...doi_identifier.updated_date AS doi_identifier_updated_date \nFROM doi_identifier \nWHERE doi_identifier.repository = ?'
parameters = ('Root Index',)
context = <sqlalchemy.dialects.sqlite.base.SQLiteExecutionContext object at 0x7fde737e2b70>

    def do_execute(self, cursor, statement, parameters, context=None):
>       cursor.execute(statement, parameters)
E       sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doi_identifier [SQL: 'SELECT doi_identifier.id AS doi_identifier_id, doi_identifier.repository AS doi_identifier_repository, doi_identifier.jalc_flag AS doi_identifier_jalc_flag, doi_identifier.jalc_crossref_flag AS doi_identifier_jalc_crossref_flag, doi_identifier.jalc_datacite_flag AS doi_identifier_jalc_datacite_flag, doi_identifier.ndl_jalc_flag AS doi_identifier_ndl_jalc_flag, doi_identifier.jalc_doi AS doi_identifier_jalc_doi, doi_identifier.jalc_crossref_doi AS doi_identifier_jalc_crossref_doi, doi_identifier.jalc_datacite_doi AS doi_identifier_jalc_datacite_doi, doi_identifier.ndl_jalc_doi AS doi_identifier_ndl_jalc_doi, doi_identifier.suffix AS doi_identifier_suffix, doi_identifier."created_userId" AS "doi_identifier_created_userId", doi_identifier.created_date AS doi_identifier_created_date, doi_identifier."updated_userId" AS "doi_identifier_updated_userId", doi_identifier.updated_date AS doi_identifier_updated_date \nFROM doi_identifier \nWHERE doi_identifier.repository = ?'] [parameters: ('Root Index',)] (Background on this error at: http://sqlalche.me/e/e3q8)

.tox/c1/lib/python3.6/site-packages/sqlalchemy/engine/default.py:536: OperationalError
_______________________________ test_export_all ________________________________

db_activity = {'activity': <Activity (transient 140591367188608)>, 'item': {'id': '1', 'pid': {'type': 'depid', 'value': '1', 'revis... 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}]}, 'relation_version_is_last': True}}
i18n_app = <Flask 'testapp'>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
item_type = [{'type': 'object', '$schema': 'http://json-schema.org/draft-04/schema#', 'required': ['pubdate', 'item_1617186331708'...type': 'string', 'title': 'SYSTEMIDT Identifier Type', 'format': 'select'}}, 'system_prop': True}}, 'description': ''}]
db_records2 = [(<PersistentIdentifier depid:1 / rec:33f67e47-8e7f-4f89-977f-a3b968901a70 (R)>, <PersistentIdentifier recid:1 / rec:3...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]

    def test_export_all(db_activity, i18n_app, users, item_type, db_records2):
        root_url = "/"
        user_id = users[3]["obj"].id
        data = {"item_type_id": "1", "item_id_range": "1"}
        data2 = {"item_type_id": "-1", "item_id_range": "1-9"}
        data3 = {"item_type_id": -1, "item_id_range": "1"}
    
        assert not export_all(root_url, user_id, data)
        assert not export_all(root_url, user_id, data2)
>       assert not export_all(root_url, user_id, data3)
E       AssertionError: assert not '/tmp/tmpx9m8r5ir/71/56/90d6-b6d4-4c20-acd9-0f298f456033/data'
E        +  where '/tmp/tmpx9m8r5ir/71/56/90d6-b6d4-4c20-acd9-0f298f456033/data' = export_all('/', 5, {'item_id_range': '1', 'item_type_id': -1})

tests/test_utils.py:1989: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '1', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '1', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '1', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '1', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '1', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '1', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '9', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '9', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '9', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '9', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '9', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3459 (sqlite3.OperationalError) no such function: to_number [SQL: 'SELECT pidstore_pid.pid_value AS pidstore_pid_pid_value, pidstore_pid.object_uuid AS pidstore_pid_object_uuid, records_metadata.json AS records_metadata_json \nFROM pidstore_pid JOIN item_metadata ON pidstore_pid.object_uuid = item_metadata.id JOIN records_metadata ON pidstore_pid.object_uuid = records_metadata.id \nWHERE pidstore_pid.pid_type = ? AND pidstore_pid.status = ? AND pidstore_pid.pid_value NOT LIKE ? AND to_number(pidstore_pid.pid_value, ?) >= ? AND to_number(pidstore_pid.pid_value, ?) <= ? AND item_metadata.item_type_id = ? ORDER BY to_number(pidstore_pid.pid_value, ?)'] [parameters: ('recid', 'R', '%.%', '99999999999999.99', '1', '99999999999999.99', '9', '1', '99999999999999.99')] (Background on this error at: http://sqlalche.me/e/e3q8)
ERROR    flask.app:utils.py:3309 'NoneType' object has no attribute 'id'
___________________________ test_function_issue34535 ___________________________

db = <SQLAlchemy engine=sqlite:////code/modules/weko-search-ui/test.db>
db_index = None
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
location = <function location at 0x7fde86d55378>, db_oaischema = None
mocker = <pytest_mock.plugin.MockerFixture object at 0x7fddf6574e48>

    def test_function_issue34535(db,db_index,db_itemtype,location,db_oaischema,mocker):
        mocker.patch("weko_search_ui.utils.find_and_update_location_size")
        # register item
        indexer = WekoIndexer()
        indexer.get_es_index()
        record_data = {"_oai":{"id":"oai:weko3.example.org:00000004","sets":[]},"path":["1"],"owner":"1","recid":"4","title":["test item in br"],"pubdate":{"attribute_name":"PubDate","attribute_value":"2022-11-21"},"_buckets":{"deposit":"0796e490-6dcf-4e7d-b241-d7201c3de83a"},"_deposit":{"id":"4","pid":{"type":"depid","value":"4","revision_id":0},"owner":"1","owners":[1],"status":"published","created_by":1},"item_title":"test item in br","author_link":[],"item_type_id":"1","publish_date":"2022-11-21","publish_status":"0","weko_shared_id":-1,"item_1617186331708":{"attribute_name":"Title","attribute_value_mlt":[{"subitem_1551255647225":"test item in br","subitem_1551255648112":"ja"}]},"item_1617186626617":{"attribute_name":"Description","attribute_value_mlt":[{"subitem_description":"this is line1.\nthis is line2.","subitem_description_type":"Abstract","subitem_description_language":"en"}]},"item_1617258105262":{"attribute_name":"Resource Type","attribute_value_mlt":[{"resourceuri":"http://purl.org/coar/resource_type/c_5794","resourcetype":"conference paper"}]},"relation_version_is_last":True}
        item_data = {"id":"4","pid":{"type":"depid","value":"4","revision_id":0},"lang":"ja","path":[1],"owner":"1","title":"test item in br","owners":[1],"status":"published","$schema":"https://192.168.56.103/items/jsonschema/1","pubdate":"2022-11-21","edit_mode":"keep","created_by":1,"owners_ext":{"email":"wekosoftware@nii.ac.jp","username":"","displayname":""},"deleted_items":["item_1617605131499"],"shared_user_id":-1,"weko_shared_id":-1,"item_1617186331708":[{"subitem_1551255647225":"test item in br","subitem_1551255648112":"ja"}],"item_1617186626617":[{"subitem_description":"this is line1.\nthis is line2.","subitem_description_type":"Abstract","subitem_description_language":"en"}],"item_1617258105262":{"resourceuri":"http://purl.org/coar/resource_type/c_5794","resourcetype":"conference paper"}}
        rec_uuid = uuid.uuid4()
        recid = PersistentIdentifier.create(
            "recid",
            str(4),
            object_type="rec",
            object_uuid=rec_uuid,
            status=PIDStatus.REGISTERED,
        )
        depid = PersistentIdentifier.create(
            "depid",
            str(4),
            object_type="rec",
            object_uuid=rec_uuid,
            status=PIDStatus.REGISTERED,
        )
        rel = PIDRelation.create(recid, depid, 3)
        db.session.add(rel)
        record = WekoRecord.create(record_data, id_=rec_uuid)
        item = ItemsMetadata.create(item_data, id_=rec_uuid)
        deposit = WekoDeposit(record, record.model)
        deposit.commit()
        indexer.upload_metadata(record_data, rec_uuid, 1, False)
    
        # new item
        root_path = os.path.dirname(os.path.abspath(__file__))
        new_item = {'$schema': 'https://192.168.56.103/items/jsonschema/1', 'edit_mode': 'Keep', 'errors': None, 'file_path': [''], 'filenames': [{'filename': '', 'id': '.metadata.item_1617605131499[0].filename'}], 'id': '4', 'identifier_key': 'item_1617186819068', 'is_change_identifier': False, 'item_title': 'test item in br', 'item_type_id': 1, 'item_type_name': '', 'metadata': {'item_1617186331708': [{'subitem_1551255647225': 'test item in br', 'subitem_1551255648112': 'ja'}], 'item_1617186626617': [{'subitem_description': 'this is line1.<br/>this is line2.', 'subitem_description_language': 'en', 'subitem_description_type': 'Abstract'}], 'item_1617258105262': {'resourcetype': 'conference paper', 'resourceuri': 'http://purl.org/coar/resource_type/c_5794'}, 'path': [1], 'pubdate': '2022-11-21'}, 'pos_index': ['Faculty of Humanities and Social Sciences'], 'publish_status': 'public', 'status': 'keep', 'uri': 'https://192.168.56.103/records/4', 'warnings': [], 'root_path': root_path}
    
>       register_item_metadata(new_item,root_path,True)

tests/test_utils.py:2335: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_search_ui/utils.py:1340: in register_item_metadata
    deposit.publish_without_commit()
../weko-deposit/weko_deposit/api.py:704: in publish_without_commit
    deposit = super(WekoDeposit, self).publish(pid, id_)
../invenio-deposit/invenio_deposit/api.py:101: in wrapper
    return method(self, *args, **kwargs)
../invenio-deposit/invenio_deposit/api.py:357: in publish
    record.commit()
../invenio-records/invenio_records/api.py:278: in commit
    record=self
.tox/c1/lib/python3.6/site-packages/blinker/base.py:267: in send
    for receiver in self.receivers_for(sender)]
.tox/c1/lib/python3.6/site-packages/blinker/base.py:267: in <listcomp>
    for receiver in self.receivers_for(sender)]
../invenio-oaiserver/invenio_oaiserver/receivers.py:28: in __call__
    new_sets = set(get_record_sets(record=record))
../invenio-oaiserver/invenio_oaiserver/percolator.py:133: in get_record_sets
    index, doc_type = RecordIndexer().record_to_index(record)
.tox/c1/lib/python3.6/site-packages/invenio_indexer/api.py:76: in record_to_index
    return self._record_to_index(record)
.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:376: in <lambda>
    __call__ = lambda x, *a, **kw: x._get_current_object()(*a, **kw)
.tox/c1/lib/python3.6/site-packages/invenio_indexer/utils.py:30: in default_record_to_index
    index, doc_type = schema_to_index(schema, index_names=index_names)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

schema = None
index_names = dict_keys(['test-marc21-bibliographic-bd-v1.0.0', 'test-marc21-holdings-hd-v1.0.0', 'test-marc21-authority-ad-v1.0.0', 'test-weko-item-v1.0.0', 'test-authors-author-v1.0.0', 'test-deposits-deposit-v1.0.0'])

    def schema_to_index(schema, index_names=None):
        """Get index/doc_type given a schema URL.
    
        :param schema: The schema name
        :param index_names: A list of index name.
        :returns: A tuple containing (index, doc_type).
        """
>       parts = schema.split('/')
E       AttributeError: 'NoneType' object has no attribute 'split'

.tox/c1/lib/python3.6/site-packages/invenio_search/utils.py:46: AttributeError
____________________________ test_search_acl[3-200] ____________________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_register2 = None, index_style = None
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]
db_register = {'activity': <Activity 1>, 'flow_define': <FlowDefine 1>, 'indices': {'index': <Index 1>, 'index_private': <Index (transient 140591224375672)>}, 'item_type': <ItemType 1>, ...}
id = 3, status_code = 200

    @pytest.mark.parametrize(
        "id, status_code",
        [
            # (0, 200),
            # (1, 302),
            # (2, 302),
            (3, 200),
            # (4, 302),
            # (5, 302),
            # (6, 302),
            # (7, 302),
        ],
    )
    def test_search_acl(app,client,db_register2,index_style,users,db_register,id,status_code):
        url = url_for("weko_search_ui.search", _external=True)
        with patch("flask_login.utils._get_user", return_value=users[id]['obj']):
            with patch("flask.templating._render", return_value=""):
                ret = client.get(url)
                assert ret.status_code == status_code
    
        url = url_for("weko_search_ui.search", search_type=0,_external=True)
        with patch("flask_login.utils._get_user", return_value=users[id]['obj']):
            with patch("flask.templating._render", return_value=""):
>               ret = client.get(url)

tests/test_views.py:80: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1029: in get
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:196: in open
    follow_redirects=follow_redirects
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2334: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2320: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1766: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:36: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2317: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1840: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1743: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:36: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1836: in full_dispatch_request
    rv = self.preprocess_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:2112: in preprocess_request
    rv = func()
.tox/c1/lib/python3.6/site-packages/flask_principal.py:477: in _on_before_request
    identity = loader()
.tox/c1/lib/python3.6/site-packages/flask_security/core.py:246: in _identity_loader
    identity = Identity(current_user.id)
.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:348: in __getattr__
    return getattr(self._get_current_object(), name)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/attributes.py:275: in __get__
    return self.impl.get(instance_state(instance), dict_)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/attributes.py:669: in get
    value = state._load_expired(state, passive)
.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/state.py:632: in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

mapper = <Mapper at 0x7fde95100630; User>
state = <sqlalchemy.orm.state.InstanceState object at 0x7fddf1fd00b8>
attribute_names = {'active', 'confirmed_at', 'current_login_at', 'current_login_ip', 'email', 'id', ...}

    def load_scalar_attributes(mapper, state, attribute_names):
        """initiate a column-based attribute refresh operation."""
    
        # assert mapper is _state_mapper(state)
        session = state.session
        if not session:
            raise orm_exc.DetachedInstanceError(
                "Instance %s is not bound to a Session; "
>               "attribute refresh operation cannot proceed" % (state_str(state))
            )
E           sqlalchemy.orm.exc.DetachedInstanceError: Instance <User at 0x7fddf1fd00f0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: http://sqlalche.me/e/bhk3)

.tox/c1/lib/python3.6/site-packages/sqlalchemy/orm/loading.py:913: DetachedInstanceError
------------------------------ Captured log call -------------------------------
ERROR    flask.app:views.py:88 hoge search_type:0
________________________ test_search_feedback_mail_list ________________________

i18n_app = <Flask 'testapp'>
users = [{'email': 'noroleuser@test.org', 'id': 9, 'obj': <User 9>}, {'email': 'contributor@test.org', 'id': 2, 'obj': <User 2...ail': 'comadmin@test.org', 'id': 3, 'obj': <User 3>}, {'email': 'generaluser@test.org', 'id': 6, 'obj': <User 5>}, ...]

    def test_search_feedback_mail_list(i18n_app, users):
        with patch("flask_login.utils._get_user", return_value=users[3]['obj']):
>           assert search_feedback_mail_list()

tests/test_views.py:123: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_search_ui/views.py:367: in search_feedback_mail_list
    result = get_feedback_mail_list()
weko_search_ui/utils.py:318: in get_feedback_mail_list
    search_instance.execute()
.tox/c1/lib/python3.6/site-packages/elasticsearch_dsl/search.py:706: in execute
    **self._params
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/utils.py:76: in _wrapped
    return func(*args, params=params, **kwargs)
.tox/c1/lib/python3.6/site-packages/elasticsearch/client/__init__.py:636: in search
    doc_type, '_search'), params=params, body=body)
.tox/c1/lib/python3.6/site-packages/elasticsearch/transport.py:314: in perform_request
    status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)
.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/http_requests.py:90: in perform_request
    self._raise_error(response.status_code, raw_data)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <RequestsHttpConnection: http://elasticsearch:9200>, status_code = 400
raw_data = '{"error":{"root_cause":[{"type":"query_shard_exception","reason":"failed to create query: {\\n  \\"bool\\" : {\\n    ...l_state_exception","reason":"[nested] failed to find nested object under path [feedback_mail_list]"}}}]},"status":400}'

    def _raise_error(self, status_code, raw_data):
        """ Locate appropriate exception and raise it. """
        error_message = raw_data
        additional_info = None
        try:
            if raw_data:
                additional_info = json.loads(raw_data)
                error_message = additional_info.get('error', error_message)
                if isinstance(error_message, dict) and 'type' in error_message:
                    error_message = error_message['type']
        except (ValueError, TypeError) as err:
            logger.warning('Undecodable raw error response from server: %s', err)
    
>       raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
E       elasticsearch.exceptions.RequestError: TransportError(400, 'search_phase_execution_exception', 'failed to create query: {\n  "bool" : {\n    "must" : [\n      {\n        "nested" : {\n          "query" : {\n            "bool" : {\n              "must" : [\n                {\n                  "exists" : {\n                    "field" : "feedback_mail_list.email",\n                    "boost" : 1.0\n                  }\n                }\n              ],\n              "adjust_pure_negative" : true,\n              "boost" : 1.0\n            }\n          },\n          "path" : "feedback_mail_list",\n          "ignore_unmapped" : false,\n          "score_mode" : "avg",\n          "boost" : 1.0\n        }\n      },\n      {\n        "query_string" : {\n          "query" : "_type:record-v1.0.0 AND relation_version_is_last:true ",\n          "fields" : [ ],\n          "type" : "best_fields",\n          "default_operator" : "or",\n          "max_determinized_states" : 10000,\n          "enable_position_increments" : true,\n          "fuzziness" : "AUTO",\n          "fuzzy_prefix_length" : 0,\n          "fuzzy_max_expansions" : 50,\n          "phrase_slop" : 0,\n          "escape" : false,\n          "auto_generate_synonyms_phrase_query" : true,\n          "fuzzy_transpositions" : true,\n          "boost" : 1.0\n        }\n      }\n    ],\n    "adjust_pure_negative" : true,\n    "boost" : 1.0\n  }\n}')

.tox/c1/lib/python3.6/site-packages/elasticsearch/connection/base.py:125: RequestError
------------------------------ Captured log call -------------------------------
WARNING  elasticsearch:base.py:97 GET http://elasticsearch:9200/test-weko/_search?preference=4a4d20d732cd9f789541e54dd9eb6af8&version=false [status:400 request:0.017s]
=============================== warnings summary ===============================
.tox/c1/lib/python3.6/site-packages/invenio_indexer/cli.py:96
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/invenio_indexer/cli.py:96: DeprecationWarning: 'resultcallback' has been renamed to 'result_callback'. The old name will be removed in Click 8.1.
    @queue.resultcallback()

.tox/c1/lib/python3.6/site-packages/flask_oauthlib/contrib/cache.py:3
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/flask_oauthlib/contrib/cache.py:3: DeprecationWarning: 'werkzeug.contrib.cache' is deprecated as of version 0.15 and will be removed in version 1.0. It has moved to https://github.com/pallets/cachelib.
    from werkzeug.contrib.cache import NullCache, SimpleCache, FileSystemCache

.tox/c1/lib/python3.6/site-packages/past/translation/__init__.py:35
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/past/translation/__init__.py:35: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
    import imp

tests/test_admin.py: 442 warnings
tests/test_api.py: 208 warnings
tests/test_ext.py: 78 warnings
tests/test_links.py: 26 warnings
tests/test_query.py: 234 warnings
tests/test_rest.py: 130 warnings
tests/test_tasks.py: 182 warnings
tests/test_utils.py: 7644 warnings
tests/test_views.py: 286 warnings
tests/test_weko_search_ui.py: 26 warnings
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/invenio_admin/ext.py:73: PendingDeprecationWarning: Usage of model and modelview kwargs are deprecated in favor of view_class, args and kwargs.
    PendingDeprecationWarning

tests/test_admin.py: 17 warnings
tests/test_api.py: 8 warnings
tests/test_ext.py: 3 warnings
tests/test_links.py: 1 warning
tests/test_query.py: 9 warnings
tests/test_rest.py: 5 warnings
tests/test_tasks.py: 7 warnings
tests/test_utils.py: 294 warnings
tests/test_views.py: 11 warnings
tests/test_weko_search_ui.py: 1 warning
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/flask_admin/model/base.py:1416: UserWarning: Fields missing from ruleset: created_userId,created_date,updated_userId,updated_date
    warnings.warn(text)

tests/test_admin.py: 15 warnings
tests/test_query.py: 4 warnings
tests/test_rest.py: 2 warnings
tests/test_utils.py: 3 warnings
tests/test_views.py: 4 warnings
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/flask/sessions.py:208: UserWarning: "TEST_SERVER" is not a valid cookie domain, it must contain a ".". Add an entry to your hosts file, for example "TEST_SERVER.localdomain", and use that instead.
    ' "{rv}.localdomain", and use that instead.'.format(rv=rv)

tests/test_admin.py: 2688 warnings
tests/test_query.py: 720 warnings
tests/test_rest.py: 936 warnings
tests/test_utils.py: 924773 warnings
tests/test_views.py: 8520 warnings
  /code/modules/invenio-oaiserver/invenio_oaiserver/receivers.py:28: DeprecationWarning: generator 'get_record_sets' raised StopIteration
    new_sets = set(get_record_sets(record=record))

tests/test_tasks.py::test_is_import_running
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/kombu/utils/compat.py:93: DeprecationWarning: SelectableGroups dict interface is deprecated. Use select.
    for ep in importlib_metadata.entry_points().get(namespace, [])

tests/test_utils.py::test_function_issue34958
  /code/modules/weko-search-ui/.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/compiler.py:763: SAWarning: Can't resolve label reference 'item_type.tag'; converting to text() (this warning may be suppressed after 10 occurrences)
    util.ellipses_string(element.element),

-- Docs: https://docs.pytest.org/en/stable/warnings.html

---------- coverage: platform linux, python 3.6.15-final-0 -----------
Name                            Stmts   Miss Branch BrPart  Cover
-----------------------------------------------------------------
weko_search_ui/__init__.py          4      0      0      0   100%
weko_search_ui/admin.py           361    128    134     17    60%
weko_search_ui/api.py             128      0     64      6    97%
weko_search_ui/bundles.py          19      0      0      0   100%
weko_search_ui/config.py           97      0      0      0   100%
weko_search_ui/ext.py              32      0     16      3    94%
weko_search_ui/links.py             5      0      0      0   100%
weko_search_ui/permissions.py       4      0      0      0   100%
weko_search_ui/query.py           605    143    296     66    71%
weko_search_ui/rest.py            267     53    122     28    74%
weko_search_ui/tasks.py            66     17     22      4    62%
weko_search_ui/utils.py          2041    503   1064    193    70%
weko_search_ui/version.py           2      0      0      0   100%
weko_search_ui/views.py           172     29     32      7    78%
-----------------------------------------------------------------
TOTAL                            3803    873   1750    324    72%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED tests/test_admin.py::TestItemManagementBulkSearch::test_index_acl - As...
FAILED tests/test_admin.py::test_ItemImportView_check - flask_wtf.csrf.CSRFEr...
FAILED tests/test_query.py::test_get_permission_filter - AssertionError: asse...
FAILED tests/test_query.py::test_function_issue35902 - AssertionError: assert...
FAILED tests/test_rest.py::test_IndexSearchResource_get_Exception - KeyError:...
FAILED tests/test_utils.py::test_delete_records - elasticsearch.exceptions.No...
FAILED tests/test_utils.py::test_get_feedback_mail_list - elasticsearch.excep...
FAILED tests/test_utils.py::test_unpackage_import_file - AssertionError: asse...
FAILED tests/test_utils.py::test_register_item_metadata - TypeError: register...
FAILED tests/test_utils.py::test_send_item_created_event_to_es - elasticsearc...
FAILED tests/test_utils.py::test_import_items_to_system - TypeError: not all ...
FAILED tests/test_utils.py::test_handle_check_and_prepare_index_tree - KeyErr...
FAILED tests/test_utils.py::test_handle_check_and_prepare_feedback_mail - ela...
FAILED tests/test_utils.py::test_handle_check_cnri - TypeError: expected str,...
FAILED tests/test_utils.py::test_handle_check_doi - sqlalchemy.exc.StatementE...
FAILED tests/test_utils.py::test_handle_fill_system_item - sqlalchemy.exc.Ope...
FAILED tests/test_utils.py::test_export_all - AssertionError: assert not '/tm...
FAILED tests/test_utils.py::test_function_issue34535 - AttributeError: 'NoneT...
FAILED tests/test_views.py::test_search_acl[3-200] - sqlalchemy.orm.exc.Detac...
FAILED tests/test_views.py::test_search_feedback_mail_list - elasticsearch.ex...
======== 20 failed, 348 passed, 947282 warnings in 28048.96s (7:47:28) =========
ERROR: InvocationError for command /code/modules/weko-search-ui/.tox/c1/bin/pytest --cov=weko_search_ui tests -v -s -vv --cov-branch --cov-report=term --cov-report=xml --cov-config=tox.ini --basetemp=/code/modules/weko-search-ui/.tox/c1/tmp (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   c1: commands failed
