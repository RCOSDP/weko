{#
  # This file is part of WEKO3.
  # Copyright (C) 2017 National Institute of Informatics.
  #
  # WEKO3 is free software; you can redistribute it
  # and/or modify it under the terms of the GNU General Public License as
  # published by the Free Software Foundation; either version 2 of the
  # License, or (at your option) any later version.
  #
  # WEKO3 is distributed in the hope that it will be
  # useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
  # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
  # along with WEKO3; if not, write to the
  # Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,
  # MA 02111-1307, USA.
  #}

  <div class="panel-group-tmp" id="body_index" class="index-content">
    {% if index_link_enabled  %}
    <div class="panel panel-default">
    {% else %}
    <div class="panel panel-default hide">
    {% endif %}
      <div class="panel-heading clearfix">
          <h3 class="panel-title">{{_('Index Link')}}</h3>
      </div>
      <div class="panel-body">
          <div class="spinner-loading-wrapper">
            <label style="width:100%" >
              <select name=index_link style="width:100%" onchange="selectIndexLink(this);">
                  <option></option>
                  {% if index_link_list %}
                      {% for id, name in index_link_list %}
                      <option value={{id}}>{{name}}</option>
                      {% endfor %}
                  {% endif %}
              </select>
            </label>
          </div>
      </div>
    </div>
    <div class="scroll">
    <div class="panel panel-default">
      <div class="panel-heading clearfix">
          {%-if community %}
            {%- set community_param = '&community=' + community.id -%}
            {%- set param = '&root_index=true&q=' + community.index.id|string + community_param -%}
          {%- else %}
            {%- set param = '&q=0' -%}
          {%- endif %}
          <h3 class="panel-title"><span class="toggle" onclick="toggleContent(this);" style="cursor: pointer;">▼ </span><a id="index-main-link" href="/search?page=1&size=20&search_type=2{{param}}">{{_('Index Tree')}}</a></h3>
      </div>
      <div id="index-height" name="index-height" hidden>{{ height }}</div>
      <div class="panel-body index-body" id="index-background" style="overflow: auto;">
        <app-tree-items></app-tree-items>
      </div>
    </div>
    </div>
  </div>

  <script>
    function toggleContent(element) {
      indexBox = document.querySelectorAll('.col-sm-3.col-md-3.col-lg-3');
      boxContent = document.querySelectorAll('.tree');
      mainBox = document.querySelectorAll('.col-sm-9.col-md-9.col-lg-9');
      mainLink = document.getElementById('index-main-link');
      indexBackground = document.getElementById('index-background');
      displayWidht = window.innerWidth;
      console.log(displayWidht);
      if (indexBox[0].style.width == '50px') {
        boxContent[0].style.display = 'block';
        if (displayWidht > 768) {
          if (mainBox.length != 0) {
            mainBox[0].style.width = '75%'
          }
          indexBox[0].style.width = '25%';
        } else {
          if (mainBox.length != 0) {
            mainBox[0].style.width = null;
          }
          indexBox[0].style.width = null;
        }
        mainLink.style.display = 'inline';
        indexBackground.style.overflow = 'auto';
        element.innerHTML = "▼ " + element.innerHTML.slice(2);
      } else {
        indexBox[0].style.width = '50px';
        if (displayWidht > 768) {
          if (mainBox.length != 0) {
            mainBox[0].style.width = (displayWidht - 50) / 100 * 95 + 'px'; ;
          }
        }
        boxContent[0].style.display = 'none';
        mainLink.style.display = 'none';
        indexBackground.style.overflow = 'hidden';
        element.innerHTML = "▶ " + element.innerHTML.slice(2);
      }
    }
  </script>
